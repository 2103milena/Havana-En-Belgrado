{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 59353c3fd8a5b1839940","webpack:///./src/modules/util/index.ts","webpack:///./src/modules/dirty-clean/index.ts","webpack:///./src/modules/event-loop/index.ts","webpack:///./node_modules/key/lib/ref.js","webpack:///./src/modules/dirty-props/index.ts","webpack:///./src/modules/position-range/index.ts","webpack:///./src/modules/debounce/index.ts","webpack:///./src/modules/space/converter.ts","webpack:///./src/modules/space/dimensional-converter.ts","webpack:///./src/modules/abstract-row-col-model/index.ts","webpack:///./src/modules/data-model/index.ts","webpack:///./src/modules/range-util/index.ts","webpack:///./src/modules/cell-classes/index.ts","webpack:///./src/modules/cell-keyboard-model/index.ts","webpack:///./src/modules/cell-mouse-model/index.ts","webpack:///./src/modules/custom-event/index.ts","webpack:///./src/modules/cell-scroll-model/index.ts","webpack:///./src/modules/col-model/index.ts","webpack:///./src/modules/col-reorder/index.ts","webpack:///./src/modules/ctrl-or-cmd/index.ts","webpack:///./node_modules/element-class/index.js","webpack:///./src/modules/col-resize/index.ts","webpack:///./src/modules/copy-paste/index.ts","webpack:///./src/modules/decorators/index.ts","webpack:///./src/modules/edit-model/index.ts","webpack:///./node_modules/key/lib/key.js","webpack:///./src/modules/fps/index.ts","webpack:///./src/modules/navigation-model/index.ts","webpack:///./src/modules/pixel-scroll-model/index.ts","webpack:///./src/modules/row-model/index.ts","webpack:///./src/modules/show-hidden-cols/index.ts","webpack:///./src/modules/space/data-space-converter.ts","webpack:///./src/modules/space/view-space-converter.ts","webpack:///./src/modules/space/virtual-space-converter.ts","webpack:///./src/modules/view-layer/index.ts","webpack:///./src/modules/view-port/index.ts","webpack:///./src/modules/virtual-pixel-cell-model/index.ts","webpack:///./src/modules/core/index.ts","webpack:///./node_modules/es6-object-assign/index.js","webpack:///./src/modules/listeners/index.ts","webpack:///./src/modules/mousewheel/index.ts","webpack:///./src/modules/pass-through/index.ts","webpack:///./src/modules/header-decorators/index.ts","webpack:///./src/modules/tsv/index.ts","webpack:///./node_modules/inner-text-shim/index.js","webpack:///./node_modules/key/lib/code/special.js","webpack:///./node_modules/key/lib/code/arrow.js","webpack:///./node_modules/key/lib/code/punctuation.js","webpack:///./node_modules/key/lib/code/alnum.js","webpack:///./node_modules/key/lib/code/brand.js","webpack:///./node_modules/click-off/src/index.js","webpack:///./node_modules/time-now/index.js","webpack:///./node_modules/escape-stack/src/index.js"],"names":[],"mappings":"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e,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CACnC,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EACrB,GAAG,CACN,CAAC;SAEL;aAAM;YAGH,eAAe,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;SAEnC;QAID,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;KACrD;IAGD,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI;QACnD,CAAC,OAAO,CAAC;KACZ,CAAC;AACN,CAAC;AAEY,aAAK,GAAG,UAAC,UAAkB;IACpC,OAAO,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AACxC,CAAC,CAAC;;;;;;;AChHF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA,E;;;;;;AClCA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;ACvBD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;ACjBD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;AClDD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;ACjDD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;AClBD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AC3BA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACXD;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grid\"] = factory();\n\telse\n\t\troot[\"grid\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59353c3fd8a5b1839940","export type RowCol = 'row' | 'col';\n\nexport function clamp(num: number, min: number, max: number, returnNaN?: boolean) {\n    if (num > max) {\n        return returnNaN ? NaN : max;\n    }\n    if (num < min) {\n        return returnNaN ? NaN : min;\n    }\n    return num;\n}\n\nexport function isRow(rowCol: RowCol) {\n    return rowCol === 'row';\n}\n\nexport function isCol(rowCol: RowCol) {\n    return rowCol === 'col';\n}\n\nexport function isNumber(num: any): num is number {\n    return typeof num === 'number' && !isNaN(num);\n}\n\nexport function isElementWithStyle(node?: any): node is HTMLElement {\n    return !!node.style;\n}\n\nexport function isElement(node?: any): node is HTMLElement {\n    return !!(node &&\n        node.nodeName); // we are a direct element\n}\nexport function toArray<T>(thing?: T | T[]): T[] {\n    return thing != undefined && !Array.isArray(thing) ? [thing] : thing || [];\n}\n\nexport function position(elem: HTMLElement, t?: number, l?: number, b?: number, r?: number, h?: number, w?: number) {\n    if (t != null) {\n        elem.style.top = t + 'px';\n    }\n    if (l != null) {\n        elem.style.left = l + 'px';\n    }\n    if (b != null) {\n        elem.style.bottom = b + 'px';\n    }\n    if (r != null) {\n        elem.style.right = r + 'px';\n    }\n    if (h != null) {\n        elem.style.height = h + 'px';\n    }\n    if (w != null) {\n        elem.style.width = w + 'px';\n    }\n    elem.style.position = 'absolute';\n}\n\nexport function position3D(elem: HTMLElement, t?: number, l?: number) {\n    let x = '0';\n    let y = '0';\n    if (l != null) {\n        x = l + 'px';\n    }\n    if (t != null) {\n        y = t + 'px';\n    }\n    elem.style.transform = 'translate3d(' + x + ',' + y + ',0)';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/util/index.ts","import { Grid } from '../core';\n\nexport interface IDirtyClean {\n    isDirty(): boolean;\n    isClean(): boolean;\n    setDirty(): void;\n    setClean(): void;\n    disable(): void;\n    enable(): void;\n}\n\nexport function create(grid: Grid) {\n    let dirty = true;\n\n    let unbindDrawHandler: (() => void) | null = null;\n\n    function listenForDraw() {\n        if (!unbindDrawHandler) {\n            unbindDrawHandler = grid.eventLoop.bind('grid-draw', () => {\n                dirtyCleanInstance.setClean();\n            });\n        }\n    }\n\n    const dirtyCleanInstance: IDirtyClean = {\n        isDirty() {\n            return dirty;\n        },\n        isClean() {\n            return !dirty;\n        },\n        setDirty() {\n            dirty = true;\n            // when things are initalizing sometimes this doesn't exist yet\n            // we have to hope that at the end of initialization the grid will call request draw itself\n            if (grid.requestDraw) {\n                grid.requestDraw();\n            }\n        },\n        setClean() {\n            dirty = false;\n        },\n        disable() {\n            if (unbindDrawHandler) {\n                unbindDrawHandler();\n                unbindDrawHandler = null;\n            }\n        },\n        enable() {\n            listenForDraw();\n        }\n    };\n\n    dirtyCleanInstance.enable();\n\n    return dirtyCleanInstance;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/dirty-clean/index.ts","import { IRowColEvent } from '../abstract-row-col-model';\nimport debounce from '../debounce';\nimport listeners from '../listeners';\nimport mousewheel from '../mousewheel';\nimport * as util from '../util';\n\nexport const EVENTS: Array<keyof HTMLElementEventMap> =\n    ['click', 'mousedown', 'mouseup', 'mousemove', 'dblclick', 'keydown', 'keypress', 'keyup', 'copy', 'paste'];\n\nexport const GRID_EVENTS = ['grid-drag-start', 'grid-drag', 'grid-cell-drag', 'grid-drag-end', 'grid-cell-mouse-move'];\n\nexport interface IAnnotatedEvent {\n    realRow: number;\n    realCol: number;\n    virtualRow: number;\n    virtualCol: number;\n    row: number;\n    col: number;\n}\n\nexport interface IAnnotatedMouseEvent extends IAnnotatedEvent {\n    gridX: number;\n    gridY: number;\n}\n\nexport interface IGridCustomMouseEvent extends CustomEvent, IAnnotatedMouseEvent {\n    clientX: number;\n    clientY: number;\n    layerX: number;\n    layerY: number;\n    originalEvent: AnnotatedMouseEventUnion;\n}\n\nexport interface IGridDragStartEvent extends IGridCustomMouseEvent {\n    enableAutoScroll(): void;\n}\n\n// tslint:disable-next-line:interface-over-type-literal\nexport type GridCustomMouseEventMap = {\n    'grid-drag': IGridCustomMouseEvent,\n    'grid-cell-drag': IGridCustomMouseEvent,\n    'grid-drag-start': IGridDragStartEvent,\n    'grid-drag-end': IGridCustomMouseEvent,\n    'grid-cell-mouse-move': IGridCustomMouseEvent,\n};\n\nconst GridCustomMouseEvents: { [key: string]: boolean | undefined } = {\n    'grid-drag': true,\n    'grid-cell-drag': true,\n    'grid-drag-start': true,\n    'grid-drag-end': true,\n    'grid-cell-mouse-move': true,\n};\n\nexport type GridCustomMouseEventTypes = keyof GridCustomMouseEventMap;\n\n// tslint:disable-next-line:interface-over-type-literal\nexport type GridCustomEventMap = GridCustomMouseEventMap & {\n    'grid-row-change': IRowColEvent,\n    'grid-col-change': IRowColEvent,\n};\n\nexport const isAnnotatedGridCustomMouseEvent = (e: EventUnion): e is AnnotatedGridCustomMouseEventUnion => !!GridCustomMouseEvents[e.type];\n\nexport const ANNOTATED_MOUSE_EVENTS = {\n    click: true,\n    dblclick: true,\n    mousedown: true,\n    mousemove: true,\n    mouseup: true,\n};\nexport const ANNOTATED_MOUSE_EVENTS_MAP: { readonly [key: string]: boolean | undefined; } = ANNOTATED_MOUSE_EVENTS;\nexport const isAnnotatedMouseEvent = (e: EventUnion): e is AnnotatedMouseEventUnion => !!ANNOTATED_MOUSE_EVENTS_MAP[e.type];\nexport const isAnnotatedMouseEventOfType =\n    <T extends keyof typeof ANNOTATED_MOUSE_EVENTS>(e: EventUnion, type: T): e is AnnotatedHTMLElementMouseEventMap[T] =>\n        type === e.type;\n\nexport const ANNOTATED_KEY_EVENTS = {\n    keydown: true,\n    keypress: true,\n    keyup: true,\n};\nexport const ANNOTATED_KEY_EVENTS_MAP: { readonly [key: string]: boolean | undefined; } = ANNOTATED_KEY_EVENTS;\nexport const isAnnotatedKeyEvent = (e: EventUnion): e is AnnotatedKeyEventUnion => !!ANNOTATED_KEY_EVENTS_MAP[e.type];\n\nexport const isAnnotatedMouseOrKeyEvent = (e: EventUnion): e is AnnotatedMouseOrKeyEventUnion =>\n    isAnnotatedKeyEvent(e) ||\n    isAnnotatedMouseEvent(e);\nexport const isAnnotatedEvent = (e: EventUnion): e is AnnotatedEventUnion =>\n    isAnnotatedMouseOrKeyEvent(e) ||\n    isAnnotatedGridCustomMouseEvent(e);\n\nexport type AnnotatedHTMLElementKeyEventMap = {\n    [K in keyof typeof ANNOTATED_KEY_EVENTS]: IAnnotatedEvent & HTMLElementEventMap[K];\n};\n\nexport type AnnotatedHTMLElementMouseEventMap = {\n    [K in keyof typeof ANNOTATED_MOUSE_EVENTS]: IAnnotatedMouseEvent & HTMLElementEventMap[K];\n};\n\nexport type AnnotatedHTMLElementEventMap = AnnotatedHTMLElementKeyEventMap & AnnotatedHTMLElementMouseEventMap;\nexport type AnnotatedGridCustomMouseEventUnion = GridCustomMouseEventMap[keyof GridCustomMouseEventMap];\nexport type AnnotatedMouseEventUnion = AnnotatedHTMLElementMouseEventMap[keyof AnnotatedHTMLElementMouseEventMap];\nexport type AnnotatedKeyEventUnion = AnnotatedHTMLElementKeyEventMap[keyof AnnotatedHTMLElementKeyEventMap];\nexport type AnnotatedMouseOrKeyEventUnion = AnnotatedMouseEventUnion | AnnotatedKeyEventUnion;\nexport type AnnotatedEventUnion = AnnotatedMouseOrKeyEventUnion | AnnotatedGridCustomMouseEventUnion;\n\nexport type AnnotatedWindowKeyEventMap = {\n    [K in keyof typeof ANNOTATED_KEY_EVENTS]: IAnnotatedEvent & WindowEventMap[K];\n};\n\nexport type AnnotatedWindowMouseEventMap = {\n    [K in keyof typeof ANNOTATED_MOUSE_EVENTS]: IAnnotatedMouseEvent & WindowEventMap[K];\n};\n\nexport type AnnotatedWindowEventMap = AnnotatedWindowKeyEventMap & AnnotatedWindowMouseEventMap;\n\nexport type AnnotatedDocumentKeyEventMap = {\n    [K in keyof typeof ANNOTATED_KEY_EVENTS]: IAnnotatedEvent & DocumentEventMap[K];\n};\n\nexport type AnnotatedDocumentMouseEventMap = {\n    [K in keyof typeof ANNOTATED_MOUSE_EVENTS]: IAnnotatedMouseEvent & DocumentEventMap[K];\n};\n\nexport type AnnotatedDocumentEventMap = AnnotatedDocumentKeyEventMap & AnnotatedDocumentMouseEventMap;\n\nexport type AllEventMap = AnnotatedHTMLElementEventMap & HTMLElementEventMap & WindowEventMap & DocumentEventMap & GridCustomEventMap;\nexport type EventUnion = AllEventMap[keyof AllEventMap] | (ILoopEvent & { target?: undefined; });\n\nexport type WindowEventHandler<K extends keyof WindowEventMap> = (ev: WindowEventMap[K]) => any;\nexport type DocumentEventHandler<K extends keyof DocumentEventMap> = (ev: DocumentEventMap[K]) => any;\nexport type HTMLElementEventHandler<K extends keyof HTMLElementEventMap> = (ev: HTMLElementEventMap[K]) => any;\nexport type AnnotatedWindowEventHandler<K extends keyof AnnotatedWindowEventMap> = (ev: AnnotatedWindowEventMap[K]) => any;\nexport type AnnotatedDocumentEventHandler<K extends keyof AnnotatedDocumentEventMap> = (ev: AnnotatedDocumentEventMap[K]) => any;\nexport type AnnotatedHTMLElementEventHandler<K extends keyof AnnotatedHTMLElementEventMap> = (ev: AnnotatedHTMLElementEventMap[K]) => any;\nexport type GridCustomEventHandler<K extends keyof GridCustomEventMap> = (ev: GridCustomEventMap[K]) => any;\nexport type LoopEventHandler = (ev: ILoopEvent) => any;\nexport type EventUnionHandler = (ev: EventUnion) => any;\n\nexport interface ILoopEvent {\n    type: string;\n    gridStopBubbling?: boolean;\n}\n\nexport interface IEventHandler extends LoopEventHandler {\n    _eventLoopIdx?: number;\n    _eventLoopUnbound?: boolean;\n}\n\nexport type EventHandlerUnbinder = () => void;\nexport type BindTarget = HTMLElement | Window | Document;\n\nexport interface IBind {\n    bind<K extends keyof AnnotatedWindowEventMap>(\n        elem: Window,\n        name: K,\n        handler: AnnotatedWindowEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof AnnotatedDocumentEventMap>(\n        elem: Document,\n        name: K,\n        handler: AnnotatedDocumentEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof AnnotatedHTMLElementEventMap>(\n        elem: HTMLElement,\n        name: K,\n        handler: AnnotatedHTMLElementEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof AnnotatedHTMLElementEventMap>(\n        name: K,\n        handler: AnnotatedHTMLElementEventHandler<K>\n    ): EventHandlerUnbinder;\n\n    bind<K extends keyof GridCustomEventMap>(\n        elem: BindTarget,\n        name: K,\n        handler: GridCustomEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof GridCustomEventMap>(\n        name: K,\n        handler: GridCustomEventHandler<K>\n    ): EventHandlerUnbinder;\n\n    bind<K extends keyof WindowEventMap>(\n        elem: Window,\n        name: K,\n        handler: WindowEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof DocumentEventMap>(\n        elem: Document,\n        name: K,\n        handler: DocumentEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof HTMLElementEventMap>(\n        elem: HTMLElement,\n        name: K,\n        handler: HTMLElementEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind<K extends keyof HTMLElementEventMap>(\n        name: K,\n        handler: HTMLElementEventHandler<K>\n    ): EventHandlerUnbinder;\n    bind(name: string, handler: IEventHandler): EventHandlerUnbinder;\n}\n\n// tslint:disable-next-line:interface-over-type-literal\nexport type BindOnce<T> = {\n    bindOnce: T[keyof T];\n};\n\nexport interface IEventLoop extends IBind {\n    isRunning: boolean;\n    destroyed: boolean;\n    logTargets?: boolean;\n    setContainer(c: HTMLElement): void;\n    fire(event: string | ILoopEvent): void;\n    addInterceptor(h: EventUnionHandler): EventHandlerUnbinder;\n    addExitListener(h: EventUnionHandler): EventHandlerUnbinder;\n    stopBubbling(e: ILoopEvent): ILoopEvent;\n}\nexport type EventLoop = IEventLoop & BindOnce<IBind>;\n\nexport function create() {\n    const handlersByName: { [key: string]: Array<IEventHandler | null> | undefined } = {};\n    const domUnbindFns: EventHandlerUnbinder[] = [];\n    const interceptors = listeners();\n    const exitListeners = listeners();\n\n    let unbindAll: () => void;\n\n    const eloop: EventLoop = {\n        isRunning: false,\n        destroyed: false,\n        setContainer(container: HTMLElement) {\n            const unbindMouseWheelFn = mousewheel.bind(container, mainLoop);\n\n            EVENTS.forEach((name) => {\n                bindToDomElement(container, name, mainLoop);\n            });\n\n            GRID_EVENTS.forEach((name) => {\n                bindToDomElement(window, name, mainLoop);\n            });\n\n            unbindAll = () => {\n                unbindMouseWheelFn();\n\n                // have to copy the array since the unbind will actually remove itself from the array which modifies it mid iteration\n                domUnbindFns.slice(0).forEach((unbind) => {\n                    unbind();\n                });\n\n                Object.keys(handlersByName).forEach((key) => {\n                    handlersByName[key] = [];\n                });\n            };\n        },\n        // tslint:disable-next-line:only-arrow-functions object-literal-shorthand\n        bind: function () {\n            const args: any[] = Array.prototype.slice.call(arguments, 0);\n            const name: string = args.filter((arg) => {\n                return typeof arg === 'string';\n            })[0];\n            const handler = getHandlerFromArgs(args);\n            if (!handler || !name) {\n                throw new Error('cannot bind without at least name and function');\n            }\n\n            const elem: BindTarget = args.filter((arg) => {\n                return util.isElement(arg) || arg === window || arg === document;\n            })[0];\n\n            if (!elem) {\n\n                handler._eventLoopIdx = getHandlers(name).push(handler) - 1;\n                handler._eventLoopUnbound = false;\n                return () => {\n                    if (handler._eventLoopUnbound) {\n                        return;\n                    }\n                    handler._eventLoopUnbound = true;\n                    const handlers = getHandlers(name);\n                    if (handler._eventLoopIdx != undefined) {\n                        handlers[handler._eventLoopIdx] = null;\n                    }\n                    // release the memory but do the expensive work later all at once\n                    scheduleHandlerCleanUp();\n                };\n            } else {\n                const listener = loopWith(handler);\n                // make sure the elem can receive events\n                if (util.isElementWithStyle(elem)) {\n                    elem.style.pointerEvents = 'auto';\n                }\n                return bindToDomElement(elem, name, listener);\n            }\n        },\n        // tslint:disable-next-line:only-arrow-functions object-literal-shorthand\n        bindOnce: function (this: any) {\n            const args = Array.prototype.slice.call(arguments, 0);\n            const handler = getHandlerFromArgs(args);\n            args.splice(args.indexOf(handler), 1, function bindOnceHandler(e: ILoopEvent) {\n                unbind();\n                handler(e);\n            });\n            const unbind = eloop.bind.apply(this, args);\n            return unbind;\n        },\n        fire: (event) => {\n            event = typeof event === 'string' ? {\n                type: event\n            } : event;\n            mainLoop(event);\n        },\n        addInterceptor: interceptors.addListener,\n        addExitListener: exitListeners.addListener,\n        stopBubbling(e: ILoopEvent) {\n            e.gridStopBubbling = true;\n            return e;\n        }\n    };\n\n    function getHandlers(name: string) {\n        let handlers = handlersByName[name];\n        if (!handlers) {\n            handlers = handlersByName[name] = [];\n        }\n        return handlers;\n    }\n\n    function bindToDomElement(elem: BindTarget, name: string, listener: EventListener) {\n        elem.addEventListener(name, listener);\n        const unbindFn = () => {\n            elem.removeEventListener(name, listener);\n            domUnbindFns.splice(domUnbindFns.indexOf(unbindFn), 1);\n        };\n        domUnbindFns.push(unbindFn);\n        return unbindFn;\n    }\n\n    function getHandlerFromArgs(args: any[]) {\n        const handler: IEventHandler = args.filter((arg) => {\n            return typeof arg === 'function';\n        })[0];\n        return handler;\n    }\n\n    function loopWith(fn: (e: ILoopEvent) => void) {\n        return (e: ILoopEvent) => {\n            loop(e, fn);\n        };\n    }\n\n    const scheduleHandlerCleanUp = debounce(() => {\n        Object.keys(handlersByName).forEach((type) => {\n            let i = 0;\n            const handlers = handlersByName[type];\n            if (!handlers) {\n                return;\n            }\n            handlersByName[type] = handlers.filter((handler) => {\n                if (!!handler) {\n                    handler._eventLoopIdx = i;\n                    i++;\n                }\n                return !!handler;\n            });\n        });\n    }, 1);\n\n    const mainLoop = loopWith((e) => {\n        // have to copy the array because handlers can unbind themselves which modifies the array\n        // we use some so that we can break out of the loop if need be\n        getHandlers(e.type).slice(0).some((handler) => {\n            if (!handler) {\n                return false;\n            }\n            handler(e);\n            if (e.gridStopBubbling) {\n                return true;\n            }\n            return false;\n        });\n    });\n\n    function loop(e: ILoopEvent, bodyFn: (e: ILoopEvent) => void) {\n        if (eloop.logTargets) {\n            console.log('target', (e as any).target, 'currentTarget', (e as any).currentTarget);\n        }\n        const isOuterLoopRunning = eloop.isRunning;\n        eloop.isRunning = true;\n        interceptors.notify(e);\n        if (!e.gridStopBubbling) {\n            bodyFn(e);\n        }\n\n        if (!isOuterLoopRunning) {\n            eloop.isRunning = false;\n            exitListeners.notify(e);\n        }\n    }\n\n    eloop.bind('grid-destroy', () => {\n        unbindAll();\n        eloop.destroyed = true;\n    });\n\n    return eloop;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/event-loop/index.ts","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var Reference, assertRef, isRef, ref;\n\n  Reference = (function() {\n\n    function Reference(name, code) {\n      this.name = name;\n      this.code = code;\n    }\n\n    return Reference;\n\n  })();\n\n  ref = function(name, code) {\n    return new Reference(name, code);\n  };\n\n  isRef = function(ref) {\n    return ref instanceof Reference;\n  };\n\n  assertRef = function(ref) {\n    if (!isRef(ref)) {\n      throw new Error('Invalid reference');\n    }\n    return ref;\n  };\n\n  module.exports = {\n    ref: ref,\n    isRef: isRef,\n    assertRef: assertRef\n  };\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/ref.js\n// module id = 3\n// module chunks = 0","import { IDirtyClean } from '../dirty-clean';\n\nexport interface IHasPreDirty {\n    preDirty(): void;\n}\n\nexport interface IHasOnDirty {\n    onDirty<T>(newVal: T, oldVal: T): void;\n}\n\nexport interface IDirtyProp extends Partial<IHasPreDirty>, Partial<IHasOnDirty> {\n    name: string;\n}\n\nexport type DirtyProp = string | IDirtyProp;\n\nconst isDirtyPropWithPre =\n    (dirtyProp: any): dirtyProp is IHasPreDirty =>\n        !!(dirtyProp as IDirtyProp).preDirty;\nconst isDirtyPropWithOn =\n    (dirtyProp: any): dirtyProp is IHasOnDirty =>\n        !!(dirtyProp as IDirtyProp).onDirty;\n\nexport function add<T>(obj: T, props: DirtyProp[], dirtyCleans: IDirtyClean[]) {\n    props.forEach((prop) => {\n        let val: any;\n        const name = (prop as IDirtyProp).name || prop as string;\n        // store the value if it was already there\n        const initialVal = (obj as any)[name];\n        Object.defineProperty(obj, name, {\n            enumerable: true,\n            get() {\n                return val;\n            },\n            set(newVal: any) {\n                const oldVal = val;\n                const isChanged = newVal !== oldVal;\n                if (isChanged && isDirtyPropWithPre(prop)) {\n                    prop.preDirty();\n                }\n                val = newVal;\n\n                if (isChanged) {\n                    dirtyCleans.forEach((dirtyClean) => {\n                        dirtyClean.setDirty();\n                    });\n                    if (isDirtyPropWithOn(prop)) {\n                        prop.onDirty(newVal, oldVal);\n                    }\n                }\n            }\n        });\n        // reset the initial value both to keep it and to trigger the dirty logic\n        (obj as any)[name] = initialVal;\n    });\n    return obj;\n}\n\nexport default add;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/dirty-props/index.ts","import { IDirtyClean } from '../dirty-clean';\nimport addDirtyProps, { DirtyProp, IDirtyProp } from '../dirty-props';\n\nexport type IDirtyPropOpts = Pick<IDirtyProp, 'preDirty' | 'onDirty'>;\nconst WATCHED_PROP_NAMES = ['top', 'left', 'height', 'width', 'units', 'space'];\n\nexport type PositionUnit = 'cell' | 'px';\nexport type PositionSpace = 'data' | 'virtual' | 'real';\n\nexport const toStandardSpace = (space: PositionSpace) => {\n    if (space === 'real') {\n        return 'view';\n    }\n    return space;\n};\n\nexport interface IRawPositionRange {\n    top: number;\n    left: number;\n    height: number;\n    width: number;\n}\n\nexport type RawPositionRange = IRawPositionRange;\nexport type PartialRawPositionRange = Partial<IRawPositionRange>;\nexport type RawPositionRangeUnion = RawPositionRange | PartialRawPositionRange;\n\nexport interface IPartialPositionRange extends PartialRawPositionRange {\n    units: PositionUnit;\n    space: PositionSpace;\n    isDirty(): void;\n}\n\n// not the sexiest but we get the position type assuming top / left width / height are the same type\nexport type PositionType<T extends RawPositionRangeUnion> = T['top'];\nexport type SizeType<T extends RawPositionRangeUnion> = T['height'];\nexport type PositionGet = <T extends RawPositionRangeUnion>(r: T) => PositionType<T>;\nexport type PositionSet = <T extends RawPositionRangeUnion>(r: T, p: PositionType<T>) => T;\nexport type SizeGet = <T extends RawPositionRangeUnion>(r: T) => SizeType<T>;\nexport type SizeSet = <T extends RawPositionRangeUnion>(r: T, p: SizeType<T>) => T;\n\nexport interface IPositionRangeDimension {\n    getPosition: PositionGet;\n    setPosition: PositionSet;\n    getSize: SizeGet;\n    setSize: SizeSet;\n}\n\nconst getTop = <T extends RawPositionRangeUnion>(range: T) => {\n    return range.top;\n};\n\nconst setTop = <T extends RawPositionRangeUnion>(range: T, p: number) => {\n    range.top = p;\n    return range;\n};\n\nconst getHeight = <T extends RawPositionRangeUnion>(range: T) => {\n    return range.height;\n};\n\nconst setHeight = <T extends RawPositionRangeUnion>(range: T, s: number) => {\n    range.height = s;\n    return range;\n};\n\nconst getLeft = <T extends RawPositionRangeUnion>(range: T) => {\n    return range.left;\n};\nconst setLeft = <T extends RawPositionRangeUnion>(range: T, p: number) => {\n    range.left = p;\n    return range;\n};\n\nconst getWidth = <T extends RawPositionRangeUnion>(range: T) => {\n    return range.width;\n};\n\nconst setWidth = <T extends RawPositionRangeUnion>(range: T, s: number) => {\n    range.width = s;\n    return range;\n};\n\nexport const rowPositionRangeDimension: IPositionRangeDimension = {\n    getPosition: getTop,\n    getSize: getHeight,\n    setPosition: setTop,\n    setSize: setHeight,\n};\n\nexport const colPositionRangeDimension: IPositionRangeDimension = {\n    getPosition: getLeft,\n    getSize: getWidth,\n    setPosition: setLeft,\n    setSize: setWidth,\n};\n\nexport function mixin<T extends object>(\n    range: T,\n    dirtyClean: IDirtyClean,\n    parentDirtyClean?: IDirtyClean,\n    propOpts?: IDirtyPropOpts\n) {\n    range = range || {}; // allow mixin functionality\n    // tslint:disable-next-line:prefer-object-spread\n    const rangeResult: IPartialPositionRange & T = Object.assign(range, {\n        isDirty: dirtyClean.isDirty,\n        // defaults\n        units: 'cell' as 'cell',\n        space: 'data' as 'data',\n    });\n\n    (rangeResult as any)._positionRangeDirtyClean = dirtyClean;\n\n    let watchedProperties: DirtyProp[] = WATCHED_PROP_NAMES;\n    if (propOpts) {\n        watchedProperties = WATCHED_PROP_NAMES.map((propName) => {\n            return {\n                name: propName,\n                onDirty: propOpts.onDirty,\n                preDirty: propOpts.preDirty\n            };\n        });\n    }\n    const dirtyCleans = [dirtyClean];\n    if (parentDirtyClean) {\n        dirtyCleans.push(parentDirtyClean);\n    }\n\n    addDirtyProps(rangeResult, watchedProperties, dirtyCleans);\n\n    return rangeResult;\n}\n\nexport default mixin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/position-range/index.ts","export interface IDebounceFunction {\n    (): void;\n    timeout?: number;\n    canceled?: boolean;\n    cancel(): void;\n}\n\n// up here to avoid creating a new object just for assignment every time\nconst debouncedFnProps = { cancel: () => { /* noop */ } };\n\nexport function debounce(fn: (...args: any[]) => void, delay: number) {\n    // tslint:disable-next-line:prefer-object-spread\n    const f: IDebounceFunction = Object.assign(function debounced() {\n        if (f.timeout) {\n            clearTimeout(f.timeout);\n            f.timeout = undefined;\n        }\n        if (!f.canceled) {\n            f.timeout = window.setTimeout(fn, delay);\n        }\n        f.cancel = () => {\n            if (f.timeout != undefined) {\n                clearTimeout(f.timeout);\n            }\n            f.timeout = undefined;\n            f.canceled = true;\n        };\n    }, debouncedFnProps);\n    return f;\n}\n\nexport default debounce;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/debounce/index.ts","import { IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport { Grid } from '../core';\nimport { RawPositionRange } from '../position-range';\nimport { CellFn, getArgs, RowFn } from '../range-util';\n\nimport { AbstractDimensionalSpaceConverter } from './dimensional-converter';\n\nexport abstract class AbstractSpaceConverter {\n  abstract row: AbstractDimensionalSpaceConverter<IRowDescriptor>;\n  abstract col: AbstractDimensionalSpaceConverter<IColDescriptor>;\n  up: (coord: number) => number | undefined;\n  down: (coord: number) => number | undefined;\n  left: (coord: number) => number | undefined;\n  right: (coord: number) => number | undefined;\n  grid: Grid;\n  constructor(grid: Grid) {\n    this.grid = grid;\n    this.up = (i) => this.row.prev(i);\n    this.down = (i) => this.row.next(i);\n    this.left = (i) => this.col.prev(i);\n    this.right = (i) => this.col.next(i);\n  }\n\n  iterate(range: RawPositionRange, cellFn: CellFn<undefined>): void;\n  iterate<T>(range: RawPositionRange, rowFn: RowFn<T>, cellFn: CellFn<T>): void;\n  iterate<T>() {\n    // expects to be called with the space as its this\n    const args = getArgs<T>(arguments);\n    const range = args.range;\n    const rowFn = args.rowFn;\n    const cellFn = args.cellFn;\n\n    rowloop: for (let r: number | undefined = range.top; r !== undefined && r < range.top + range.height; r = this.row.next(r)) {\n      let rowResult;\n      if (rowFn) {\n        rowResult = rowFn(r);\n      }\n      colloop: for (let c: number | undefined = range.left; c !== undefined && c < range.left + range.width; c = this.col.next(c)) {\n        if (cellFn) {\n          const result = cellFn(r, c, rowResult);\n          if (result === false) {\n            break rowloop;\n          } else if (result === true) {\n            break colloop;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/space/converter.ts","import { IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport { IGridDimension } from '../core';\nimport * as  util from '../util';\n\nexport type DimensionalSpaceCoordConverter = (spaceCoord: number) => number;\n\nexport interface IIndexOpts {\n  from?: number;\n  to?: number;\n  length?: number;\n  reverse?: boolean;\n}\n\nexport abstract class AbstractDimensionalSpaceConverter<T extends IColDescriptor | IRowDescriptor> {\n  gridDimension: IGridDimension;\n  constructor(gridDimension: IGridDimension) {\n    this.gridDimension = gridDimension;\n  }\n  abstract toVirtual(spaceCoord: number): number;\n  abstract toView(spaceCoord: number): number;\n  abstract toData(spaceCoord: number): number;\n  abstract count(): number;\n  clamp(idx: number): number {\n    return util.clamp(idx, 0, this.count() - 1);\n  }\n  prev(coord: number) {\n    return this.iterateWhileHidden(-1, coord);\n  }\n  next(coord: number) {\n    return this.iterateWhileHidden(1, coord);\n  }\n  get(coord: number): T {\n    return this.gridDimension.rowColModel.get(this.toVirtual(coord)) as T;\n  }\n\n  indexes(opts: IIndexOpts = {}) {\n    opts.from = opts.from || 0;\n    const count = this.count();\n    opts.to = (opts.to && opts.to + 1) ||\n      (opts.length && opts.length + opts.from) ||\n      count;\n    const indexes = [];\n    for (let idx: number | undefined = Math.max(opts.from, 0);\n      idx != undefined && idx < Math.min(opts.to, count);\n      idx = opts.reverse ? this.prev(idx) : this.next(idx)) {\n      indexes.push(idx);\n    }\n    return indexes;\n  }\n  iterate(opts: IIndexOpts, fn: (idx: number) => boolean | undefined): void;\n  iterate(fn: (idx: number) => boolean | undefined): void;\n  iterate() {\n    let opts: IIndexOpts | undefined;\n    let fn: (idx: number) => boolean | undefined;\n    if (arguments.length === 2) {\n      opts = arguments[0];\n      fn = arguments[1];\n    } else {\n      fn = arguments[0];\n    }\n    this.indexes(opts).some((idx: number) => {\n      return !!fn(idx);\n    });\n  }\n  private iterateWhileHidden(step: number = 1, start: number) {\n    for (let i = start + step; i < this.count() && i >= 0; i += step) {\n      if (!this.get(i).hidden) {\n        return i;\n      }\n    }\n    return undefined;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/space/dimensional-converter.ts","import { Grid } from '../core';\nimport { IGridDataChangeBody, IGridDataResult } from '../data-model';\nimport debounce from '../debounce';\nimport makeDirtyClean, { IDirtyClean } from '../dirty-clean';\nimport addDirtyProps from '../dirty-props';\nimport { IEditOptions } from '../edit-model';\nimport passThrough from '../pass-through';\nimport * as util from '../util';\n\nexport interface IAbstractRowColModel {\n  defaultSize: number;\n  areBuildersDirty: () => boolean;\n  isDirty: () => boolean;\n  get(i: number): IRowColDescriptor;\n  toVirtual(i: number): number;\n  toData(i: number): number;\n  length(includeHeaders?: boolean): number;\n  header(index: number): IRowColDescriptor;\n  add(d?: IRowColDescriptor | IRowColDescriptor[]): void;\n  addHeaders(d?: IRowColDescriptor | IRowColDescriptor[]): void;\n  remove(descriptor: IRowColDescriptor, dontUpdateIndex?: boolean): void;\n  clear(includeHeaders?: boolean): void;\n  move(fromIndexes: number | number[], target: number, after?: boolean): void;\n  numHeaders(): number;\n  numFixed(excludeHeaders?: boolean): number;\n  sizeOf(index: number): number;\n  select(indexes: number | number[], dontFire?: boolean): void;\n  deselect(indexes: number | number[], dontFire?: boolean): void;\n  toggleSelect(index: number): void;\n  clearSelected(): void;\n  getSelected(): number[];\n  allSelected(): boolean;\n  create(builder?: IRowColBuilder): IRowColDescriptor;\n  createBuilder(render: BuilderRenderer, update?: BuilderUpdater): IRowColBuilder;\n}\n\nexport interface IRowColDescriptor {\n  expanded: boolean;\n  isBuiltActionable: boolean;\n  hidden?: boolean;\n  index?: number;\n  selected?: boolean;\n  selectable?: boolean;\n  header?: boolean;\n  fixed?: boolean;\n  dragReadyClass?: any; // a class descriptor\n  builder?: IRowColBuilder;\n  children?: IRowColDescriptor[];\n  editOptions?: IEditOptions;\n  data?: Array<IGridDataChangeBody<any>>;\n}\n\nexport interface IRowDescriptor extends IRowColDescriptor {\n  height?: number;\n  children?: IRowDescriptor[];\n}\nexport interface IColDescriptor extends IRowColDescriptor {\n  width?: number;\n  children?: IColDescriptor[];\n}\n\nexport interface IBuilderUpdateContext {\n  virtualCol: number;\n  virtualRow: number;\n  data: IGridDataResult<any>;\n}\nexport interface IBuilderRenderContext {\n  viewRow: number;\n  viewCol: number;\n  previousElement: HTMLElement | undefined;\n}\n\nexport type BuilderRenderer = (context: IBuilderRenderContext) => HTMLElement | undefined;\nexport type BuilderUpdater = (builtElem: HTMLElement | undefined, context: IBuilderUpdateContext) => HTMLElement | void;\n\nexport interface IRowColBuilder {\n  render: BuilderRenderer;\n  update: BuilderUpdater;\n  includeHeaders: boolean;\n}\n\nexport interface IRowColEventBody {\n  action: 'add' | 'remove' | 'move' | 'hide' | 'size';\n  descriptors: IRowColDescriptor[];\n  target?: undefined;\n}\n\nexport interface IRowColEvent extends IRowColEventBody {\n  type: string;\n}\n\nexport class AbstractRowColModel {\n  grid: Grid;\n  defaultSize: number;\n  areBuildersDirty: () => boolean;\n  isDirty: () => boolean;\n  private name: string;\n  rangeStates: any[];\n  private descriptors: IRowColDescriptor[] = [];\n  private _numFixed: number = 0;\n  private _numHeaders: number = 0;\n  private dirtyClean: IDirtyClean;\n  private builderDirtyClean: IDirtyClean;\n  private _selected: number[] = [];\n  private ROW_COL_EVENT_TYPE: string;\n  private lengthName: string;\n  private fireSelectionChange: () => void;\n  constructor(\n    grid: Grid,\n    name: string,\n    lengthName: string,\n    defaultSize: number\n  ) {\n    this.grid = grid;\n    this.name = name;\n    this.dirtyClean = makeDirtyClean(grid);\n    this.builderDirtyClean = makeDirtyClean(grid);\n    this.areBuildersDirty = this.builderDirtyClean.isDirty;\n    this.isDirty = this.dirtyClean.isDirty;\n    this.ROW_COL_EVENT_TYPE = 'grid-' + name + '-change';\n    this.defaultSize = defaultSize;\n    this.lengthName = lengthName;\n    this.fireSelectionChange = debounce(() => {\n      grid.eventLoop.fire('grid-' + name + '-selection-change');\n    }, 1);\n  }\n\n  add(_toAdd?: IRowColDescriptor | IRowColDescriptor[]) {\n    if (!_toAdd) {\n      return;\n    }\n    const toAdd = util.toArray(_toAdd);\n    toAdd.forEach((descriptor) => {\n      if (descriptor.header) {\n        this.descriptors.splice(this._numHeaders, 0, descriptor);\n        this._numFixed++;\n        this._numHeaders++;\n      } else {\n        // if the column is fixed and the last one added is fixed (we only allow fixed at the beginning for now)\n        if (descriptor.fixed) {\n          if (!this.descriptors.length || this.descriptors[this.descriptors.length - 1].fixed) {\n            this._numFixed++;\n          } else {\n            throw new Error('Cannot add a fixed column after an unfixed one');\n          }\n        }\n        this.descriptors.push(descriptor);\n      }\n    });\n    this.updateDescriptorIndices();\n    this.setDescriptorsDirty({\n      action: 'add',\n      descriptors: toAdd\n    });\n  }\n  addHeaders(_toAdd?: IRowColDescriptor | IRowColDescriptor[]) {\n    if (!_toAdd) {\n      return;\n    }\n    const toAdd = util.toArray(_toAdd);\n    toAdd.forEach((headerDescriptor) => {\n      headerDescriptor.header = true;\n    });\n    this.add(toAdd);\n  }\n  header(index: number) {\n    return this.descriptors[index];\n  }\n  get(index: number, dataSpace?: boolean) {\n    if (dataSpace) {\n      index += this._numHeaders;\n    }\n    return this.descriptors[index];\n  }\n  length(includeHeaders?: boolean) {\n    const subtract = includeHeaders ? 0 : this._numHeaders;\n    return this.descriptors.length - subtract;\n  }\n  remove(descriptor: IRowColDescriptor, dontUpdateIndex?: boolean) {\n    const index = this.descriptors.indexOf(descriptor);\n    if (index !== -1) {\n      this.descriptors.splice(index, 1);\n      if (descriptor.header) {\n        this._numFixed--;\n        this._numHeaders--;\n      } else if (descriptor.fixed) {\n        this._numFixed--;\n      }\n    }\n    if (!dontUpdateIndex) {\n      this.updateDescriptorIndices();\n      this.setDescriptorsDirty({\n        action: 'remove',\n        descriptors: [descriptor]\n      });\n    }\n  }\n  clear(includeHeaders?: boolean) {\n    let removed;\n    if (includeHeaders) {\n      removed = this.descriptors;\n      this.descriptors = [];\n      this._numFixed = 0;\n      this._numHeaders = 0;\n    } else {\n      removed = this.descriptors.slice(this._numHeaders);\n      this.descriptors = this.descriptors.slice(0, this._numHeaders);\n      this._numFixed = this._numHeaders;\n    }\n    this.updateDescriptorIndices();\n    if (removed && removed.length) {\n      this.setDescriptorsDirty({\n        action: 'remove',\n        descriptors: removed\n      });\n    }\n  }\n  move(_fromIndexes: number | number[], target: number, after?: boolean) {\n    const fromIndexes = util.toArray(_fromIndexes);\n\n    if (fromIndexes.length === 1) {\n      // the single move case is easier and doesn't require the after hint\n      const from = fromIndexes[0];\n      this.descriptors.splice(target, 0, this.descriptors.splice(from, 1)[0]);\n      this.setDescriptorsDirty({\n        action: 'move',\n        descriptors: [this.get(from), this.get(target)]\n      });\n    } else {\n      while (fromIndexes.indexOf(target) !== -1 && target !== -1) {\n        target--;\n        after = true;\n      }\n\n      const toValue = this.descriptors[target];\n      const removed = fromIndexes\n        .sort((a, b) => b - a)\n        .map((fromIndex) => {\n          const removedDescriptors = this.descriptors.splice(fromIndex, 1);\n          return removedDescriptors[0];\n\n        });\n      removed.reverse();\n      this.descriptors.splice(this.descriptors.indexOf(toValue) + (after ? 1 : 0), 0, ...removed);\n      this.updateDescriptorIndices();\n      this.setDescriptorsDirty({\n        action: 'move',\n        descriptors: removed.concat(toValue)\n      });\n    }\n  }\n  numHeaders() {\n    return this._numHeaders;\n  }\n  numFixed(excludeHeaders?: boolean) {\n    return this._numFixed - (excludeHeaders ? this._numHeaders : 0);\n  }\n  toVirtual(dataIndex: number) {\n    return dataIndex + this.numHeaders();\n  }\n  toData(virtualIndex: number) {\n    return virtualIndex - this.numHeaders();\n  }\n\n  select(_indexes: number | number[], dontFire?: boolean) {\n    const indexes = util.toArray(_indexes);\n    const changes = indexes\n      .filter((idx) => {\n        const hasDescriptor = !!this.get(idx, true);\n        if (!hasDescriptor) {\n          console.warn('Tried to select index that had no descriptor', idx);\n        }\n        return hasDescriptor;\n      })\n      .map((idx) => {\n        const descriptor = this.get(idx, true);\n        if (!descriptor.selected && descriptor.selectable !== false) {\n          this.addDragReadyClass(descriptor, idx);\n          descriptor.selected = true;\n          this._selected.push(idx);\n          return idx;\n        }\n        return undefined;\n      })\n      .filter((c) => c != undefined) as number[];\n    if (changes.length && !dontFire) {\n      this.fireSelectionChange();\n    }\n  }\n  deselect(_indexes: number | number[], dontFire?: boolean) {\n    const indexes = util.toArray(_indexes);\n    const selectedMap = this._selected.reduce<{ [key: string]: number | false }>((map, selectedIndex) => {\n      map[selectedIndex] = selectedIndex;\n      return map;\n    }, {});\n    const changes = indexes\n      .filter((idx) => {\n        const hasDescriptor = !!this.get(idx, true);\n        if (!hasDescriptor) {\n          console.warn('Tried to deselect index that had no descriptor', idx);\n        }\n        return hasDescriptor;\n      })\n      .map((idx) => {\n        const descriptor = this.get(idx, true);\n        this.removeDragReadyClass(descriptor);\n        if (descriptor.selected) {\n          descriptor.selected = false;\n          selectedMap[idx] = false;\n          return idx;\n        }\n        return undefined;\n      })\n      .filter((c) => c != undefined) as number[];\n\n    this._selected =\n      Object.keys(selectedMap)\n        .reduce<number[]>((array, selectedKey) => {\n          const idx = selectedMap[selectedKey];\n          if (idx !== false) {\n            array.push(idx);\n          }\n          return array;\n        }, []);\n\n    if (changes.length && !dontFire) {\n      this.fireSelectionChange();\n    }\n  }\n  toggleSelect(index: number) {\n    const descriptor = this.get(index, true);\n    if (descriptor.selected) {\n      this.deselect(index);\n    } else {\n      this.select(index);\n    }\n  }\n  clearSelected() {\n    // have to make a copy or we are iterating the same array we're removing from yikes.\n    return this.deselect(this.getSelected().slice(0));\n  }\n  getSelected() {\n    return this._selected;\n  }\n  allSelected() {\n    return this.getSelected().length === this.length();\n  }\n  create(builder?: IRowColBuilder) {\n    let fixed: boolean | undefined = false;\n    let expanded = false;\n    let expandedClass: any; // TODO: cell class descriptor type\n    const setExpanded = (exp: boolean) => {\n      if (!descriptor.children || descriptor.index == undefined) {\n        return;\n      }\n      expanded = exp;\n      // we never look for changes to the children, if you need to change it, remove and add the row again\n      if (expanded) {\n        this.descriptors.splice(descriptor.index + 1, 0, ...descriptor.children);\n        this.updateDescriptorIndices();\n        this.setDescriptorsDirty({\n          action: 'add',\n          descriptors: descriptor.children\n        });\n        const top = this.name === 'row' ? descriptor.index : 0;\n        const left = this.name === 'col' ? descriptor.index : 0;\n        const height = this.name === 'row' ? 1 : Infinity;\n        const width = this.name === 'col' ? 1 : Infinity;\n        expandedClass = this.grid.cellClasses.create(top, left, 'grid-expanded', height, width, 'virtual');\n        this.grid.cellClasses.add(expandedClass);\n\n      } else {\n        this.descriptors.splice(descriptor.index + 1, descriptor.children.length);\n        this.updateDescriptorIndices();\n        this.setDescriptorsDirty({\n          action: 'remove',\n          descriptors: [...descriptor.children]\n        });\n        if (expandedClass) {\n          this.grid.cellClasses.remove(expandedClass);\n        }\n      }\n    };\n    const descriptor: IRowColDescriptor = {\n      isBuiltActionable: true,\n      get fixed() {\n        return descriptor.header || !!fixed;\n      },\n      set fixed(_fixed: boolean | undefined) {\n        fixed = _fixed;\n      },\n      get expanded() {\n        return expanded;\n      },\n      set expanded(exp: boolean) {\n        setExpanded(exp);\n      }\n    };\n\n    addDirtyProps(descriptor, ['builder'], [this.builderDirtyClean]);\n    addDirtyProps(descriptor, [{\n      name: 'data', onDirty: () => {\n        this.grid.dataModel.setDirty();\n      }\n    }], []);\n    descriptor.builder = builder;\n\n    return addDirtyProps(descriptor, [{\n      name: this.lengthName,\n      onDirty: () => {\n        this.setDescriptorsDirty({\n          action: 'size',\n          descriptors: [descriptor]\n        });\n      }\n    }, {\n      name: 'hidden',\n      onDirty: () => {\n        this.setDescriptorsDirty({\n          action: 'hide',\n          descriptors: [descriptor]\n        });\n      }\n    }], [this.dirtyClean]);\n  }\n  createBuilder(render: BuilderRenderer, update: BuilderUpdater = passThrough, includeHeaders: boolean = false) {\n    return {\n      render,\n      update,\n      includeHeaders\n    };\n  }\n\n  sizeOf(index: number) {\n    const descriptor = this.get(index);\n    if (!descriptor) {\n      return NaN;\n    }\n\n    if (descriptor.hidden) {\n      return 0;\n    }\n\n    const size: number | undefined = (descriptor as any)[this.lengthName];\n    return size || this.defaultSize;\n  }\n\n  private setDescriptorsDirty(eventBody: IRowColEventBody) {\n    // tslint:disable-next-line:prefer-object-spread\n    const event: IRowColEvent = Object.assign(eventBody, {\n      type: this.ROW_COL_EVENT_TYPE\n    });\n    this.grid.eventLoop.fire(event);\n    this.dirtyClean.setDirty();\n    this.builderDirtyClean.setDirty();\n  }\n\n  private updateDescriptorIndices() {\n    const oldSelected = this._selected;\n    this._selected = [];\n    this.descriptors.forEach((descriptor, i) => {\n      descriptor.index = i;\n      if (descriptor.selected) {\n        this._selected.push(i);\n      }\n    });\n    if (this._selected.length !== oldSelected.length) {\n      this.fireSelectionChange();\n      return;\n    }\n    this._selected.sort();\n    oldSelected.sort();\n    const change = oldSelected.some((idx, i) => {\n      return idx !== this._selected[i];\n    });\n    if (change) {\n      this.fireSelectionChange();\n    }\n  }\n\n  private addDragReadyClass(descriptor: IRowColDescriptor, index: number) {\n    if (!descriptor || !(index >= 0)) {\n      return;\n    }\n    const top = this.name === 'row' ? index : -1;\n    const left = this.name === 'row' ? -1 : index;\n    const dragReadyClass = this.grid.cellClasses.create(top, left, 'grid-col-drag-ready');\n    this.grid.cellClasses.add(dragReadyClass);\n    descriptor.dragReadyClass = dragReadyClass;\n  }\n\n  private removeDragReadyClass(descriptor: IRowColDescriptor) {\n    if (!descriptor || !descriptor.dragReadyClass) {\n      return;\n    }\n    this.grid.cellClasses.remove(descriptor.dragReadyClass);\n    descriptor.dragReadyClass = undefined;\n  }\n\n  private compactAndSort() {\n    this.rangeStates = this.rangeStates\n      .slice()\n      .sort((a, b) => a.start - b.start)\n      .reduce((newRangeStates, rs) => {\n        const last = newRangeStates.pop();\n\n        if (!last) {\n          return [...newRangeStates, rs];\n        }\n\n        if (last.end < rs.start) {\n          return [...newRangeStates, last, rs];\n        }\n\n        if (last.end > rs.end) {\n          return [...newRangeStates, last];\n        }\n\n        // overlapping ranges\n        return [\n          ...newRangeStates,\n          {\n            start: last.start,\n            end: rs.end,\n          }\n        ];\n      }, []);\n  }\n}\n\nexport function create(\n  grid: Grid,\n  name: string,\n  lengthName: string,\n  defaultSize: number\n): IAbstractRowColModel {\n  return new AbstractRowColModel(grid, name, lengthName, defaultSize);\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/abstract-row-col-model/index.ts","import { Grid } from '../core';\nimport makeDirtyClean from '../dirty-clean';\n\nexport interface IGridDataResult<T> {\n  value: T;\n  formatted: string;\n}\n\nexport interface IGridDataChangeBody<T> {\n  value: T;\n  formatted?: string;\n}\n\nexport interface IGridDataChange<T> extends IGridDataChangeBody<T> {\n  row: number;\n  col: number;\n  paste?: boolean;\n}\n\nexport interface IDataModel {\n  isDirty(): boolean;\n  setDirty(): void;\n  get(dataRow: number, dataCol: number, isCopy?: boolean): IGridDataResult<any>;\n  getHeader(virtualRow: number, virtualCol: number): IGridDataResult<any>;\n  set(dataRow: number, dataCol: number, value: any): void;\n  set(changes: Array<IGridDataChange<any>>): void;\n  toggleSort?(c: number): void;\n}\n\nexport type RowLoader = (dataRow: number[]) => void;\n\n// untested basic data model impl\nconst nullResult = { value: null, formatted: '' };\nconst loadingResult = { value: null, formatted: 'Loading...' };\n\nexport function create(grid: Grid, loadRows?: RowLoader): IDataModel {\n  const dirtyClean = makeDirtyClean(grid);\n\n  const getData = (vR: number, vC: number) => {\n    const cachedRow = getCachedRow(vR);\n    if (cachedRow) {\n      return {\n        formatted: '',\n        ...cachedRow[vC]\n      };\n    }\n    if (loadRows) {\n      return grid.cols.converters.virtual.toData(vC) === 0 ?\n        loadingResult :\n        nullResult;\n    }\n    return nullResult;\n  };\n\n  const getCachedRow = (vR: number) => {\n    const rowDescriptor = grid.rowModel.get(vR);\n    return rowDescriptor && rowDescriptor.data;\n  };\n\n  async function maybeLoadRows() {\n    if (!loadRows) {\n      return;\n    }\n    const extras: number[] = [];\n    const visibles = [];\n    const numVisibleRows = grid.viewPort.rows;\n\n    const currentTopRow = grid.cellScrollModel.row;\n    const currentBottomRow = currentTopRow + numVisibleRows;\n    for (let row = Math.max(0, currentTopRow - numVisibleRows);\n      row < Math.min(currentBottomRow + 1 + numVisibleRows, grid.rows.converters.data.count());\n      row++) {\n      if (getCachedRow(grid.rows.converters.data.toVirtual(row))) {\n        // already have it cached\n        continue;\n      }\n      if (row >= currentBottomRow) {\n        extras.push(row);\n      } else {\n        visibles.push(row);\n      }\n    }\n\n    if (!extras.length && !visibles.length) {\n      // everything has previously been fetched\n      return;\n    }\n\n    // fetch if any visibles, or if extras > numVisibleRows / 2\n    if (!visibles.length && extras.length < (numVisibleRows / 2)) {\n      return;\n    }\n    const toFetchSet = new Set<number>(visibles);\n    extras.forEach((r) => toFetchSet.add(r));\n    const toFetch = Array.from(toFetchSet);\n    if (!toFetch.length) {\n      return;\n    }\n    loadRows(toFetch);\n  }\n\n  grid.eventLoop.bind('grid-cell-scroll', () => {\n    maybeLoadRows();\n  });\n\n  grid.eventLoop.bind('grid-viewport-change', () => {\n    maybeLoadRows();\n  });\n\n  return {\n    isDirty: dirtyClean.isDirty,\n    setDirty: dirtyClean.setDirty,\n    get(dataRow: number, dataCol: number) {\n      return getData(grid.rows.converters.data.toVirtual(dataRow), grid.cols.converters.data.toVirtual(dataCol));\n    },\n    getHeader(virtualRow: number, virtualCol: number) {\n      return getData(virtualRow, virtualCol);\n    },\n    set(rowOrData: number | Array<IGridDataChange<any>>, c?: number, datum?: string | string[]) {\n      let data: Array<IGridDataChange<any>>;\n      if (!Array.isArray(rowOrData)) {\n        if (typeof datum === 'string') {\n          datum = datum.replace('[rR]', '').replace('[cC]', '').split(' ');\n        }\n        data = [{\n          row: rowOrData,\n          col: c as number,\n          value: datum\n\n        }];\n      } else {\n        data = rowOrData;\n      }\n      data.forEach((change) => {\n        const rowDescriptor = grid.rowModel.get(change.row);\n        let rowData = rowDescriptor.data;\n        if (!rowData) {\n          rowData = rowDescriptor.data = [];\n        }\n        rowData[grid.cols.converters.data.toVirtual(change.col)] = { value: change.value, formatted: change.formatted || change.value };\n      });\n    }\n  };\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/data-model/index.ts","import { IRawPositionRange } from '../position-range';\n\n// takes a point and a length as the ranges in array form\nexport function intersect(range1: number[], range2: number[]) {\n    const range2Start = range2[0];\n    const range1Start = range1[0];\n    const range1End = range1Start + range1[1] - 1;\n    const range2End = range2Start + range2[1] - 1;\n    if (range2Start > range1End || range2End < range1Start) {\n        return null;\n    }\n    const resultStart = (range1Start > range2Start ? range1Start : range2Start);\n    const resultEnd = (range1End < range2End ? range1End : range2End);\n    return [\n        resultStart,\n        resultEnd - resultStart + 1\n    ];\n}\n// takes a point and a length as the ranges in array form\nexport function union(range1: number[] | null, range2: number[] | null) {\n    if (!range1) {\n        return range2;\n    }\n    if (!range2) {\n        return range1;\n    }\n    const range2Start = range2[0];\n    const range2End = range2Start + range2[1] - 1;\n    const range1Start = range1[0];\n    const range1End = range1Start + range1[1] - 1;\n    const resultStart = (range1Start < range2Start ? range1Start : range2Start);\n    return [\n        resultStart, (range1End > range2End ? range1End : range2End) - resultStart + 1\n    ];\n}\n\n// takes two row, col points and creates a normal position range\nexport function createFromPoints(r1: number, c1: number, r2: number, c2: number) {\n    const range: IRawPositionRange = {} as any;\n    if (r1 < r2) {\n        range.top = r1;\n        range.height = r2 - r1 + 1;\n    } else {\n        range.top = r2;\n        range.height = r1 - r2 + 1;\n    }\n\n    if (c1 < c2) {\n        range.left = c1;\n        range.width = c2 - c1 + 1;\n    } else {\n        range.left = c2;\n        range.width = c1 - c2 + 1;\n    }\n    return range;\n}\nexport function iterate(this: { getArgs: typeof getArgs }) {\n    const args = this.getArgs(arguments);\n    const range = args.range;\n    const cellFn = args.cellFn;\n    const rowFn = args.rowFn;\n    for (let r = range.top; r < range.top + range.height; r++) {\n        let rowResult;\n        if (rowFn) {\n            rowResult = rowFn(r);\n        }\n        for (let c = range.left; c < range.left + range.width; c++) {\n            if (cellFn) {\n                cellFn(r, c, rowResult);\n            }\n        }\n    }\n}\n\nexport type CellFn<T> = (r: number, c: number, result?: T) => (boolean | void);\nexport type RowFn<T> = (r: number) => T;\nexport function getArgs<T>(args: IArguments) {\n    const range: IRawPositionRange = args[0];\n    let cellFn: CellFn<T> = args[1];\n    let rowFn: RowFn<T> | undefined;\n    if (args.length === 3) {\n        cellFn = args[2];\n        rowFn = args[1];\n    }\n    return {\n        range,\n        cellFn,\n        rowFn\n    };\n}\nexport function equal(r1: IRawPositionRange, r2: IRawPositionRange) {\n    return r1.top === r2.top &&\n        r1.left === r2.left &&\n        r1.width === r2.width &&\n        r1.height === r2.height;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/range-util/index.ts","import { Grid } from '../core';\nimport makeDirtyClean, { IDirtyClean } from '../dirty-clean';\nimport addDirtyProps from '../dirty-props';\nimport mixinPositionRange, { IPartialPositionRange, PositionSpace, toStandardSpace } from '../position-range';\n\nexport interface ICellClassDescriptor extends IPartialPositionRange {\n    _cellClassDirtyClean: IDirtyClean;\n    class?: string;\n}\n\nexport interface ICellClasses {\n    add(descriptor: ICellClassDescriptor): void;\n    remove(descriptor: ICellClassDescriptor): void;\n    getAll(): ICellClassDescriptor[];\n    getCachedClasses(vRow: number, vCol: number): string[];\n    create(\n        top?: number,\n        left?: number,\n        className?: string,\n        height?: number,\n        width?: number,\n        space?: PositionSpace\n    ): ICellClassDescriptor;\n    isDirty(): boolean;\n}\n\nexport function create(grid: Grid) {\n    const dirtyClean = makeDirtyClean(grid);\n    const descriptors: ICellClassDescriptor[] = [];\n    let cachedClassMatrix: string[][][] = [];\n\n    const api: ICellClasses = {\n        add(descriptor: ICellClassDescriptor) {\n            descriptors.push(descriptor);\n            addOrRemoveCachedClass(descriptor);\n            if (descriptor._cellClassDirtyClean) {\n                descriptor._cellClassDirtyClean.enable();\n            }\n            dirtyClean.setDirty();\n        },\n        remove(descriptor: ICellClassDescriptor) {\n            const index = descriptors.indexOf(descriptor);\n            if (index !== -1) {\n                descriptors.splice(index, 1);\n                addOrRemoveCachedClass(descriptor, true);\n                if (descriptor._cellClassDirtyClean) {\n                    descriptor._cellClassDirtyClean.disable();\n                }\n                dirtyClean.setDirty();\n            }\n        },\n        getAll(): ICellClassDescriptor[] {\n            return descriptors.slice(0);\n        },\n        getCachedClasses(vRow: number, vCol: number): string[] {\n            return cachedClassMatrix[vRow] && cachedClassMatrix[vRow][vCol] || [];\n        },\n        create(\n            top?: number,\n            left?: number,\n            className?: string,\n            height?: number,\n            width?: number,\n            space?: PositionSpace\n        ): ICellClassDescriptor {\n            const thisDirtyClean = makeDirtyClean(grid);\n            const descriptor: ICellClassDescriptor = mixinPositionRange({\n                _cellClassDirtyClean: thisDirtyClean\n            }, thisDirtyClean, dirtyClean, {\n                    preDirty: classPreDirty,\n                    onDirty: classOnDirty\n                });\n            // mixins\n\n            function classPreDirty() {\n                // check for descriptor definition because this will actually get called during position range mixin before it's defined\n                if (descriptor) {\n                    addOrRemoveCachedClass(descriptor, true);\n                }\n            }\n\n            function classOnDirty() {\n                // check for descriptor definition because this will actually get called during position range mixin before it's defined\n                if (descriptor) {\n                    addOrRemoveCachedClass(descriptor);\n                }\n            }\n\n            addDirtyProps(descriptor, [{\n                name: 'class',\n                preDirty: classPreDirty,\n                onDirty: classOnDirty\n            }], [thisDirtyClean, dirtyClean]);\n\n            // all of these are optional\n            descriptor.space = space || descriptor.space;\n            descriptor.top = top;\n            descriptor.left = left;\n            // default to single cell ranges\n            descriptor.height = height || 1;\n            descriptor.width = width || 1;\n            descriptor.class = className;\n            return descriptor;\n        },\n        isDirty: dirtyClean.isDirty\n    };\n\n    function regnerateCache() {\n        cachedClassMatrix = [];\n        api.getAll().forEach((descriptor) => {\n            addOrRemoveCachedClass(descriptor);\n        });\n    }\n\n    grid.eventLoop.bind('grid-row-change', regnerateCache);\n    grid.eventLoop.bind('grid-col-change', regnerateCache);\n\n    function addOrRemoveCachedClass(descriptor: ICellClassDescriptor, isRemove?: boolean) {\n        const { top, left, height, width, space } = descriptor;\n        const className = descriptor.class;\n        if (top === undefined || height === undefined || left === undefined || width === undefined || className === undefined) {\n            return;\n        }\n        for (let r = top; r < Math.min(top + height, grid.rowModel.length(true)); r++) {\n            for (let c = left; c < Math.min(left + width, grid.colModel.length(true)); c++) {\n                const spaceKey: keyof Grid = toStandardSpace(space);\n                const vRow = grid[spaceKey].row.toVirtual(r);\n                const vCol = grid[spaceKey].col.toVirtual(c);\n                let cols = cachedClassMatrix[vRow];\n                if (!cols) {\n                    cols = cachedClassMatrix[vRow] = [];\n                }\n                const cellClasses = cols[vCol];\n                if (!cellClasses) {\n                    if (!isRemove) {\n                        cols[vCol] = [className];\n                    }\n                    continue;\n                }\n\n                if (!isRemove) {\n                    if (cellClasses.indexOf(className) === -1) {\n                        cellClasses.push(className);\n                    }\n                } else {\n                    const index = cellClasses.indexOf(className);\n                    if (index !== -1) {\n                        cellClasses.splice(index, 1);\n                    }\n                }\n            }\n        }\n    }\n\n    return api;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-classes/index.ts","import { Grid } from '../core';\nimport { AnnotatedKeyEventUnion, EventUnion, isAnnotatedKeyEvent } from '../event-loop';\n\nexport interface ICellKeyboardModel {\n    // add methods if needed\n    _annotateEvent(e: EventUnion): void;\n}\n\nexport function create(grid: Grid) {\n\n    const _annotateEventFromDataCoords = (e: AnnotatedKeyEventUnion, dataRow: number, dataCol: number) => {\n        e.realRow = grid.data.row.toView(dataRow);\n        e.realCol = grid.data.col.toView(dataCol);\n        e.virtualRow = grid.data.row.toVirtual(dataRow);\n        e.virtualCol = grid.data.col.toVirtual(dataCol);\n        e.row = dataRow;\n        e.col = dataCol;\n        return e;\n    };\n\n    const _annotateEventInternal = (e: AnnotatedKeyEventUnion) => {\n        const dataRow = grid.navigationModel.focus.row;\n        const dataCol = grid.navigationModel.focus.col;\n        _annotateEventFromDataCoords(e, dataRow, dataCol);\n    };\n\n    const annotateEvent = (e: EventUnion) => {\n        if (isAnnotatedKeyEvent(e)) {\n            _annotateEventInternal(e);\n        }\n    };\n    grid.eventLoop.addInterceptor(annotateEvent);\n\n    const model: ICellKeyboardModel = {\n        _annotateEvent: annotateEvent\n    };\n    return model;\n}\n\nexport default create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-keyboard-model/index.ts","import { Grid } from '../core';\nimport customEvent from '../custom-event';\nimport {\n    AnnotatedMouseEventUnion,\n    EventUnion,\n    GridCustomMouseEventTypes,\n    IAnnotatedEvent,\n    IAnnotatedMouseEvent,\n    IGridCustomMouseEvent,\n    IGridDragStartEvent,\n    ILoopEvent,\n    isAnnotatedMouseEvent,\n    isAnnotatedMouseEventOfType\n} from '../event-loop';\n\nconst PROPS_TO_COPY_FROM_MOUSE_EVENTS: Array<keyof AnnotatedMouseEventUnion> =\n    ['clientX', 'clientY', 'gridX', 'gridY', 'layerX', 'layerY', 'row', 'col', 'realRow', 'realCol', 'virtualRow', 'virtualCol'];\n\nexport interface IEventDimensionInfoGetter {\n    view(e: IAnnotatedEvent): number;\n    virtual(e: IAnnotatedEvent): number;\n    data(e: IAnnotatedEvent): number;\n    gridPx(e: IAnnotatedMouseEvent): number;\n    layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent): number;\n}\n\nexport interface ICellMouseModel {\n    rowInfo: IEventDimensionInfoGetter;\n    colInfo: IEventDimensionInfoGetter;\n    _annotateEvent(e: EventUnion): void;\n    _annotateEventInternal(e: AnnotatedMouseEventUnion): void;\n    _annotateEventFromViewCoords(e: AnnotatedMouseEventUnion, viewRow: number, viewCol: number): EventUnion;\n}\n\nexport function create(grid: Grid) {\n    let scrollInterval: number | undefined;\n    let lastMoveRow: number | undefined;\n    let lastMoveCol: number | undefined;\n    const model: ICellMouseModel = {\n        rowInfo: {\n            view(e: IAnnotatedEvent) {\n                return e.realRow;\n            },\n            virtual(e: IAnnotatedEvent) {\n                return e.virtualRow;\n            },\n            data(e: IAnnotatedEvent) {\n                return e.row;\n            },\n            gridPx(e: IAnnotatedMouseEvent) {\n                return e.gridY;\n            },\n            layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n                return e.layerY;\n            }\n        },\n        colInfo: {\n            view(e: IAnnotatedEvent) {\n                return e.realCol;\n            },\n            virtual(e: IAnnotatedEvent) {\n                return e.virtualCol;\n            },\n            data(e: IAnnotatedEvent) {\n                return e.col;\n            },\n            gridPx(e: IAnnotatedMouseEvent) {\n                return e.gridX;\n            },\n            layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n                return e.layerX;\n            }\n        },\n        _annotateEvent(e: EventUnion) {\n            if (isAnnotatedMouseEvent(e)) {\n                model._annotateEventInternal(e);\n            }\n        },\n        _annotateEventFromViewCoords(e: AnnotatedMouseEventUnion, viewRow: number, viewCol: number) {\n            e.realRow = viewRow;\n            e.realCol = viewCol;\n            e.virtualRow = grid.view.row.toVirtual(e.realRow);\n            e.virtualCol = grid.view.col.toVirtual(e.realCol);\n            e.row = grid.virtual.row.toData(e.virtualRow);\n            e.col = grid.virtual.col.toData(e.virtualCol);\n            return e;\n        },\n        _annotateEventInternal(e: AnnotatedMouseEventUnion) {\n            const y = grid.viewPort.toGridY(e.clientY);\n            const x = grid.viewPort.toGridX(e.clientX);\n            const viewRow = grid.rows.viewPort.toViewFromPx(y);\n            const viewCol = grid.cols.viewPort.toViewFromPx(x);\n            model._annotateEventFromViewCoords(e, viewRow, viewCol);\n            e.gridX = x;\n            e.gridY = y;\n        },\n    };\n\n    grid.eventLoop.addInterceptor((e: EventUnion) => {\n        model._annotateEvent(e);\n        if (isAnnotatedMouseEventOfType(e, 'mousedown')) {\n            if (e.currentTarget === grid.container) {\n                setupDragEventForMouseDown(e);\n            }\n        } else if (isAnnotatedMouseEventOfType(e, 'mousemove')) {\n            if (e.row !== lastMoveRow || e.col !== lastMoveCol) {\n                createAndFireCustomMouseEvent('grid-cell-mouse-move', e);\n                lastMoveRow = e.row;\n                lastMoveCol = e.col;\n            }\n        }\n    });\n\n    function calculateColScrollDiff(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n        let colDiff = 0;\n        if (e.clientX > (grid.container && grid.container.getBoundingClientRect().right || window.innerWidth)) {\n            colDiff = 1;\n        } else if (grid.viewPort.toGridX(e.clientX) < grid.virtualPixelCellModel.fixedWidth()) {\n            colDiff = -1;\n        }\n        return colDiff;\n    }\n\n    function calculateRowScrollDiff(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n        let rowDiff = 0;\n        if (e.clientY > (grid.container && grid.container.getBoundingClientRect().bottom || window.innerHeight)) {\n            rowDiff = 1;\n        } else if (grid.viewPort.toGridY(e.clientY) < grid.virtualPixelCellModel.fixedHeight()) {\n            rowDiff = -1;\n        }\n        return rowDiff;\n    }\n\n    function setupDragEventForMouseDown(downEvent: AnnotatedMouseEventUnion) {\n        let lastDragRow = downEvent.row;\n        let lastDragCol = downEvent.col;\n        let dragStarted = false;\n        let unbindAutoScrollDrag: (() => void) | undefined;\n        const lastX = downEvent.clientX;\n        const lastY = downEvent.clientY;\n        const unbindMove = grid.eventLoop.bind(window, 'mousemove', (mousemoveEvent) => {\n\n            if (dragStarted && !mousemoveEvent.which) {\n                // got a move event without mouse down which means we somehow missed the mouseup\n                console.log('mousemove unbind, how on earth do these happen?');\n                handleMouseUp(mousemoveEvent);\n                return;\n            }\n\n            if (!dragStarted) {\n                if (lastX === mousemoveEvent.clientX && lastY === mousemoveEvent.clientY) {\n                    console.warn(\n                        'Got a mouse move event with ',\n                        mousemoveEvent.clientX,\n                        ',',\n                        mousemoveEvent.clientY,\n                        ' when the last position was ',\n                        lastX,\n                        ',',\n                        lastY\n                    );\n                }\n                createAndFireCustomMouseEvent('grid-drag-start', downEvent, (dragStart: IGridDragStartEvent) => {\n                    let onlyFixedRows = !calculateRowScrollDiff(mousemoveEvent);\n                    let onlyFixedCols = !calculateColScrollDiff(mousemoveEvent);\n                    dragStart.enableAutoScroll = () => {\n                        if (unbindAutoScrollDrag) {\n                            unbindAutoScrollDrag();\n                        }\n                        unbindAutoScrollDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent) => {\n                            // if it gets here then we will try to auto scroll\n                            const newRowDiff = calculateRowScrollDiff(gridDragEvent);\n                            onlyFixedRows = !newRowDiff;\n                            const rowDiff = onlyFixedRows ? 0 : newRowDiff;\n\n                            const newColDiff = calculateColScrollDiff;\n                            onlyFixedCols = !newColDiff;\n                            const colDiff = onlyFixedCols ? 0 : newColDiff(gridDragEvent);\n\n                            if (scrollInterval != undefined) {\n                                clearInterval(scrollInterval);\n                            }\n                            if (rowDiff || colDiff) {\n                                scrollInterval = grid.interval(() => {\n                                    grid.cellScrollModel.scrollTo(grid.cellScrollModel.row + rowDiff, grid.cellScrollModel.col + colDiff);\n                                }, 100);\n                            }\n\n                        });\n                    };\n                });\n                dragStarted = true;\n            }\n\n            createAndFireCustomMouseEvent('grid-drag', mousemoveEvent);\n\n            if (mousemoveEvent.row !== lastDragRow || mousemoveEvent.col !== lastDragCol) {\n                createAndFireCustomMouseEvent('grid-cell-drag', mousemoveEvent);\n\n                lastDragRow = mousemoveEvent.row;\n                lastDragCol = mousemoveEvent.col;\n            }\n\n        });\n\n        const unbindUp = grid.eventLoop.bind(window, 'mouseup', handleMouseUp);\n\n        function handleMouseUp(e: AnnotatedMouseEventUnion) {\n            if (scrollInterval != undefined) {\n                clearInterval(scrollInterval);\n            }\n            unbindMove();\n            unbindUp();\n            if (unbindAutoScrollDrag) {\n                unbindAutoScrollDrag();\n            }\n\n            const dragEnd = createCustomEventFromMouseEvent('grid-drag-end', e);\n\n            // row, col, x, and y should inherit\n            grid.eventLoop.fire(dragEnd);\n        }\n    }\n\n    function createCustomEventFromMouseEvent(type: GridCustomMouseEventTypes, e: AnnotatedMouseEventUnion) {\n        const event = customEvent(type, true, true) as IGridCustomMouseEvent;\n        PROPS_TO_COPY_FROM_MOUSE_EVENTS.forEach((prop: keyof AnnotatedMouseEventUnion) => {\n            (event as any)[prop] = e[prop];\n        });\n        event.originalEvent = e;\n        return event;\n    }\n\n    function createAndFireCustomMouseEvent(\n        type: GridCustomMouseEventTypes,\n        e: AnnotatedMouseEventUnion,\n        annotateEvent?: (e: ILoopEvent) => void\n    ) {\n        let drag = createCustomEventFromMouseEvent(type, e);\n        if (annotateEvent) {\n            drag = annotateEvent(drag) || drag;\n        }\n        if (e.target) {\n            e.target.dispatchEvent(drag);\n        } else {\n            grid.eventLoop.fire(drag);\n        }\n        return drag;\n    }\n\n    return model;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-mouse-model/index.ts","export default function (name: string, bubbles: boolean, cancelable: boolean = false, detail?: any) {\n    const event = document.createEvent('CustomEvent');  // MUST be 'CustomEvent'\n    event.initCustomEvent(name, bubbles, cancelable, detail);\n    return event;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/custom-event/index.ts","import { Grid, IGridDimension } from '../core';\nimport makeDirtyClean from '../dirty-clean';\nimport * as util from '../util';\n\nexport interface ICellScrollDimension {\n    position: number;\n    scrollTo(position: number, dontFire?: boolean): boolean;\n    getPixelScroll(): number;\n    getScrollIntoViewCell(dataCell: number): number;\n}\n\nexport interface ICellScrollModel {\n    col: number;\n    row: number;\n    rowInfo: ICellScrollDimension;\n    colInfo: ICellScrollDimension;\n    isDirty(): void;\n    scrollTo(r: number, c: number, dontFire?: boolean, dontNotifyPixelModel?: boolean): void;\n    scrollIntoView(dataRow: number, dataCol: number): void;\n}\n\nexport function create(grid: Grid) {\n    const dirtyClean = makeDirtyClean(grid);\n\n    function makeDimension(gridDimension: IGridDimension) {\n        function convertVirtualToScroll(virtualCoord: number) {\n            return virtualCoord - gridDimension.rowColModel.numFixed();\n        }\n\n        function getScrollToRowOrCol(virtualCoord: number) {\n            const currentScroll = cellScrollDimension.position;\n            let scrollTo = currentScroll;\n            if (gridDimension.viewPort.isInView(virtualCoord)) {\n                return scrollTo;\n            }\n\n            const targetScroll = convertVirtualToScroll(virtualCoord);\n            if (targetScroll < currentScroll) {\n                scrollTo = targetScroll;\n            } else if (targetScroll > currentScroll) {\n                let lengthToCell = gridDimension.virtualPixelCell.sizeOf(0, virtualCoord);\n                const numFixed = gridDimension.rowColModel.numFixed();\n                scrollTo = 0;\n                for (let i = numFixed; i < virtualCoord && lengthToCell > gridDimension.viewPort.size; i++) {\n                    lengthToCell -= gridDimension.virtualPixelCell.sizeOf(i);\n                    scrollTo = i - (numFixed - 1);\n                }\n            }\n\n            return scrollTo;\n        }\n        const cellScrollDimension: ICellScrollDimension = {\n            position: 0,\n            scrollTo(position: number, dontFire?: boolean): boolean {\n                const maxPosition = (gridDimension.rowColModel.length() || 1) - 1;\n                const lastPosition = cellScrollDimension.position;\n                cellScrollDimension.position = util.clamp(position, 0, maxPosition);\n                if (lastPosition !== cellScrollDimension.position) {\n                    dirtyClean.setDirty();\n\n                    if (!dontFire) {\n                        notifyListeners();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            getPixelScroll() {\n                return gridDimension.virtualPixelCell.sizeOf(\n                    gridDimension.rowColModel.numFixed(),\n                    cellScrollDimension.position + gridDimension.rowColModel.numFixed() - 1\n                );\n            },\n            getScrollIntoViewCell(dataCell: number) {\n                const virtualCell = gridDimension.converters.virtual.clamp(gridDimension.converters.data.toVirtual(dataCell));\n                return getScrollToRowOrCol(virtualCell);\n            }\n        };\n        return cellScrollDimension;\n    }\n\n    const model: ICellScrollModel = {\n        get col() {\n            return model.colInfo.position;\n        },\n        get row() {\n            return model.rowInfo.position;\n        },\n        isDirty: dirtyClean.isDirty,\n        rowInfo: makeDimension(grid.rows),\n        colInfo: makeDimension(grid.cols),\n        scrollTo(r: number, c: number, dontFire?: boolean, dontNotifyPixelModel?: boolean) {\n            if (isNaN(r) || isNaN(c)) {\n                return;\n            }\n\n            const rowScrollChange = model.rowInfo.scrollTo(r, true);\n            const colScrollChange = model.colInfo.scrollTo(c, true);\n            if (rowScrollChange || colScrollChange) {\n                if (!dontFire) {\n                    notifyListeners(dontNotifyPixelModel);\n                }\n            }\n        },\n        scrollIntoView(dataRow: number, dataCol: number) {\n            const newRow = model.rowInfo.getScrollIntoViewCell(dataRow);\n            const newCol = model.colInfo.getScrollIntoViewCell(dataCol);\n            model.scrollTo(newRow, newCol);\n        }\n    };\n\n    function notifyListeners(dontNotifyPixelModel?: boolean) {\n        grid.eventLoop.fire('grid-cell-scroll');\n\n        if (!dontNotifyPixelModel) {\n            grid.pixelScrollModel.scrollTo(model.rowInfo.getPixelScroll(), model.colInfo.getPixelScroll(), true);\n        }\n    }\n\n    grid.eventLoop.bind('grid-row-change', (e) => {\n        switch (e.action) {\n            case 'remove':\n                model.scrollTo(0, model.col);\n                break;\n        }\n    });\n\n    return model;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-scroll-model/index.ts","\nimport { AbstractRowColModel, IColDescriptor } from '../abstract-row-col-model';\nimport { Grid } from '../core';\n\nexport class ColModel extends AbstractRowColModel {\n    width = (idx: number) => {\n        return this.sizeOf(idx);\n    }\n    col = (idx: number): IColDescriptor => {\n        return this.get(idx, true);\n    }\n}\n\nexport function create(grid: Grid) {\n    return new ColModel(grid, 'col', 'width', 100);\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-model/index.ts","import { Grid } from '../core';\nimport ctrlOrCmd from '../ctrl-or-cmd';\nimport { IDecorator } from '../decorators';\nimport { AnnotatedMouseEventUnion, IAnnotatedEvent, IGridDragStartEvent, isAnnotatedMouseEventOfType } from '../event-loop';\nimport * as util from '../util';\n\nconst elementClass = require('element-class');\n\nexport interface ITargetCol extends IDecorator {\n    _renderedElem?: HTMLElement;\n    moveAfter?: boolean;\n}\n\nexport interface IDragRect extends IDecorator {\n    colOffset: number;\n}\n\nexport interface IColReorder {\n    _targetCol?: ITargetCol;\n    _dragRects: IDragRect[];\n    _onMousedown(e: AnnotatedMouseEventUnion): void;\n    _onDragStart(e: IGridDragStartEvent): void;\n    _unbindKeyDown?(): void;\n    _unbindDrag?(): void;\n    _unbindDragEnd?(): void;\n}\n\nexport function create(grid: Grid) {\n    let wasSelectedAtMousedown: boolean | undefined;\n    const model: IColReorder = {\n        _dragRects: [],\n        _onMousedown(e: AnnotatedMouseEventUnion) {\n            if (!isTargetingColHeader(e)) {\n                return;\n            }\n\n            const colDescriptor = grid.data.col.get(e.col);\n            wasSelectedAtMousedown = colDescriptor && !!colDescriptor.selected;\n            if (wasSelectedAtMousedown && !ctrlOrCmd(e)) {\n                grid.eventLoop.stopBubbling(e);\n            }\n        },\n        _onDragStart(e: IGridDragStartEvent) {\n\n            if (!isTargetingColHeader(e) || e.realCol < grid.colModel.numFixed() || !wasSelectedAtMousedown) {\n                return;\n            }\n\n            const colDescriptor = grid.view.col.get(e.realCol);\n            if (!colDescriptor || colDescriptor.selectable === false) {\n                return;\n            }\n            if (e.enableAutoScroll) {\n                e.enableAutoScroll();\n            }\n            // we want to be the only draggers\n            grid.eventLoop.stopBubbling(e);\n\n            const startCol = e.virtualCol;\n\n            // create the target line\n            model._targetCol = grid.decorators.create(0, undefined, Infinity, 1, 'cell', 'real');\n            model._targetCol.postRender = (div) => {\n                div.setAttribute('class', 'grid-reorder-target');\n                if (!model._targetCol) {\n                    console.error('somehow targetCol was set back to undefined before post render');\n                    return;\n                }\n                model._targetCol._renderedElem = div;\n            };\n            grid.decorators.add(model._targetCol);\n\n            // create a decorator for each selected col\n            const selected = grid.colModel.getSelected();\n            model._dragRects = selected.map((dataCol) => {\n                const viewCol = grid.data.col.toView(dataCol);\n                const dragRect = grid.decorators.create(0, undefined, Infinity, undefined, 'px', 'real') as IDragRect;\n                dragRect.fixed = true;\n                dragRect.colOffset = e.gridX - grid.viewPort.getColLeft(viewCol);\n                dragRect.postRender = (div) => {\n                    div.setAttribute('class', 'grid-drag-rect');\n                };\n                dragRect.width = grid.viewPort.getColWidth(viewCol);\n                return dragRect;\n            });\n\n            grid.decorators.add(model._dragRects);\n\n            model._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n\n            model._unbindDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent) => {\n                model._dragRects.forEach((dragRect) => {\n                    dragRect.left = util.clamp(\n                        gridDragEvent.gridX - dragRect.colOffset,\n                        grid.viewPort.getColLeft(grid.colModel.numFixed()),\n                        Infinity\n                    );\n                });\n                if (!model._targetCol) {\n                    console.error('somehow targetCol was set back to undefined before drag');\n                    return;\n                }\n                model._targetCol.left = util.clamp(gridDragEvent.realCol, grid.colModel.numFixed(), Infinity);\n                model._targetCol.moveAfter = gridDragEvent.realCol > startCol;\n                if (model._targetCol.moveAfter) {\n                    elementClass(model._targetCol._renderedElem).add('right');\n                } else {\n                    elementClass(model._targetCol._renderedElem).remove('right');\n                }\n            });\n\n            model._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', () => {\n                if (!model._targetCol) {\n                    console.error('somehow targetCol was set to undefined before drag end');\n                    return;\n                }\n                const targetDataCol = model._targetCol.left;\n\n                if (targetDataCol !== undefined) {\n                    grid.colModel.move(selected.map((dataCol) => {\n                        return grid.data.col.toVirtual(dataCol);\n                    }), grid.viewPort.toVirtualCol(targetDataCol), model._targetCol.moveAfter);\n                }\n                removeDecoratorsAndUnbind();\n            });\n\n            function removeDecoratorsAndUnbind() {\n                if (model._targetCol) {\n                    const removedDecs = [...model._dragRects, model._targetCol];\n                    grid.decorators.remove(removedDecs);\n                }\n                if (model._unbindDrag) {\n                    model._unbindDrag();\n                }\n                if (model._unbindDragEnd) {\n                    model._unbindDragEnd();\n                }\n                if (model._unbindKeyDown) {\n                    model._unbindKeyDown();\n                }\n                return true; // for the escape stack\n            }\n        }\n    };\n\n    function isTargetingColHeader(e: IAnnotatedEvent) {\n        return e && e.row < 0;\n    }\n\n    grid.eventLoop.bind('grid-drag-start', model._onDragStart);\n    grid.eventLoop.addInterceptor((e) => {\n        if (isAnnotatedMouseEventOfType(e, 'mousedown')) {\n            model._onMousedown(e);\n        }\n    });\n\n    return model;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-reorder/index.ts","export default function (e: { ctrlKey: boolean, metaKey: boolean }) {\n    return (window.navigator.userAgent.match(/win/i) ? e.ctrlKey : e.metaKey);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/ctrl-or-cmd/index.ts","module.exports = function(opts) {\n  return new ElementClass(opts)\n}\n\nfunction ElementClass(opts) {\n  if (!(this instanceof ElementClass)) return new ElementClass(opts)\n  var self = this\n  if (!opts) opts = {}\n\n  // similar doing instanceof HTMLElement but works in IE8\n  if (opts.nodeType) opts = {el: opts}\n\n  this.opts = opts\n  this.el = opts.el || document.body\n  if (typeof this.el !== 'object') this.el = document.querySelector(this.el)\n}\n\nElementClass.prototype.add = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return el.className = className\n  var classes = el.className.split(' ')\n  if (classes.indexOf(className) > -1) return classes\n  classes.push(className)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.remove = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return\n  var classes = el.className.split(' ')\n  var idx = classes.indexOf(className)\n  if (idx > -1) classes.splice(idx, 1)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.has = function(className) {\n  var el = this.el\n  if (!el) return\n  var classes = el.className.split(' ')\n  return classes.indexOf(className) > -1\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/element-class/index.js\n// module id = 20\n// module chunks = 0","import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\nimport { AnnotatedMouseEventUnion, IGridDragStartEvent } from '../event-loop';\nimport addHeaderDecorators, { IHeaderDecorator } from '../header-decorators';\n\nexport interface IResizeHeader extends IHeaderDecorator {\n    _dragLine: IDecorator;\n    _onMousedown(e: AnnotatedMouseEventUnion): void;\n    _onDragStart(e: IGridDragStartEvent): void;\n    _unbindDrag?(): void;\n    _unbindKeyDown?(): void;\n    _unbindDragEnd?(): void;\n}\n\nexport interface IColResize {\n    annotateDecorator(d: IResizeHeader): void;\n}\n\nexport function create(grid: Grid) {\n\n    const api: IColResize = {\n        annotateDecorator\n    };\n\n    function annotateDecorator(headerDecorator: IResizeHeader) {\n        const col = headerDecorator.left;\n        headerDecorator._dragLine = grid.decorators.create(0, undefined, Infinity, 1, 'px', 'real');\n        headerDecorator._dragLine.fixed = true;\n\n        headerDecorator._dragLine.postRender = (div) => {\n            div.setAttribute('class', 'grid-drag-line');\n        };\n\n        headerDecorator._onMousedown = (e) => {\n            // prevent mousedowns from getting to selection if they hit the dragline\n            grid.eventLoop.stopBubbling(e);\n        };\n\n        headerDecorator._onDragStart = (e) => {\n\n            grid.eventLoop.stopBubbling(e);\n\n            grid.decorators.add(headerDecorator._dragLine);\n\n            headerDecorator._unbindDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent) => {\n                const minX = headerDecorator.getDecoratorLeft() + 22;\n                headerDecorator._dragLine.left = Math.max(gridDragEvent.gridX, minX);\n            });\n\n            headerDecorator._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n\n            headerDecorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', () => {\n                const dragLeft = headerDecorator._dragLine.left;\n                if (dragLeft !== undefined && col !== undefined) {\n                    const newWidth = dragLeft - headerDecorator.getDecoratorLeft();\n                    grid.view.col.get(col).width = newWidth;\n                    grid.colModel.getSelected().forEach((dataIdx) => {\n                        grid.data.col.get(dataIdx).width = newWidth;\n                    });\n                }\n                removeDecoratorsAndUnbind();\n            });\n\n            function removeDecoratorsAndUnbind() {\n                grid.decorators.remove(headerDecorator._dragLine);\n                if (headerDecorator._unbindDrag) {\n                    headerDecorator._unbindDrag();\n                }\n                if (headerDecorator._unbindDragEnd) {\n                    headerDecorator._unbindDragEnd();\n                }\n                if (headerDecorator._unbindKeyDown) {\n                    headerDecorator._unbindKeyDown();\n                }\n                return true; // for the escape stack\n            }\n        };\n\n        headerDecorator.postRender = (div) => {\n            div.style.transform = 'translateX(50%)';\n            div.style.webkitTransform = 'translateX(50%)';\n\n            div.style.removeProperty('left');\n            div.setAttribute('class', 'col-resize');\n            div.setAttribute('dts', 'grid_header_resize');\n\n            grid.eventLoop.bind(div, 'grid-drag-start', headerDecorator._onDragStart);\n            grid.eventLoop.bind(div, 'mousedown', headerDecorator._onMousedown);\n        };\n    }\n\n    addHeaderDecorators(grid, api);\n\n    return api;\n}\n\nexport default create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-resize/index.ts","import { Grid } from '../core';\nimport { IGridDataChange, IGridDataResult } from '../data-model';\nimport debounce from '../debounce';\nimport { RawPositionRange } from '../position-range';\nimport * as tsv from '../tsv';\n\nconst innerText = require('inner-text-shim');\n\nexport interface ICopyPaste {\n    _maybeSelectText(): void;\n}\n\nexport function create(grid: Grid): ICopyPaste {\n    function getCopyPasteRange(): RawPositionRange {\n        let selectionRange = grid.navigationModel.selection;\n        // valid selection range cannot go to -1\n        if (selectionRange.top === -1) {\n            selectionRange = {\n                top: grid.navigationModel.focus.row,\n                left: grid.navigationModel.focus.col,\n                width: 1,\n                height: 1\n            };\n        }\n        return selectionRange;\n    }\n\n    grid.eventLoop.bind('copy', (e) => {\n        if (!grid.focused) {\n            if (e.target === grid.textarea) {\n                e.preventDefault();\n            }\n            return;\n        }\n        // prepare for copy\n        const copyTable = document.createElement('table');\n        const tableBody = document.createElement('tbody');\n        copyTable.appendChild(tableBody);\n        const tsvData: string[][] = [];\n        const selectionRange = getCopyPasteRange();\n        let gotNull = false;\n        grid.data.iterate(selectionRange, () => {\n            const row = document.createElement('tr');\n            tableBody.appendChild(row);\n            const array: string[] = [];\n            tsvData.push(array);\n            return {\n                row,\n                array\n            };\n        }, (r: number, c: number, rowResult: { row: HTMLTableRowElement, array: string[] }) => {\n            const data = grid.dataModel.get(r, c, true);\n\n            // intentional == checks null or undefined\n            if (data == null) {\n                return gotNull = true; // this breaks the col loop\n            }\n            const td = document.createElement('td');\n            if (data.value) {\n                td.setAttribute('grid-data', JSON.stringify(data.value));\n            }\n            td.textContent = data.formatted || ' ';\n            td.innerHTML = td.innerHTML.replace(/\\n/g, '<br>') || ' ';\n            rowResult.row.appendChild(td);\n            rowResult.array.push(data.formatted);\n            return undefined;\n        });\n        if (!gotNull) {\n            e.clipboardData.setData('text/plain', tsv.stringify(tsvData));\n            e.clipboardData.setData('text/html', copyTable.outerHTML);\n            e.preventDefault();\n            setTimeout(() => {\n                grid.eventLoop.fire('grid-copy');\n            }, 1);\n        }\n    });\n\n    function makePasteDataChange(r: number, c: number, data: IGridDataResult<any> | string): IGridDataChange<any> {\n        let value;\n        let formatted;\n        if (typeof data === 'string') {\n            formatted = data;\n        } else {\n            value = data.value;\n            formatted = data.formatted;\n        }\n        return {\n            row: r,\n            col: c,\n            value,\n            formatted,\n            paste: true\n        };\n    }\n\n    grid.eventLoop.bind('paste', (e) => {\n        if (!grid.focused) {\n            return;\n        }\n        const selectionRange = getCopyPasteRange();\n        if (!e.clipboardData || !e.clipboardData.getData) {\n            console.warn('no clipboard data on paste event');\n            return;\n        }\n        const tsvPasteData = tsv.parse(e.clipboardData.getData('text/plain'));\n        let pasteHtml = e.clipboardData.getData('text/html');\n        e.preventDefault();\n\n        setTimeout(() => {\n            const tempDiv = document.createElement('div');\n            if (pasteHtml.match(/<meta name=ProgId content=Excel.Sheet>/)) {\n                pasteHtml = pasteHtml.replace(/[\\n\\r]+  /g, ' ').replace(/[\\n\\r]+/g, '');\n            }\n            tempDiv.innerHTML = pasteHtml;\n            const table = tempDiv.querySelector('table');\n            let pasteData: Array<Array<string | IGridDataResult<any>>> = tsvPasteData;\n            if (table) {\n                let tablePasteData: Array<Array<IGridDataResult<any>>>;\n                table.style.whiteSpace = 'pre';\n                tablePasteData = [];\n                const trs = tempDiv.querySelectorAll('tr');\n                [].forEach.call(trs, (tr: typeof trs[0]) => {\n                    const row: Array<IGridDataResult<any>> = [];\n                    tablePasteData.push(row);\n                    const tds = tr.querySelectorAll('td');\n                    [].forEach.call(tds, (td: typeof tds[0]) => {\n                        const text = innerText(td);\n                        const dataResult: IGridDataResult<any> = {\n                            formatted: text && text.trim(),\n                            value: undefined\n                        };\n                        const gridData = td.getAttribute('grid-data');\n                        if (gridData) {\n                            try {\n                                dataResult.value = JSON.parse(gridData);\n                            } catch (error) {\n                                console.warn('somehow couldn\\'t parse grid data');\n                            }\n                        }\n                        row.push(dataResult);\n                    });\n                });\n                pasteData = tablePasteData;\n            }\n            const dataChanges: Array<IGridDataChange<any>> = [];\n            let singlePasteValue: string | IGridDataResult<any> | undefined;\n            if (pasteData.length === 1 && pasteData[0].length === 1) {\n                singlePasteValue = pasteData[0][0];\n            }\n\n            if (singlePasteValue) {\n                const singlePasteString = singlePasteValue;\n                // this will do nothing if no other selections as it will be an empty array\n                let ranges = [selectionRange];\n                ranges = ranges.concat(grid.navigationModel.otherSelections);\n                ranges.forEach((range) => {\n                    grid.data.iterate(range, (r, c) => {\n                        dataChanges.push(makePasteDataChange(r, c, singlePasteString));\n                    });\n                });\n            } else {\n                const top = selectionRange.top;\n                const left = selectionRange.left;\n\n                pasteData.forEach((row, r) => {\n                    const dataRow = r + top;\n                    if (dataRow > grid.data.row.count() - 1) {\n                        return;\n                    }\n                    row.forEach((pasteValue, c) => {\n                        const dataCol = c + left;\n                        // intention == to match null and undefined\n                        if (pasteValue == undefined || dataCol > grid.data.col.count() - 1) {\n                            return;\n                        }\n                        dataChanges.push(makePasteDataChange(dataRow, dataCol, pasteValue));\n                    });\n                });\n                const newSelection = {\n                    top,\n                    left,\n                    height: pasteData.length,\n                    width: pasteData[0].length\n                };\n\n                grid.navigationModel.clearSelection();\n                grid.navigationModel.setSelection(newSelection);\n            }\n\n            grid.dataModel.set(dataChanges);\n        }, 1);\n    });\n\n    const maybeSelectText = debounce(function maybeSelectTextInner() {\n        if (!(grid.editModel && grid.editModel.editing) && grid.focused) {\n            grid.textarea.value = grid.dataModel.get(grid.navigationModel.focus.row, grid.navigationModel.focus.col).formatted || '.';\n            grid.textarea.select();\n        }\n    }, 1);\n\n    grid.eventLoop.bind('keyup', (_e) => {\n        maybeSelectText();\n    });\n    grid.eventLoop.bind('grid-focus', (_e) => {\n        maybeSelectText();\n    });\n    grid.eventLoop.bind('mousedown', (e) => {\n        if (e.target !== grid.textarea) {\n            return;\n        }\n        maybeSelectText();\n    });\n    return {\n        _maybeSelectText: maybeSelectText\n    };\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/copy-paste/index.ts","import { Grid } from '../core';\nimport makeDirtyClean, { IDirtyClean } from '../dirty-clean';\nimport mixinPositionRange, { IPartialPositionRange, PositionSpace, PositionUnit } from '../position-range';\nimport * as util from '../util';\n\nexport interface IDecorator extends IPartialPositionRange {\n    _decoratorDirtyClean?: IDirtyClean;\n    fixed?: boolean;\n    boundingBox?: HTMLElement;\n    render(): HTMLElement;\n    postRender?(elem: HTMLElement): void;\n}\n\nexport interface IDecoratorModel {\n    add(decorators: IDecorator | IDecorator[]): void;\n    remove(decorators: IDecorator | IDecorator[]): void;\n    getAlive(): IDecorator[];\n    popAllDead(): IDecorator[];\n    isDirty(): boolean;\n    create(t?: number, l?: number, h?: number, w?: number, u?: PositionUnit, s?: PositionSpace): IDecorator;\n}\n\nexport function create(grid: Grid) {\n\n    const dirtyClean = makeDirtyClean(grid);\n\n    const aliveDecorators: IDecorator[] = [];\n    let deadDecorators: IDecorator[] = [];\n\n    const decoratorsInstance: IDecoratorModel = {\n        add(_decorators: IDecorator | IDecorator[]) {\n            const decorators = util.toArray(_decorators);\n            decorators.forEach((decorator) => {\n                aliveDecorators.push(decorator);\n                if (decorator._decoratorDirtyClean) {\n                    decorator._decoratorDirtyClean.enable();\n                }\n            });\n            dirtyClean.setDirty();\n        },\n        remove(_decorators: IDecorator | IDecorator[]) {\n            const decorators = util.toArray(_decorators);\n            decorators.forEach((decorator) => {\n                const index = aliveDecorators.indexOf(decorator);\n                if (index !== -1) {\n                    aliveDecorators.splice(index, 1);\n                    deadDecorators.push(decorator);\n                    if (decorator._decoratorDirtyClean) {\n                        decorator._decoratorDirtyClean.disable();\n                    }\n                    dirtyClean.setDirty();\n                }\n            });\n        },\n        getAlive() {\n            return aliveDecorators.slice(0);\n        },\n        popAllDead() {\n            const oldDead = deadDecorators;\n            deadDecorators = [];\n            return oldDead;\n        },\n        isDirty: dirtyClean.isDirty,\n        create(t?: number, l?: number, h?: number, w?: number, u?: PositionUnit, s?: PositionSpace) {\n            const thisDirtyClean = makeDirtyClean(grid);\n\n            // mixin the position range functionality\n            const decoratorBase = {\n                _decoratorDirtyClean: thisDirtyClean,\n                // they can override but we should have an empty default to prevent npes\n                render() {\n                    const div = document.createElement('div');\n                    div.style.position = 'absolute';\n                    div.style.top = '0px';\n                    div.style.left = '0px';\n                    div.style.bottom = '0px';\n                    div.style.right = '0px';\n                    if (decorator.postRender) {\n                        decorator.postRender(div);\n                    }\n                    return div;\n                }\n            };\n            const decorator: IDecorator = mixinPositionRange(\n                decoratorBase,\n                thisDirtyClean,\n                dirtyClean\n            );\n            decorator.top = t;\n            decorator.left = l;\n            decorator.height = h;\n            decorator.width = w;\n            decorator.units = u || decorator.units;\n            decorator.space = s || decorator.space;\n\n            return decorator;\n\n        }\n\n    };\n\n    return decoratorsInstance;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/decorators/index.ts","import { Grid } from '../core';\nimport { IGridDataChange, IGridDataChangeBody } from '../data-model';\nimport { IDecorator } from '../decorators';\nimport { AnnotatedMouseOrKeyEventUnion, EventUnion, isAnnotatedMouseOrKeyEvent } from '../event-loop';\nimport { RawPositionRange } from '../position-range';\n\nconst key = require('key');\nconst clickOff = require('click-off');\n\nexport interface IEditDecorator extends IDecorator {\n    typedText?(): string;\n}\n\nexport interface IDefaultEditDecorator extends IEditDecorator {\n    renderedElem?: HTMLTextAreaElement;\n}\n\nexport type ClosePromise = Promise<void>;\nexport type SavePromise = Promise<IGridDataChangeBody<any> | undefined>;\n\nexport interface IEditor {\n    closePromise?: ClosePromise;\n    decorator?: false | IEditDecorator;\n    save?(): SavePromise;\n    isInMe?(e: MouseEvent): boolean;\n\n    // added by the grid\n    removeEscapeStackHandler?(): void;\n    removeClickOffHandler?(): void;\n}\n\nexport interface IEditOptions {\n    headers: boolean;\n    editTriggers: EditTrigger[];\n    saveTriggers: SaveTrigger[];\n    cancelTriggers: CancelTrigger[];\n    action?(): ClosePromise | undefined;\n    getEditor(r: number, originalEvent: AnnotatedMouseOrKeyEventUnion): IEditor;\n}\n\nexport enum Trigger {\n    Click = 'click',\n    Space = 'space',\n    Enter = 'enter',\n    Dblclick = 'dblclick',\n    Typing = 'typing',\n    Tab = 'tab',\n    Clickoff = 'clickoff',\n    Escape = 'escape',\n}\n\nexport type EditTrigger = Trigger.Click | Trigger.Dblclick | Trigger.Space | Trigger.Enter | Trigger.Typing;\nexport type SaveTrigger = Trigger.Tab | Trigger.Enter | Trigger.Escape | Trigger.Clickoff;\nexport type CancelTrigger = Trigger.Escape | Trigger.Clickoff;\n\nexport type EditEventUnion = 'moop';\n\nexport interface IEditModel {\n    editing: boolean;\n    savePromise?: SavePromise;\n    currentEditor?: IEditor;\n    _defaultDecorator: IDefaultEditDecorator;\n    _hydrateOpts(opts?: Partial<IEditOptions>): IEditOptions;\n    _interceptor(e: EventUnion): void;\n    _closeEditor(): void;\n    deleteSelection(): void;\n    editCell(r: number, c: number, isTyping: boolean, originalEvent: AnnotatedMouseOrKeyEventUnion): void;\n    cancelEdit(): void;\n    saveEdit(): SavePromise;\n}\n\nexport function create(grid: Grid) {\n    const editModel: IEditModel = {\n        editing: false,\n        _defaultDecorator: grid.decorators.create(-1, -1, 1, 1),\n        _hydrateOpts(optsCreator: Partial<IEditOptions> = {}) {\n            const isActionMode = !!(optsCreator && optsCreator.action);\n            const opts: IEditOptions = {\n                getEditor() {\n                    return {};\n                },\n                headers: !!optsCreator.headers,\n                editTriggers: isActionMode ?\n                    [Trigger.Click, Trigger.Space, Trigger.Enter] :\n                    [Trigger.Dblclick, Trigger.Enter, Trigger.Typing],\n                saveTriggers: isActionMode ?\n                    [] :\n                    [Trigger.Tab, Trigger.Enter, Trigger.Clickoff],\n                cancelTriggers: isActionMode ?\n                    [] :\n                    [Trigger.Escape],\n                ...optsCreator,\n            };\n            if (isActionMode) {\n                // tslint:disable-next-line:only-arrow-functions\n                opts.getEditor = function () {\n                    return {\n                        decorator: false,\n                        save: undefined,\n                        closePromise: opts.action && opts.action.apply(opts, arguments)\n                    };\n                };\n            } else if (!opts.getEditor) {\n                opts.getEditor = () => {\n                    return {};\n                };\n            }\n\n            return opts;\n        },\n        _interceptor(e: EventUnion) {\n            if (!isAnnotatedMouseOrKeyEvent(e)) {\n                return;\n            }\n            const col = e.col;\n            const row = e.row;\n            const opts = getOptsForCol(col);\n            if (!opts) {\n                return;\n            }\n            if (!editModel.editing) {\n                // check editTriggers if not editing\n                switch (e.type) {\n                    case 'click':\n                        if (optsHasEditTrigger(opts, Trigger.Click) && grid.eventIsOnCells(e)) {\n                            editModel.editCell(row, col, false, e);\n                        }\n                        break;\n                    case 'dblclick':\n                        if (optsHasEditTrigger(opts, Trigger.Dblclick) && grid.eventIsOnCells(e)) {\n                            editModel.editCell(row, col, false, e);\n                        }\n                        break;\n                    case 'keydown':\n                        if (optsHasEditTrigger(opts, Trigger.Space) && key.is(key.code.special.space, e.which)) {\n                            editModel.editCell(row, col, false, e);\n                        }\n\n                        if (optsHasEditTrigger(opts, Trigger.Enter) && key.is(key.code.special.enter, e.which)) {\n                            editModel.editCell(row, col, false, e);\n                        }\n\n                        // delete trigger can also happen only when not editing\n                        // also have to hardcode 46 until key library merges change\n                        if (key.is(key.code.special.backspace, e.which) || e.which === 46) {\n                            editModel.deleteSelection();\n                        }\n                        break;\n                    case 'keypress':\n                        if (optsHasEditTrigger(opts, Trigger.Typing) &&\n                            e.which >= 32 && e.which <= 122 && !e.metaKey && !e.ctrlKey && !e.altKey) {\n                            editModel.editCell(row, col, true, e);\n                        }\n                        break;\n                }\n            } else {\n                // check save triggers if editing\n                switch (e.type) {\n                    case 'keydown':\n                        if (optsHasSaveTrigger(opts, Trigger.Tab) && key.is(key.code.special.tab, e.which)) {\n                            editModel.saveEdit().then(() => {\n                                grid.navigationModel.handleTabEvent(e);\n                            });\n                            e.preventDefault();\n                        }\n\n                        if (optsHasSaveTrigger(opts, Trigger.Enter) && key.is(key.code.special.enter, e.which) && !e.shiftKey) {\n                            editModel.saveEdit().then(() => {\n                                grid.navigationModel.setFocus(\n                                    grid.data.down(grid.navigationModel.focus.row),\n                                    grid.navigationModel.focus.col\n                                );\n                            });\n                        }\n                        break;\n                }\n            }\n        },\n        deleteSelection() {\n            const ranges: RawPositionRange[] = grid.navigationModel.getAllSelectedRanges();\n            const dataChanges: Array<IGridDataChange<any>> = [];\n            ranges.forEach((range) => {\n                grid.data.iterate(range, (r, c) => {\n                    dataChanges.push({\n                        row: r,\n                        col: c,\n                        value: undefined\n                    });\n                });\n            });\n            grid.dataModel.set(dataChanges);\n        },\n        editCell(r: number, c: number, isTyping: boolean, originalEvent: AnnotatedMouseOrKeyEventUnion) {\n            if (editModel.editing) {\n                editModel.saveEdit();\n            }\n            editModel.savePromise = undefined;\n\n            if (isNaN(r) || isNaN(c)) {\n                return;\n            }\n            const opts = getOptsForCol(c);\n            if (!opts) {\n                return;\n            }\n            if ((r < 0 || c < 0) && !opts.headers) {\n                return;\n            }\n\n            const editor = opts.getEditor(r, originalEvent);\n            // if they have no editor or not closePromise,\n            // it's just a simple action and there's no need to wait on them in edit mode\n            if (!editor || (!editor.closePromise && editor.decorator === false)) {\n                return;\n            }\n            setEditing(true);\n            if (editor.decorator === undefined) {\n                editor.decorator = editModel._defaultDecorator;\n                if (editor.save === undefined) {\n                    editor.save = () => {\n                        const text = editModel._defaultDecorator.renderedElem && editModel._defaultDecorator.renderedElem.value;\n                        return Promise.resolve({\n                            value: text,\n                            formatted: text\n                        });\n                    };\n                }\n            }\n            editModel.currentEditor = editor;\n            if (editor.decorator) {\n                editor.decorator.typedText = () => {\n                    return isTyping ? grid.textarea.value && grid.textarea.value.trim() : '';\n                };\n                editor.decorator.top = r;\n                editor.decorator.left = c;\n                grid.decorators.add(editor.decorator);\n                editor.removeEscapeStackHandler = grid.escapeStack.add(() => {\n                    if (optsHasCancelTrigger(opts, Trigger.Escape)) {\n                        editModel.cancelEdit();\n                    } else if (optsHasSaveTrigger(opts, Trigger.Escape)) {\n                        editModel.saveEdit();\n                    }\n                });\n\n                editor.removeClickOffHandler = clickOff.listen(function getClickOffElement() {\n                    return editor.decorator && editor.decorator.boundingBox;\n                }, (e: MouseEvent) => {\n                    if (editor.isInMe && editor.isInMe(e)) {\n                        return;\n                    }\n                    if (optsHasCancelTrigger(opts, Trigger.Clickoff)) {\n                        editModel.cancelEdit();\n                    } else if (optsHasSaveTrigger(opts, Trigger.Clickoff)) {\n                        editModel.saveEdit();\n                    }\n                }, {});\n            }\n\n            if (editor.closePromise) {\n                editor.closePromise.then(function resolved() {\n                    return editModel.saveEdit();\n                }, function rejected() {\n                    return editModel.cancelEdit();\n                });\n            }\n        },\n        _closeEditor() {\n            if (!editModel.editing) {\n                return;\n            }\n            setEditing(false);\n            const currentEditor = editModel.currentEditor;\n            if (currentEditor) {\n                if (currentEditor.removeEscapeStackHandler) {\n                    currentEditor.removeEscapeStackHandler();\n                }\n                if (currentEditor.removeClickOffHandler) {\n                    currentEditor.removeClickOffHandler();\n                }\n                if (currentEditor.decorator) {\n                    grid.decorators.remove(currentEditor.decorator);\n                }\n            }\n\n            grid.viewLayer.draw();\n            grid.eventLoop.bindOnce('grid-draw', () => {\n                if (grid.container) {\n                    grid.container.focus();\n                }\n            });\n        },\n        cancelEdit() {\n            editModel._closeEditor();\n        },\n        saveEdit() {\n            if (!editModel.savePromise) {\n                const currentEditor = editModel.currentEditor;\n                const savePromise = currentEditor && currentEditor.save && currentEditor.save();\n\n                const maybeSetPromise = savePromise && savePromise.then((dataResult: IGridDataChange<any> | undefined) => {\n                    if (dataResult) {\n                        if (editModel.currentEditor && editModel.currentEditor.decorator) {\n                            const { top, left } = editModel.currentEditor.decorator;\n                            if (top !== undefined && left !== undefined) {\n                                dataResult.row = top;\n                                dataResult.col = left;\n                                grid.dataModel.set([dataResult]);\n                            }\n                        }\n                    }\n                    return dataResult;\n                }) || Promise.resolve();\n\n                editModel.savePromise = (maybeSetPromise as Promise<any>).then((result: any) => {\n                    editModel._closeEditor();\n                    return result;\n                });\n            }\n            return editModel.savePromise;\n        },\n    };\n\n    editModel._defaultDecorator.render = () => {\n        const element = document.createElement('textarea');\n        element.style.pointerEvents = 'all';\n        element.style.zIndex = '1';\n        element.style.position = 'relative';\n        grid.eventLoop.bindOnce('grid-draw', () => {\n            const top = editModel._defaultDecorator.top;\n            const left = editModel._defaultDecorator.left;\n            element.value = editModel._defaultDecorator.typedText && editModel._defaultDecorator.typedText() ||\n                (top != undefined && left != undefined && grid.dataModel.get(top, left).formatted) ||\n                '';\n            element.focus();\n        });\n        editModel._defaultDecorator.renderedElem = element;\n        return element;\n    };\n\n    function hasTrigger(trigger: Trigger, triggers: Trigger[]) {\n        return triggers.indexOf(trigger) !== -1;\n    }\n\n    function optsHasEditTrigger(opts: IEditOptions, trigger: EditTrigger) {\n        return hasTrigger(trigger, opts.editTriggers);\n    }\n\n    function optsHasCancelTrigger(opts: IEditOptions, trigger: CancelTrigger) {\n        return hasTrigger(trigger, opts.cancelTriggers);\n    }\n\n    function optsHasSaveTrigger(opts: IEditOptions, trigger: SaveTrigger) {\n        return hasTrigger(trigger, opts.saveTriggers);\n    }\n\n    function getOptsForCol(col: number) {\n        const colDescriptor = grid.data.col.get(col);\n        if (!colDescriptor) {\n            return;\n        }\n        return editModel._hydrateOpts(colDescriptor.editOptions);\n    }\n\n    function setEditing(editing: boolean) {\n        const prevEditing = editModel.editing;\n        editModel.editing = editing;\n        if (prevEditing !== editing) {\n            grid.eventLoop.fire('grid-edit');\n        }\n\n    }\n\n    grid.eventLoop.bind('grid-destroy', () => {\n        editModel.cancelEdit();\n    });\n\n    grid.eventLoop.addInterceptor(editModel._interceptor);\n\n    return editModel;\n}\n\nexport default create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/edit-model/index.ts","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var isRef, iterator, key,\n    _this = this,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    __hasProp = {}.hasOwnProperty;\n\n  isRef = require('./ref').isRef;\n\n  key = {};\n\n  key.code = {\n    special: require('./code/special'),\n    arrow: require('./code/arrow'),\n    punctuation: require('./code/punctuation'),\n    alnum: require('./code/alnum'),\n    brand: require('./code/brand')\n  };\n\n  key.get = function(pressed) {\n    return iterator(key.code, pressed);\n  };\n\n  key.is = function(ref, pressed) {\n    if (!isRef(ref)) {\n      ref = iterator(ref, pressed);\n    }\n    if (isRef(ref)) {\n      if (isRef(pressed)) {\n        return pressed === ref;\n      } else {\n        return pressed === ref.code || __indexOf.call(ref.code, pressed) >= 0;\n      }\n    } else {\n      return pressed === ref;\n    }\n  };\n\n  iterator = function(context, pressed) {\n    var i, out, ref;\n    for (i in context) {\n      if (!__hasProp.call(context, i)) continue;\n      ref = context[i];\n      if (isRef(ref)) {\n        if (key.is(ref, pressed)) {\n          return ref;\n        }\n      } else {\n        out = iterator(ref, pressed);\n        if (isRef(out)) {\n          return out;\n        }\n      }\n    }\n  };\n\n  if (typeof window !== 'undefined') {\n    window.key = key;\n  }\n\n  module.exports = key;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/key.js\n// module id = 25\n// module chunks = 0","import { Grid } from '../core';\n\nconst timeNow = require('time-now');\n\nexport interface IFps {\n    threshold: number;\n    windowSize: number;\n    slowCount: number;\n    intervalId: number;\n    percentBelowThreshold?: number;\n    allAverages: boolean;\n    logging: boolean;\n    markFrameTime(): void;\n    getMovingAverage(): number;\n    getAllTimeAverage(): number;\n    getLast(): number | undefined;\n    getFilteredAverage(): number | undefined;\n}\n\nexport function create(grid: Grid) {\n\n    const frames: number[] = [];\n    let totalTime = 0;\n    let totalFrames = 0;\n    let totalWindowTime = 0;\n    let lastLoopTime: number | undefined;\n    let filteredFrameTime = 0;\n    const filterStrength = 20;\n    let belowThresholdCount = 0;\n    let numCalcs = 0;\n    let filteredAverage: number | undefined;\n    let requestId: number | undefined;\n\n    function addFrameToWindow(frameLength: number) {\n        if (typeof frameLength !== 'number' || isNaN(frameLength)) {\n            console.warn('passed non number to fps.addFrame()');\n            return;\n        }\n        if (frames.length > fps.windowSize) {\n            const frame = frames.shift();\n            if (frame !== undefined) {\n                totalWindowTime -= frame;\n            }\n        }\n        totalWindowTime += frameLength;\n        totalTime += frameLength;\n        totalFrames++;\n        frames.push(frameLength);\n    }\n\n    grid.eventLoop.bind('grid-destroy', () => {\n        if (requestId) {\n            cancelAnimationFrame(requestId);\n            requestId = undefined;\n        }\n    });\n\n    const fps: IFps = {\n        threshold: 20,\n        windowSize: 60,\n        slowCount: 0,\n        logging: false,\n        allAverages: false,\n        markFrameTime() {\n            const nowTime = timeNow();\n            if (lastLoopTime) {\n                const frameLength = nowTime - lastLoopTime;\n                filteredFrameTime += (frameLength - filteredFrameTime) / filterStrength;\n                filteredAverage = 1000 / filteredFrameTime;\n                if (filteredAverage < fps.threshold) {\n                    belowThresholdCount++;\n                }\n                if (fps.allAverages) {\n                    addFrameToWindow(1000 / frameLength);\n                }\n                numCalcs++;\n            }\n            lastLoopTime = nowTime;\n        },\n        getMovingAverage() {\n            return totalWindowTime / frames.length;\n        },\n        getAllTimeAverage() {\n            return totalTime / totalFrames;\n        },\n        getLast() {\n            return frames[frames.length - 1];\n        },\n        getFilteredAverage() {\n            return filteredAverage;\n        },\n        intervalId: window.setInterval(() => {\n            fps.percentBelowThreshold = belowThresholdCount / numCalcs * 100;\n            if (fps.percentBelowThreshold > 50) {\n                fps.slowCount++;\n            }\n            if (fps.logging) {\n                console.log('percent below threshold', fps.percentBelowThreshold.toFixed(1), 'filtered average', fps.getFilteredAverage());\n            }\n            belowThresholdCount = 0;\n            numCalcs = 0;\n        }, 1000)\n    };\n\n    function fpsMeasure() {\n        if (grid.destroyed) {\n            return;\n        }\n        requestId = requestAnimationFrame(fpsMeasure);\n        fps.markFrameTime();\n    }\n    fpsMeasure();\n\n    return fps;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fps/index.ts","import { IRowColEvent } from '../abstract-row-col-model';\nimport { ICellClassDescriptor } from '../cell-classes';\nimport { Grid } from '../core';\nimport ctrlOrCmd from '../ctrl-or-cmd';\nimport { IDecorator } from '../decorators';\nimport { AnnotatedMouseEventUnion, AnnotatedMouseOrKeyEventUnion, IGridCustomMouseEvent, IGridDragStartEvent } from '../event-loop';\nimport { RawPositionRange } from '../position-range';\nimport * as rangeUtil from '../range-util';\nimport * as util from '../util';\n\nconst key = require('key');\nconst arrow = key.code.arrow;\n\nexport interface ISelectionDecorator extends IDecorator {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n  _onDragStart?(e: IGridDragStartEvent): void;\n}\n\nexport interface IFocus {\n  row: number;\n  col: number;\n}\n\nexport interface INavigationModel {\n  focus: IFocus;\n  selection: RawPositionRange;\n  otherSelections: ISelectionDecorator[];\n  checkboxModeFor: {\n    rows?: boolean;\n    cols?: boolean;\n  };\n  _selectionDecorator: ISelectionDecorator;\n  focusDecorator: IDecorator;\n  _rowSelectionClasses: ICellClassDescriptor[];\n  _colSelectionClasses: ICellClassDescriptor[];\n  getAllSelections(): Array<RawPositionRange | ISelectionDecorator>;\n  getAllSelectedRanges(): RawPositionRange[];\n  clearSelection(): void;\n  setSelection(r: RawPositionRange): void;\n  setFocus(row: number | undefined, col: number | undefined, dontClearSelection?: boolean, dontSetSelection?: boolean): void;\n  _navFrom(row: number, col: number, e: AnnotatedMouseOrKeyEventUnion): IFocus;\n  handleTabEvent(e: AnnotatedMouseOrKeyEventUnion): void;\n}\n\nexport function create(grid: Grid) {\n  const mainSelection = createAndAddSelectionDecorator(0, 0, -1, -1);\n  const model: INavigationModel = {\n    focus: {\n      row: 0,\n      col: 0\n    },\n    get selection() {\n      if (mainSelection.height === -1) { // cleared selection default to focus\n        return {\n          top: model.focus.row,\n          left: model.focus.col,\n          height: 1,\n          width: 1\n        };\n      }\n      return mainSelection;\n    },\n    otherSelections: [],\n    checkboxModeFor: {},\n    _selectionDecorator: mainSelection,\n    focusDecorator: grid.decorators.create(0, 0, 1, 1),\n    _rowSelectionClasses: [],\n    _colSelectionClasses: [],\n    getAllSelections() {\n      const selections = [];\n      if (model.selection) {\n        selections.push(model.selection);\n      }\n      return selections.concat(model.otherSelections);\n    },\n    setFocus(inputRow?: number, inputCol?: number, dontClearSelection?: boolean, dontSetSelection?: boolean) {\n      inputRow = inputRow && grid.data.row.clamp(inputRow);\n      const row = (typeof inputRow !== 'number' || isNaN(inputRow)) ? model.focus.row : inputRow;\n\n      inputCol = inputCol && grid.data.col.clamp(inputCol);\n      const col = (typeof inputCol !== 'number' || isNaN(inputCol)) ? model.focus.row : inputCol;\n\n      const changed = row !== model.focus.row || col !== model.focus.col;\n      model.focus.row = row;\n      model.focus.col = col;\n      focusClass.top = row;\n      focusClass.left = col;\n      model.focusDecorator.top = row;\n      model.focusDecorator.left = col;\n      grid.cellScrollModel.scrollIntoView(row, col);\n      if (!dontClearSelection) {\n        clearOtherSelections();\n      }\n      if (!dontSetSelection) {\n        setSelectionToFocus();\n      }\n      if (changed) {\n        grid.eventLoop.fire('grid-focus-change');\n      }\n    },\n    _navFrom: navFrom,\n    handleTabEvent(e: AnnotatedMouseOrKeyEventUnion) {\n      let newCol: number | undefined = model.focus.col;\n      let newRow: number | undefined = model.focus.row;\n      if (!e || !e.shiftKey) {\n        if (newCol === grid.data.col.count() - 1) {\n          newRow = grid.data.down(newRow);\n          newCol = 0;\n        } else {\n          newCol = grid.data.right(newCol);\n        }\n      } else {\n        if (newCol === 0) {\n          newRow = grid.data.up(newRow);\n          newCol = grid.data.col.count() - 1;\n        } else {\n          newCol = grid.data.left(newCol);\n        }\n      }\n      model.setFocus(newRow, newCol);\n      e.preventDefault();\n    },\n    setSelection(newSelection: RawPositionRange) {\n      let height = newSelection.height;\n      let width = newSelection.width;\n      if (selectionIsFocus(newSelection)) {\n        height = -1;\n        width = -1;\n      }\n      mainSelection.top = newSelection.top;\n      mainSelection.left = newSelection.left;\n      mainSelection.height = height;\n      mainSelection.width = width;\n      // select the columns to match\n      syncSelectionToHeaders();\n    },\n    getAllSelectedRanges() {\n      let selectionRange = grid.navigationModel.selection;\n      // valid selection range cannot go to -1\n      if (selectionRange.top === -1) {\n        selectionRange = {\n          top: grid.navigationModel.focus.row,\n          left: grid.navigationModel.focus.col,\n          width: 1,\n          height: 1\n        };\n      }\n      return [selectionRange].concat(model.otherSelections);\n    },\n\n    clearSelection() {\n      clearOtherSelections();\n      setSelectionToFocus();\n    },\n  };\n\n  const focusClass = grid.cellClasses.create(0, 0, 'focus');\n  grid.cellClasses.add(focusClass);\n\n  model.focusDecorator.postRender = (div) => {\n    div.setAttribute('class', 'grid-focus-decorator');\n    return div;\n  };\n  grid.decorators.add(model.focusDecorator);\n\n  function seekNextEdge(\n    newIndex: number | undefined,\n    startedDefined: boolean,\n    isForwardEdge: (i?: number) => boolean,\n    isBackwardEdge: (i?: number) => boolean,\n    goForward: (i: number) => number | undefined\n  ) {\n    const isEdgeToSeek = (isForwardEdge(newIndex) || !startedDefined) &&\n      isBackwardEdge ||\n      isForwardEdge;\n\n    // tslint:disable-next-line:no-conditional-assignment\n    while (newIndex !== undefined && goForward(newIndex) !== undefined && !isEdgeToSeek(newIndex = goForward(newIndex))) {\n      // empty\n    }\n\n    return newIndex;\n  }\n\n  function navFrom(row: number, col: number, e: AnnotatedMouseOrKeyEventUnion) {\n    // if nothing changes great we'll stay where we are\n    let newRow: number | undefined = row;\n    let newCol: number | undefined = col;\n    const isSeek = ctrlOrCmd(e);\n    // tslint:disable-next-line:one-variable-per-declaration\n    if (isSeek) {\n      const cellHasValue = (r?: number, c?: number) => {\n        if (r === undefined || c === undefined) {\n          return false;\n        }\n\n        return !!grid.dataModel.get(r, c).formatted;\n      };\n      const isLeftwardEdge = (c: number) => {\n        return cellHasValue(newRow, c) && !cellHasValue(newRow, grid.data.left(c));\n      };\n      const isRightwardEdge = (c: number) => {\n        return cellHasValue(newRow, c) && !cellHasValue(newRow, grid.data.right(c));\n      };\n      const isUpwardEdge = (r: number) => {\n        return cellHasValue(r, newCol) && !cellHasValue(grid.data.up(r), newCol);\n      };\n      const isDownwardEdge = (r: number) => {\n        return cellHasValue(r, newCol) && !cellHasValue(grid.data.down(r), newCol);\n      };\n      const startedDefined = cellHasValue(newRow, newCol);\n      switch (e.which) {\n        case arrow.down.code:\n          newRow = seekNextEdge(newRow, startedDefined, isDownwardEdge, isUpwardEdge, grid.data.down);\n          break;\n        case arrow.up.code:\n          newRow = seekNextEdge(newRow, startedDefined, isUpwardEdge, isDownwardEdge, grid.data.up);\n          break;\n        case arrow.right.code:\n          newCol = seekNextEdge(newCol, startedDefined, isRightwardEdge, isLeftwardEdge, grid.data.right);\n          break;\n        case arrow.left.code:\n          newCol = seekNextEdge(newCol, startedDefined, isLeftwardEdge, isRightwardEdge, grid.data.left);\n          break;\n      }\n    } else {\n      switch (e.which) {\n        case arrow.down.code:\n          newRow = grid.data.down(newRow);\n          break;\n        case arrow.up.code:\n          newRow = grid.data.up(newRow);\n          break;\n        case arrow.right.code:\n          newCol = grid.data.right(newCol);\n          break;\n        case arrow.left.code:\n          newCol = grid.data.left(newCol);\n          break;\n      }\n    }\n\n    if (newRow === undefined) {\n      newRow = row;\n    }\n    if (newCol === undefined) {\n      newCol = col;\n    }\n    return {\n      row: newRow,\n      col: newCol\n    };\n\n  }\n\n  grid.eventLoop.bind('keydown', (e) => {\n    if (!grid.focused) {\n      return;\n    }\n    // handle tab\n    if (key.is(key.code.special.tab, e.which)) {\n      model.handleTabEvent(e);\n      return;\n    }\n\n    if (!key.is(arrow, e.which)) {\n      return;\n    }\n    // focus logic\n\n    if (!e.shiftKey) {\n      const newFocus = navFrom(model.focus.row, model.focus.col, e);\n      model.setFocus(newFocus.row, newFocus.col, true);\n    } else {\n      // selection logic\n      let newSelection;\n      // stand in for if it's cleared\n      if (model.selection.top === -1) {\n        newSelection = {\n          top: model.focus.row,\n          left: model.focus.col,\n          height: 1,\n          width: 1\n        };\n      } else {\n        newSelection = {\n          top: model.selection.top,\n          left: model.selection.left,\n          height: model.selection.height,\n          width: model.selection.width\n        };\n      }\n      const navFromRow = (model.focus.row === newSelection.top) ?\n        newSelection.top + newSelection.height - 1 :\n        newSelection.top;\n\n      const navFromCol = (model.focus.col === newSelection.left) ?\n        newSelection.left + newSelection.width - 1 :\n        newSelection.left;\n      const newRowCol = navFrom(navFromRow, navFromCol, e);\n      setSelectionFromPoints(model.focus.row, model.focus.col, newRowCol.row, newRowCol.col);\n      grid.cellScrollModel.scrollIntoView(newRowCol.row, newRowCol.col);\n    }\n  });\n\n  function isNavableMouseEvent(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n    const target = e.target;\n    // if there's no target let it through because that only happens in unit tests,\n    // or if it happened in real world it wouldn't have a valid row or col and so wouldn't do anything anyway\n    return !target || grid.eventIsOnCells(e) && (e as AnnotatedMouseEventUnion).button !== 2;\n  }\n\n  function isCheckboxModeForRowCol(row: number, col: number) {\n    return model.checkboxModeFor.rows && col < 0 || (row < 0 && colSelectable(col)) && model.checkboxModeFor.cols;\n  }\n\n  grid.eventLoop.bind('mousedown', (e) => {\n    if (!isNavableMouseEvent(e)) {\n      return;\n    }\n    // assume the event has been annotated by the cell mouse model interceptor\n    const row = e.row;\n    const col = e.col;\n\n    // if we're in checkbox mode pretend the user held command for header mousedowns only\n    const isCheckboxMode = isCheckboxModeForRowCol(row, col);\n    const ctrlOrCmdPressed = isCheckboxMode || ctrlOrCmd(e);\n\n    if (e.shiftKey) {\n      let fromRow = model.focus.row;\n      let fromCol = model.focus.col;\n      let toRow = row;\n      let toCol = col;\n      let wasSelected;\n      if (toRow < 0) {\n        const colDescriptor = grid.data.col.get(toCol);\n        if (colDescriptor.selectable !== false) {\n          wasSelected = colDescriptor.selected;\n          fromRow = 0;\n          toRow = Infinity;\n        }\n\n      }\n      if (toCol < 0) {\n        wasSelected = grid.data.row.get(toRow).selected;\n        fromCol = 0;\n        toCol = Infinity;\n      }\n\n      selectFromFocusToCell(fromRow, fromCol, toRow, toCol, ctrlOrCmdPressed, wasSelected);\n    } else {\n\n      let focusRow = row;\n      if (focusRow < 0) {\n        focusRow = grid.view.row.toData(grid.rowModel.numHeaders());\n      }\n      let focusCol = col;\n      if (focusCol < 0) {\n        focusCol = grid.view.col.toData(grid.colModel.numHeaders());\n      }\n\n      const headerSelectionRange = createHeaderSelectionRange(row, col);\n      if (headerSelectionRange) {\n        const prevSelections = findFullRowOrColSelections(headerSelectionRange);\n        if (prevSelections.length && isCheckboxMode) {\n          const selectAll = headerSelectionRange.width === Infinity &&\n            headerSelectionRange.height === Infinity &&\n            !(grid.rowModel.allSelected() || grid.colModel.allSelected());\n          prevSelections.forEach((prevSelection) => {\n            removeFullRowOrColFromSelection(prevSelection, headerSelectionRange);\n          });\n          if (selectAll) {\n            model.setSelection(headerSelectionRange);\n          }\n          model.setFocus(focusRow, focusCol, true, true);\n        } else {\n          if (ctrlOrCmdPressed && !selectionIsFocus(model.selection)) {\n            addSelection(model.selection);\n          } else {\n            clearOtherSelections();\n          }\n          model.setFocus(focusRow, focusCol, ctrlOrCmdPressed);\n          model.setSelection(headerSelectionRange);\n        }\n\n      } else {\n        if (ctrlOrCmdPressed) {\n          addSelection(model.selection);\n        }\n        model.setFocus(focusRow, focusCol, ctrlOrCmdPressed);\n      }\n    }\n  });\n\n  function selectFromFocusToCell(\n    fromRow: number,\n    fromCol: number,\n    toRow: number,\n    toCol: number,\n    ctrlOrCmdPressed: boolean,\n    wasSelected?: boolean\n  ) {\n    const isCheckboxMode = (fromRow === 0 && toRow === Infinity && model.checkboxModeFor.cols) ||\n      (fromCol === 0 && toCol === Infinity && model.checkboxModeFor.rows);\n    if (!wasSelected || !isCheckboxMode) {\n      setSelectionFromPoints(fromRow, fromCol, toRow, toCol, ctrlOrCmdPressed);\n    } else {\n      const range = rangeUtil.createFromPoints(fromRow, fromCol, toRow, toCol);\n      const prevSelections = findFullRowOrColSelections(range);\n      if (prevSelections.length) {\n        prevSelections.forEach((prevSelection) => {\n          removeFullRowOrColFromSelection(prevSelection, range);\n        });\n      }\n    }\n  }\n\n  function colSelectable(col: number) {\n    const colDescriptor = grid.data.col.get(col);\n    return colDescriptor && colDescriptor.selectable !== false;\n  }\n\n  function createHeaderSelectionRange(row: number, col: number) {\n    let headerSelectionRange;\n    if (row < 0 && col < 0) {\n      headerSelectionRange = rangeUtil.createFromPoints(0, 0, Infinity, Infinity);\n    } else if (row < 0) {\n      if (colSelectable(col)) {\n        headerSelectionRange = rangeUtil.createFromPoints(0, col, Infinity, col);\n      }\n    } else if (col < 0) {\n      headerSelectionRange = rangeUtil.createFromPoints(row, 0, row, Infinity);\n    }\n    return headerSelectionRange;\n  }\n\n  function addOrSetSelection(selection: RawPositionRange) {\n    if (!selectionIsFocus(model.selection)) {\n      addSelection(selection);\n    } else {\n      model.setSelection(selection);\n    }\n  }\n\n  function removeFullRowOrColFromSelection(selection: RawPositionRange | ISelectionDecorator, rowOrCol: RawPositionRange) {\n\n    if (rowOrCol.width === Infinity) { // row\n      const newSelections = [];\n      if (selection.top < rowOrCol.top) { // we need a selection for the top portion\n        const newSelection = {\n          top: selection.top,\n          height: rowOrCol.top - selection.top,\n          left: selection.left,\n          width: selection.width\n        };\n        newSelections.push(newSelection);\n      }\n\n      const bottomRow = selection.top + selection.height - 1;\n      if (bottomRow > rowOrCol.top + rowOrCol.height - 1) { // we need a selection for the bottom portion\n        newSelections.push({\n          top: rowOrCol.top + rowOrCol.height,\n          height: bottomRow - (rowOrCol.top + rowOrCol.height - 1),\n          left: selection.left,\n          width: selection.width\n        });\n      }\n      removeSelection(selection);\n      newSelections.forEach(addOrSetSelection);\n      syncSelectionToHeaders();\n    }\n\n    if (rowOrCol.height === Infinity) {\n      // TODO: col\n    }\n  }\n\n  function findFullRowOrColSelections(range: RawPositionRange) {\n    return model.getAllSelections().filter((selection) => {\n      return (selection.height === Infinity &&\n        selection.top === 0 &&\n        rangeUtil.intersect([selection.left, selection.width], [range.left, range.width]))\n        ||\n        (selection.width === Infinity &&\n          selection.left === 0 &&\n          rangeUtil.intersect([selection.top, selection.height], [range.top, range.height]));\n    });\n  }\n\n  function addSelection(range: RawPositionRange) {\n    model.otherSelections.push(createAndAddSelectionDecorator(range.top, range.left, range.height, range.width));\n  }\n\n  // row col selection\n  function handleRowColSelectionChange(rowOrCol: 'row' | 'col') {\n    const decoratorsField = rowOrCol === 'row' ? '_rowSelectionClasses' : '_colSelectionClasses';\n    const rowColModelField = rowOrCol === 'row' ? 'rowModel' : 'colModel';\n    model[decoratorsField].forEach((selectionDecorator) => {\n      grid.cellClasses.remove(selectionDecorator);\n    });\n    model[decoratorsField] = [];\n\n    if (grid[rowColModelField].allSelected()) {\n      const top = rowOrCol === 'row' ? Infinity : 0;\n      const left = rowOrCol === 'col' ? Infinity : 0;\n      const decorator = grid.cellClasses.create(top, left, 'selected', 1, 1, 'virtual');\n      grid.cellClasses.add(decorator);\n      model[decoratorsField].push(decorator);\n    } else {\n      grid[rowColModelField].getSelected().forEach((index) => {\n        const virtualIndex = grid[rowColModelField].toVirtual(index);\n        const top = rowOrCol === 'row' ? virtualIndex : 0;\n        const left = rowOrCol === 'col' ? virtualIndex : 0;\n        const decorator = grid.cellClasses.create(top, left, 'selected', 1, 1, 'virtual');\n        grid.cellClasses.add(decorator);\n        model[decoratorsField].push(decorator);\n      });\n    }\n  }\n\n  grid.eventLoop.bind('grid-row-selection-change', () => {\n    handleRowColSelectionChange('row');\n  });\n\n  grid.eventLoop.bind('grid-col-selection-change', () => {\n    handleRowColSelectionChange('col');\n  });\n\n  function createAndAddSelectionDecorator(t: number, l: number, h: number, w: number): ISelectionDecorator {\n    const selection = grid.decorators.create(t, l, h, w);\n    const defaultRender = selection.render;\n    selection.render = () => {\n      const div = defaultRender();\n      div.setAttribute('class', 'grid-selection');\n      return div;\n    };\n    grid.decorators.add(selection);\n    return selection as ISelectionDecorator;\n  }\n\n  function syncSelectionToHeaders() {\n    grid.colModel.clearSelected();\n    grid.rowModel.clearSelected();\n    model.getAllSelections().forEach((s) => {\n      if (s) {\n        maybeSelectHeaderFromSelection(s);\n      }\n    });\n  }\n\n  function maybeSelectHeaderFromSelection(range: RawPositionRange, deselect?: boolean) {\n    let indexes;\n    if (range.top === 0 && range.height === Infinity) {\n      indexes = grid.data.col.indexes({\n        from: range.left,\n        length: range.width\n      });\n      if (deselect) {\n        grid.colModel.deselect(indexes);\n      } else {\n        grid.colModel.select(indexes);\n      }\n    }\n    if (range.left === 0 && range.width === Infinity) {\n      indexes = grid.data.row.indexes({\n        from: range.top,\n        length: range.height\n      });\n      if (deselect) {\n        grid.rowModel.deselect(indexes);\n      } else {\n        grid.rowModel.select(indexes);\n      }\n    }\n  }\n\n  function selectionIsFocus(s: RawPositionRange) {\n    return s.height === 1 && s.width === 1 && !model.otherSelections.length;\n  }\n\n  function setSelectionToFocus() {\n    model.setSelection({\n      top: model.focus.row,\n      left: model.focus.col,\n      height: 1,\n      width: 1\n    });\n  }\n\n  function clearOtherSelections() {\n    grid.decorators.remove(model.otherSelections);\n    model.otherSelections = [];\n    syncSelectionToHeaders();\n  }\n\n  function isDecorator(s: ISelectionDecorator | RawPositionRange): s is ISelectionDecorator {\n    return !!(s as ISelectionDecorator).space;\n  }\n\n  function removeSelection(selectionToRemove: ISelectionDecorator | RawPositionRange) {\n    if (rangeUtil.equal(selectionToRemove, model.selection)) {\n      if (model.otherSelections.length) {\n        const lastSelection = model.otherSelections.pop() as ISelectionDecorator;\n        grid.decorators.remove(lastSelection);\n        model.setSelection(lastSelection);\n      } else {\n        setSelectionToFocus();\n      }\n    } else if (isDecorator(selectionToRemove)) {\n      const index = model.otherSelections.indexOf(selectionToRemove);\n      if (index !== -1) {\n        model.otherSelections.splice(index, 1);\n        grid.decorators.remove(selectionToRemove);\n      }\n    }\n    syncSelectionToHeaders();\n  }\n\n  function setSelectionFromPoints(fromRow: number, fromCol: number, toRow: number, toCol: number, dontClearOthers?: boolean) {\n    if (!dontClearOthers) {\n      clearOtherSelections();\n    }\n    toRow = util.clamp(toRow, 0, Infinity);\n    toCol = util.clamp(toCol, 0, Infinity);\n    const newSelection = rangeUtil.createFromPoints(fromRow, fromCol, toRow, toCol);\n    model.setSelection(newSelection);\n  }\n\n  mainSelection._onDragStart = (e) => {\n    if (!isNavableMouseEvent(e)) {\n      return;\n    }\n    if (e.enableAutoScroll) {\n      e.enableAutoScroll();\n    }\n    let fromRow = model.focus.row;\n    let fromCol = model.focus.col;\n    let startCol = e.col;\n    let startRow = e.row;\n    let wasSelected: boolean | undefined;\n    let toRow: number | undefined;\n    let toCol: number | undefined;\n    if (startRow < 0) {\n      // these are notted because mousedwon actually inverts the intial selection\n      wasSelected = !grid.data.col.get(startCol).selected;\n      fromRow = 0;\n      toRow = Infinity;\n\n    }\n    if (startCol < 0) {\n      // these are notted because mousedwon actually inverts the intial selection\n      wasSelected = !grid.data.row.get(startRow).selected;\n      fromCol = 0;\n      toCol = Infinity;\n    }\n    const unbindDrag = grid.eventLoop.bind('grid-cell-drag', (gridCellDrag) => {\n      toRow = toRow !== Infinity ? gridCellDrag.row : toRow;\n      toCol = toCol !== Infinity ? gridCellDrag.col : toCol;\n      if (toCol !== Infinity && !colSelectable(toCol)) {\n        return;\n      }\n\n      const fixedRows = grid.rowModel.numFixed(true);\n      if (startRow < fixedRows && toRow > fixedRows && toRow !== Infinity) {\n        startRow = toRow = grid.rowModel.numFixed();\n        grid.cellScrollModel.scrollTo(0, grid.cellScrollModel.col);\n      }\n      const fixedCols = grid.colModel.numFixed(true);\n      if (startCol < fixedCols && toCol > fixedCols && toCol !== Infinity) {\n        startCol = toCol = grid.colModel.numFixed();\n        grid.cellScrollModel.scrollTo(grid.cellScrollModel.row, 0);\n      }\n      if (isNaN(toRow) || isNaN(toCol)) {\n        return; // don't try to select when NaN\n      }\n      // always pass true because if it was to be cleared mousedown should have handled that\n      selectFromFocusToCell(fromRow, fromCol, toRow, toCol, true, wasSelected);\n    });\n    const unbindDragEnd = grid.eventLoop.bind('grid-drag-end', () => {\n      unbindDrag();\n      unbindDragEnd();\n    });\n  };\n  grid.eventLoop.bind('grid-drag-start', mainSelection._onDragStart);\n\n  setSelectionToFocus();\n\n  function clearSelectionFromModelChange(e: IRowColEvent) {\n    if (e.action === 'size') { // don't clear for resize but all other changes for now will clear selection\n      return;\n    }\n    model.clearSelection();\n\n  }\n\n  grid.eventLoop.bind('grid-col-change', clearSelectionFromModelChange);\n  grid.eventLoop.bind('grid-row-change', clearSelectionFromModelChange);\n  return model;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/navigation-model/index.ts","import { Grid, IGridDimension } from '../core';\nimport { IDecorator } from '../decorators';\nimport makeDirtyClean from '../dirty-clean';\nimport { IGridCustomMouseEvent } from '../event-loop';\nimport * as util from '../util';\n\nexport interface IPixelScrollModel {\n    x: IPixelScrollDimensionInfo;\n    y: IPixelScrollDimensionInfo;\n    top: number;\n    left: number;\n    height: number;\n    width: number;\n    offsetTop: number;\n    offsetLeft: number;\n    vertScrollBar: IScrollBarDecorator;\n    horzScrollBar: IScrollBarDecorator;\n    maxScroll: {\n        height?: number,\n        width?: number\n    };\n    maxIsAllTheWayFor: {\n        height: boolean,\n        width: boolean\n    };\n    isDirty(): boolean;\n    isOffsetDirty(): boolean;\n    scrollTo(x: number, y: number, dontNotify?: boolean): void;\n    setScrollSize(h: number, w: number): void;\n    _getMaxScroll(heightOrWidth: 'height' | 'width'): number;\n}\n\nexport interface IScrollBarDecorator extends IDecorator {\n    _onDragStart?(e: IGridCustomMouseEvent): void;\n    _unbindDrag?(): void;\n    _unbindDragEnd?(): void;\n}\n\nexport interface IPixelScrollDimensionInfo {\n    position: number;\n    offset: number;\n    scrollSize: number;\n    maxScroll: number;\n    maxIsAllTheWay: boolean;\n    scrollBar: IScrollBarDecorator;\n    scrollTo(px: number, dontNotify?: boolean): void;\n    positionScrollBar(): void;\n    updatePixelOffset(): void;\n    calcCellScrollPosition(): number;\n    sizeScrollBar(): void;\n    cacheMaxScroll(): void;\n    cacheScrollSize(): void;\n    _getMaxScroll(): number;\n}\n\nexport function create(grid: Grid) {\n    const pixelDirtyClean = makeDirtyClean(grid);\n    const offsetDirtyClean = makeDirtyClean(grid);\n    const scrollBarWidth = 10;\n    const intentionAngle = 30;\n\n    function makeDimension(\n        gridDimension: IGridDimension,\n        gridCrossDimension: IGridDimension,\n    ) {\n\n        function getViewScrollSize() {\n            return gridDimension.viewPort.size - gridDimension.virtualPixelCell.fixedSize();\n        }\n\n        function getScrollRatioFromVirtualScrollCoords(scroll: number) {\n            const maxScroll = pixelScrollDimension.maxScroll;\n            const scrollRatio = scroll / maxScroll;\n            return scrollRatio;\n        }\n\n        function getRealScrollBarPosition(scroll: number) {\n            const scrollRatio = getScrollRatioFromVirtualScrollCoords(scroll);\n            const maxScrollBarScroll = getMaxScrollBarCoord();\n            // in scroll bar coords\n            const scrollBarCoord = scrollRatio * maxScrollBarScroll;\n            // add the fixed height to translate back into real coords\n            return scrollBarCoord + gridDimension.virtualPixelCell.fixedSize();\n        }\n\n        function getMaxScroll() {\n            if (pixelScrollDimension.maxIsAllTheWay) {\n                return Math.max(\n                    0,\n                    pixelScrollDimension.scrollSize - gridDimension.virtualPixelCell.sizeOf(gridDimension.rowColModel.length(true) - 1)\n                );\n            }\n\n            let scrollLength = pixelScrollDimension.scrollSize;\n            const viewScrollSize = getViewScrollSize();\n\n            if (scrollLength <= viewScrollSize) {\n                return 0;\n            }\n\n            let firstScrollableCell = gridDimension.rowColModel.numFixed();\n            while (scrollLength > viewScrollSize - 10 && firstScrollableCell < gridDimension.rowColModel.length(true)) {\n                scrollLength -= gridDimension.virtualPixelCell.sizeOf(firstScrollableCell);\n                firstScrollableCell++;\n            }\n            return pixelScrollDimension.scrollSize - scrollLength;\n        }\n\n        function getMaxScrollBarCoord() {\n            return getViewScrollSize() - (gridDimension.positionRange.getSize(pixelScrollDimension.scrollBar) || scrollBarWidth);\n        }\n\n        function getScrollPositionFromReal(scrollBarRealClickCoord: number) {\n            const scrollBarTopClick = scrollBarRealClickCoord - gridDimension.virtualPixelCell.fixedSize();\n            const scrollRatio = scrollBarTopClick / getMaxScrollBarCoord();\n            const scrollCoord = scrollRatio * pixelScrollDimension.maxScroll;\n            return scrollCoord;\n        }\n\n        function makeScrollBarDecorator() {\n            const decorator: IScrollBarDecorator = grid.decorators.create();\n            decorator.fixed = true;\n            const viewPortClampFn = gridDimension.viewPort.clampPx;\n\n            decorator.postRender = (scrollBarElem: HTMLElement) => {\n                scrollBarElem.setAttribute('class', 'grid-scroll-bar');\n                scrollBarElem.setAttribute('style', `${scrollBarElem.getAttribute('style')} border-radius: 6px;\n                background: rgba(0, 0, 0, .5);\n                z-index: 10;`);\n                decorator._onDragStart = (e) => {\n                    if (e.target !== scrollBarElem) {\n                        return;\n                    }\n                    const scrollBarOffset = gridDimension.cellMouse.layerPx(e);\n\n                    decorator._unbindDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent: IGridCustomMouseEvent) => {\n                        grid.eventLoop.stopBubbling(gridDragEvent);\n                        const gridCoord = viewPortClampFn(gridDimension.cellMouse.gridPx(gridDragEvent));\n                        const scrollBarRealClickCoord = gridCoord - scrollBarOffset;\n                        const scrollCoord = getScrollPositionFromReal(scrollBarRealClickCoord);\n                        pixelScrollDimension.scrollTo(scrollCoord);\n                    });\n\n                    decorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', () => {\n                        if (decorator._unbindDrag) {\n                            decorator._unbindDrag();\n                        }\n                        if (decorator._unbindDragEnd) {\n                            decorator._unbindDragEnd();\n                        }\n                    });\n\n                    e.stopPropagation();\n                };\n\n                grid.eventLoop.bind(scrollBarElem, 'grid-drag-start', decorator._onDragStart);\n                grid.eventLoop.bind(scrollBarElem, 'mousedown', (e) => {\n                    grid.eventLoop.stopBubbling(e);\n                });\n\n                return scrollBarElem;\n            };\n\n            decorator.units = 'px';\n            decorator.space = 'real';\n            gridCrossDimension.positionRange.setSize(decorator, scrollBarWidth);\n            return decorator;\n        }\n\n        const pixelScrollDimension: IPixelScrollDimensionInfo = {\n            position: 0,\n            offset: 0,\n            maxScroll: 0,\n            scrollSize: 0,\n            maxIsAllTheWay: false,\n            scrollTo(px: number, dontNotify?: boolean) {\n                pixelScrollDimension.position = util.clamp(px, 0, pixelScrollDimension.maxScroll);\n                pixelScrollDimension.positionScrollBar();\n                pixelScrollDimension.updatePixelOffset();\n\n                if (!dontNotify) {\n                    notifyListeners();\n                }\n            },\n            updatePixelOffset() {\n                let modPixels = 0;\n                if (!grid.opts.snapToCell) {\n                    const fixedSize = gridDimension.virtualPixelCell.fixedSize();\n                    const rawCell = gridDimension.virtualPixelCell.toCellFromPx(pixelScrollDimension.position + fixedSize);\n                    const cell = rawCell - gridDimension.rowColModel.numFixed();\n                    const startCell = gridDimension.rowColModel.numFixed();\n                    const endCell = cell + gridDimension.rowColModel.numFixed() - 1;\n                    const position = gridDimension.virtualPixelCell.sizeOf(startCell, endCell);\n                    modPixels = position - pixelScrollDimension.position;\n                }\n                if (pixelScrollDimension.offset !== modPixels) {\n                    offsetDirtyClean.setDirty();\n                }\n                pixelScrollDimension.offset = modPixels;\n            },\n            scrollBar: makeScrollBarDecorator(),\n            positionScrollBar() {\n                gridDimension.positionRange.setPosition(\n                    pixelScrollDimension.scrollBar,\n                    getRealScrollBarPosition(pixelScrollDimension.position)\n                );\n            },\n            calcCellScrollPosition() {\n                const position = pixelScrollDimension.position;\n                const rawCell = gridDimension.virtualPixelCell.toCellFromPx(\n                    position + gridDimension.virtualPixelCell.fixedSize()\n                );\n                return rawCell - gridDimension.rowColModel.numFixed();\n            },\n            sizeScrollBar() {\n\n                // viewport.size needs to be cross size\n                gridCrossDimension.positionRange.setPosition(\n                    pixelScrollDimension.scrollBar,\n                    gridCrossDimension.viewPort.size - scrollBarWidth\n                );\n                const scrollableViewSize = getViewScrollSize();\n                const scrollBarSize = Math.max(scrollableViewSize / gridDimension.virtualPixelCell.totalSize() * scrollableViewSize, 20);\n                gridDimension.positionRange.setSize(\n                    pixelScrollDimension.scrollBar,\n                    scrollBarSize\n                );\n                if (scrollBarSize >= scrollableViewSize) {\n                    gridDimension.positionRange.setSize(\n                        pixelScrollDimension.scrollBar,\n                        -1\n                    );\n                }\n            },\n            cacheMaxScroll() {\n                pixelScrollDimension.maxScroll = getMaxScroll();\n            },\n            cacheScrollSize() {\n                pixelScrollDimension.scrollSize = gridDimension.virtualPixelCell.totalSize() - gridDimension.virtualPixelCell.fixedSize();\n            },\n            _getMaxScroll: getMaxScroll\n        };\n        return pixelScrollDimension;\n    }\n\n    const dimensions = {\n        y: makeDimension(grid.rows, grid.cols),\n        x: makeDimension(grid.cols, grid.rows),\n    };\n    const model: IPixelScrollModel = {\n        get height() {\n            return dimensions.y.scrollSize;\n        },\n        get width() {\n            return dimensions.x.scrollSize;\n        },\n        get top() {\n            return dimensions.y.position;\n        },\n        get left() {\n            return dimensions.x.position;\n        },\n        get offsetTop() {\n            return dimensions.y.offset;\n        },\n        get offsetLeft() {\n            return dimensions.x.offset;\n        },\n        get vertScrollBar() {\n            return dimensions.y.scrollBar;\n        },\n        get horzScrollBar() {\n            return dimensions.x.scrollBar;\n        },\n        maxScroll: {\n            get height() {\n                return dimensions.y.scrollSize;\n            },\n            get width() {\n                return dimensions.x.scrollSize;\n            }\n        },\n        maxIsAllTheWayFor: {\n            get height() {\n                return dimensions.y.maxIsAllTheWay;\n            },\n            set height(h: boolean) {\n                dimensions.y.maxIsAllTheWay = h;\n            },\n            get width() {\n                return dimensions.x.maxIsAllTheWay;\n            },\n            set width(h: boolean) {\n                dimensions.x.maxIsAllTheWay = h;\n            },\n        },\n        isDirty: pixelDirtyClean.isDirty,\n        isOffsetDirty: offsetDirtyClean.isDirty,\n        setScrollSize(h: number, w: number) {\n            model.y.scrollSize = h;\n            model.x.scrollSize = w;\n        },\n        scrollTo(top: number, left: number, dontNotify?: boolean) {\n            model.y.scrollTo(top, true);\n            model.x.scrollTo(left, true);\n            if (!dontNotify) {\n                notifyListeners();\n            }\n\n        },\n        _getMaxScroll(heightOrWidth: 'height' | 'width') {\n            const dimension = heightOrWidth === 'height' ? model.y : model.x;\n            return dimension._getMaxScroll();\n        },\n        y: dimensions.y,\n        x: dimensions.x,\n    };\n\n    grid.eventLoop.bind('grid-virtual-pixel-cell-change', () => {\n        model.y.cacheScrollSize();\n        model.x.cacheScrollSize();\n        cacheMaxScroll();\n        sizeScrollBars();\n        updatePixelOffsets();\n    });\n\n    grid.eventLoop.bind('grid-viewport-change', () => {\n        cacheMaxScroll();\n        sizeScrollBars();\n        updatePixelOffsets();\n    });\n\n    function cacheMaxScroll() {\n        model.y.cacheMaxScroll();\n        model.x.cacheMaxScroll();\n    }\n\n    function checkAngle(side1: number, side2: number) {\n        const angle = Math.abs(Math.atan(side1 / side2) * 57.29);\n        return angle < intentionAngle;\n    }\n\n    // assumes a standardized wheel event that we create through the mousewheel package\n    grid.eventLoop.bind('mousewheel', (e) => {\n        if (e.target !== grid.container && getScrollElementFromTarget(e.target, grid.container) !== grid.container) {\n            return;\n        }\n\n        let deltaY = e.deltaY;\n        let deltaX = e.deltaX;\n        if (checkAngle(deltaY, deltaX)) {\n            deltaY = 0;\n        } else if (checkAngle(deltaX, deltaY)) {\n            deltaX = 0;\n        }\n\n        model.scrollTo(model.top - deltaY, model.left - deltaX, false);\n        e.preventDefault();\n    });\n\n    function notifyListeners() {\n        // TODO: possibly keep track of delta since last update and send it along. for now, no\n        grid.eventLoop.fire('grid-pixel-scroll');\n\n        // update the cell scroll\n        grid.cellScrollModel.scrollTo(model.y.calcCellScrollPosition(), model.x.calcCellScrollPosition(), undefined, true);\n        pixelDirtyClean.setDirty();\n    }\n\n    /* SCROLL BAR LOGIC */\n\n    function sizeScrollBars() {\n        model.y.sizeScrollBar();\n        model.x.sizeScrollBar();\n        positionScrollBars();\n    }\n\n    function positionScrollBars() {\n        model.y.positionScrollBar();\n        model.x.positionScrollBar();\n    }\n\n    function updatePixelOffsets() {\n        model.y.updatePixelOffset();\n        model.x.updatePixelOffset();\n    }\n\n    grid.decorators.add(model.y.scrollBar);\n    grid.decorators.add(model.x.scrollBar);\n    /* END SCROLL BAR LOGIC */\n\n    const hasStyle = (elem: EventTarget): elem is HTMLElement => !!(elem as any).style;\n\n    function getScrollElementFromTarget(elem: EventTarget | null, stopParent?: HTMLElement | Document) {\n        stopParent = stopParent || document;\n        if (!elem || !(hasStyle(elem))) {\n            return stopParent;\n        }\n\n        const position = elem.style.position;\n        const excludeStaticParent = position === 'absolute';\n        const overflowRegex = /(auto|scroll)/;\n        let scrollParent: HTMLElement | null = elem;\n\n        while (!!scrollParent && scrollParent !== stopParent) {\n            if (!(excludeStaticParent && scrollParent.style.position === 'static')) {\n                const computedStyle = getComputedStyle(scrollParent);\n\n                if (overflowRegex.test('' + computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n                    break;\n                }\n            }\n\n            scrollParent = scrollParent.parentElement;\n        }\n\n        return position === 'fixed' || !scrollParent || scrollParent === elem ? elem.ownerDocument || stopParent : scrollParent;\n    }\n\n    return model;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/pixel-scroll-model/index.ts","import { AbstractRowColModel, IRowDescriptor } from '../abstract-row-col-model';\nimport { Grid } from '../core';\n\nexport class RowModel extends AbstractRowColModel {\n    height = (idx: number) => {\n        return this.sizeOf(idx);\n    }\n    row = (idx: number): IRowDescriptor => {\n        return this.get(idx, true);\n    }\n}\n\nexport function create(grid: Grid) {\n    return new RowModel(grid, 'row', 'height', 30);\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/row-model/index.ts","import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\n\nexport interface IShowHiddenCols {\n    _decorators: { [key: number]: IDecorator | undefined };\n}\n\nexport function create(grid: Grid) {\n    const api: IShowHiddenCols = {\n        _decorators: {}\n    };\n\n    function setColShowing(col: number) {\n        grid.colModel.get(col).hidden = false;\n    }\n\n    function doWhileHidden(col: number, fn: ((c: number) => void) | undefined, inc: number) {\n        let colDescriptor;\n        // tslint:disable-next-line:no-conditional-assignment\n        while ((colDescriptor = grid.colModel.get(col)) !== undefined && colDescriptor.hidden) {\n            if (fn) {\n                fn(col);\n            }\n            col = col + inc;\n        }\n        return col;\n    }\n\n    function createDecorator(col: number, right: boolean) {\n        const headerDecorator = grid.decorators.create(0, col, 1, 1, 'cell', 'virtual');\n\n        headerDecorator.postRender = (div) => {\n\n            if (right) {\n                div.style.transform = 'translate(50%, -50%)';\n                div.style.webkitTransform = 'translate(50%, -50%)';\n                div.style.removeProperty('left');\n            } else {\n                div.style.transform = 'translate(-50%, -50%)';\n                div.style.webkitTransform = 'translate(-50%, -50%)';\n                div.style.removeProperty('right');\n            }\n            div.style.removeProperty('bottom');\n            div.style.top = '50%';\n            div.setAttribute('class', 'show-hidden-cols');\n            div.setAttribute('dts', 'grid_column_unhide_btn');\n\n            grid.eventLoop.bind(div, 'click', () => {\n                const inc = right ? 1 : -1;\n                doWhileHidden(col + inc, setColShowing, inc);\n            });\n        };\n        return headerDecorator;\n    }\n\n    function maybeRemoveDecorator(col: number) {\n        if (api._decorators[col]) {\n            const decorator = api._decorators[col];\n            if (decorator !== undefined) {\n                grid.decorators.remove(decorator);\n                api._decorators[col] = undefined;\n            }\n        }\n    }\n\n    grid.eventLoop.bind('grid-col-change', (e) => {\n        if (e.action === 'hide' || e.action === 'add') {\n            e.descriptors.forEach((descriptor) => {\n                const col = descriptor.index;\n                if (!col && col !== 0) {\n                    return;\n                }\n                if (descriptor.hidden) {\n                    let decCol = col;\n                    let showingCol = doWhileHidden(col, undefined, -1);\n                    const rightSide = showingCol !== -1;\n                    if (!rightSide) {\n                        // we actually have to backtrack to the last showing column\n                        showingCol = doWhileHidden(col, undefined, 1);\n                    }\n                    decCol = showingCol;\n                    maybeRemoveDecorator(col);\n                    const decorator = createDecorator(decCol, rightSide);\n                    grid.decorators.add(decorator);\n                    api._decorators[col] = decorator;\n                } else {\n                    maybeRemoveDecorator(col);\n                }\n            });\n        }\n    });\n\n    return api;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/show-hidden-cols/index.ts","\nimport { IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport { AbstractSpaceConverter } from './converter';\nimport { AbstractDimensionalSpaceConverter } from './dimensional-converter';\n\nexport class DataSpaceConverter extends AbstractSpaceConverter {\n  row: AbstractDimensionalSpaceConverter<IRowDescriptor> = new DimensionalDataSpaceConverter(this.grid.rows);\n  col: AbstractDimensionalSpaceConverter<IColDescriptor> = new DimensionalDataSpaceConverter(this.grid.cols);\n}\n\nclass DimensionalDataSpaceConverter<T extends IRowDescriptor | IColDescriptor> extends AbstractDimensionalSpaceConverter<T> {\n  toData(i: number) {\n    return i;\n  }\n  toVirtual(dataCol: number) {\n    return this.gridDimension.rowColModel.toVirtual(dataCol);\n  }\n  count() {\n    return this.gridDimension.rowColModel.length();\n  }\n  toView(dataCol: number) {\n    return this.gridDimension.converters.virtual.toView(this.toVirtual(dataCol));\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/space/data-space-converter.ts","\nimport { IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport { AbstractSpaceConverter } from './converter';\nimport { AbstractDimensionalSpaceConverter } from './dimensional-converter';\n\nexport class ViewSpaceConverter extends AbstractSpaceConverter {\n  row: AbstractDimensionalSpaceConverter<IRowDescriptor> = new DimensionalViewSpaceConverter(this.grid.rows);\n  col: AbstractDimensionalSpaceConverter<IColDescriptor> = new DimensionalViewSpaceConverter(this.grid.cols);\n}\n\nclass DimensionalViewSpaceConverter<T extends IRowDescriptor | IColDescriptor> extends AbstractDimensionalSpaceConverter<T> {\n  toView(i: number) {\n    return i;\n  }\n  toData(viewCol: number) {\n    return this.gridDimension.converters.virtual.toData(this.toVirtual(viewCol));\n  }\n  toVirtual(viewCol: number) {\n    return this.gridDimension.viewPort.toVirtual(viewCol);\n  }\n  count() {\n    return this.gridDimension.viewPort.count;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/space/view-space-converter.ts","\nimport { IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport { AbstractSpaceConverter } from './converter';\nimport { AbstractDimensionalSpaceConverter } from './dimensional-converter';\n\nexport class VirtualSpaceConverter extends AbstractSpaceConverter {\n  row: AbstractDimensionalSpaceConverter<IRowDescriptor> = new DimensionalVirtualSpaceConverter(this.grid.rows);\n  col: AbstractDimensionalSpaceConverter<IColDescriptor> = new DimensionalVirtualSpaceConverter(this.grid.cols);\n}\n\nclass DimensionalVirtualSpaceConverter<T extends IRowDescriptor | IColDescriptor> extends AbstractDimensionalSpaceConverter<T> {\n  toVirtual(i: number) {\n    return i;\n  }\n  toData(virtualCol: number) {\n    return this.gridDimension.rowColModel.toData(virtualCol);\n  }\n  count() {\n    return this.gridDimension.rowColModel.length(true);\n  }\n\n  toView(virtualRow: number) {\n    return this.gridDimension.viewPort.toReal(virtualRow);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/space/virtual-space-converter.ts","import { IBuilderRenderContext } from '../abstract-row-col-model';\nimport { Grid, IGridDimension } from '../core';\nimport customEvent from '../custom-event';\nimport { IDecorator } from '../decorators';\nimport { EventUnion, isAnnotatedEvent } from '../event-loop';\nimport { RawPositionRange } from '../position-range';\nimport * as util from '../util';\n\ntype IViewLayerDecorator = RawPositionRange & IDecorator & {\n    scrollHorz?: boolean;\n    scrollVert?: boolean;\n    top: number;\n    left: number;\n    bottom: number;\n    right: number;\n};\n\nexport interface IViewLayer {\n    build(elem: HTMLElement): void;\n    draw(): void;\n    eventIsOnCells(e: EventUnion): boolean;\n    setTextContent(elem: Node | undefined, text: string): void;\n    getBorderWidth(): number;\n    _drawCells(): void;\n    _buildCells(): void;\n    _buildCols(): void;\n    _buildRows(): void;\n    _drawDecorators(b: boolean): void;\n    _drawCellClasses(): void;\n}\n\ninterface IBuiltElementMap {\n    [key: string]: Array<HTMLElement | undefined>;\n}\n\nexport function create(grid: Grid) {\n\n    let container: HTMLElement | undefined;\n    let root: HTMLElement;\n    let cellContainerTL: HTMLElement;\n    let cellContainerTR: HTMLElement;\n    let cellContainerBL: HTMLElement;\n    let cellContainerBR: HTMLElement;\n    let decoratorContainerTL: HTMLElement;\n    let decoratorContainerTR: HTMLElement;\n    let decoratorContainerBL: HTMLElement;\n    let decoratorContainerBR: HTMLElement;\n    let borderWidth: number | undefined;\n    let hoveredFixedRow: HTMLElement | undefined;\n    let hoveredRow: HTMLElement | undefined;\n\n    const GRID_CELL_CONTAINER_BASE_CLASS = 'grid-cells';\n    const GRID_VIEW_ROOT_CLASS = 'js-grid-view-root';\n    const CELL_CLASS = 'grid-cell';\n\n    let cells: HTMLElement[][]; // matrix of rendered cell elements;\n    const rows = {\n        fixed: [] as HTMLElement[],\n        nonFixed: [] as HTMLElement[]\n    }; // array of all rendered rows\n    // map from col index to an array of built elements for the column to update on scroll\n    let builtCols: IBuiltElementMap = {};\n    // map from row index to an array of built elements for the row to update on scroll\n    let builtRows: IBuiltElementMap = {};\n\n    let drawRequestedId: number | undefined;\n\n    const viewLayer: IViewLayer = {\n        build(elem: HTMLElement) {\n            cleanup();\n\n            container = elem;\n\n            cellContainerTL = makeCellContainer();\n            cellContainerTL.style.zIndex = '4';\n            cellContainerTR = makeCellContainer();\n            cellContainerTR.style.zIndex = '3';\n            cellContainerBL = makeCellContainer();\n            cellContainerBL.style.zIndex = '3';\n            cellContainerBR = makeCellContainer();\n            cellContainerBR.style.zIndex = '2';\n\n            decoratorContainerTL = makeDecoratorContainer();\n            decoratorContainerTL.style.zIndex = '4';\n            decoratorContainerTR = makeDecoratorContainer();\n            decoratorContainerTR.style.zIndex = '3';\n            decoratorContainerTR.style.overflow = 'hidden';\n            decoratorContainerBL = makeDecoratorContainer();\n            decoratorContainerBL.style.zIndex = '3';\n            decoratorContainerBL.style.overflow = 'hidden';\n            decoratorContainerBR = makeDecoratorContainer();\n            decoratorContainerBR.style.zIndex = '2';\n\n            root = document.createElement('div');\n            root.setAttribute('class', GRID_VIEW_ROOT_CLASS);\n\n            root.appendChild(cellContainerTL);\n            root.appendChild(cellContainerTR);\n            root.appendChild(cellContainerBL);\n            root.appendChild(cellContainerBR);\n\n            root.appendChild(decoratorContainerTL);\n            root.appendChild(decoratorContainerTR);\n            root.appendChild(decoratorContainerBL);\n            root.appendChild(decoratorContainerBR);\n\n            container.appendChild(root);\n\n        },\n        draw() {\n            if (drawRequestedId === undefined) {\n                drawRequestedId = requestAnimationFrame(draw);\n            }\n        },\n        eventIsOnCells(e: EventUnion): boolean {\n            const target = e.target;\n\n            if (!target) {\n                return false;\n            }\n            if (targetIsElement(target) && target.classList.contains('grid-cell') || target === grid.textarea) {\n                // on an actual grid-cell\n                return true;\n            }\n\n            if (!isAnnotatedEvent(e)) {\n                return false;\n            }\n\n            const renderedColElement = builtCols && builtCols[e.realCol];\n            const renderedRowElement = builtRows && builtRows[e.realRow];\n\n            if (renderedColElement && !grid.view.col.get(e.realCol).isBuiltActionable) {\n                const elem = renderedColElement[e.realRow];\n                return isTargetInElem(target, elem);\n            } else if (renderedRowElement && !grid.view.row.get(e.realRow).isBuiltActionable) {\n                const elem = renderedRowElement[e.realCol];\n                return isTargetInElem(target, elem);\n            }\n\n            return false;\n        },\n        setTextContent(elem: Node | undefined, text: string) {\n            if (!elem) {\n                return;\n            }\n            if (elem.firstChild && elem.firstChild.nodeType === 3) {\n                elem.firstChild.nodeValue = text;\n            } else {\n                elem.textContent = text;\n            }\n        },\n        getBorderWidth,\n        _drawCells: drawCells,\n        _buildCells: buildCells,\n        _buildCols: buildCols,\n        _buildRows: buildRows,\n        _drawDecorators: drawDecorators,\n        _drawCellClasses: drawCellClasses,\n    };\n\n    const targetIsElement = (e: EventTarget): e is Element => !!(e as any).classList;\n\n    // add the cell classes through the standard method\n    grid.cellClasses.add(grid.cellClasses.create(0, 0, CELL_CLASS, Infinity, Infinity, 'virtual'));\n\n    const rowHeaderClasses = grid.cellClasses.create(0, 0, 'grid-header grid-row-header', Infinity, 0, 'virtual');\n    const colHeaderClasses = grid.cellClasses.create(0, 0, 'grid-header grid-col-header', 0, Infinity, 'virtual');\n    const fixedColClasses = grid.cellClasses.create(0, -1, 'grid-last-fixed-col', Infinity, 1, 'virtual');\n    const fixedRowClasses = grid.cellClasses.create(-1, 0, 'grid-last-fixed-row', 1, Infinity, 'virtual');\n\n    grid.cellClasses.add(rowHeaderClasses);\n    grid.cellClasses.add(colHeaderClasses);\n    grid.cellClasses.add(fixedRowClasses);\n    grid.cellClasses.add(fixedColClasses);\n\n    grid.eventLoop.bind('grid-col-change', () => {\n        fixedColClasses.left = grid.colModel.numFixed() - 1;\n        rowHeaderClasses.width = grid.colModel.numHeaders();\n    });\n\n    grid.eventLoop.bind('grid-row-change', () => {\n        fixedRowClasses.top = grid.rowModel.numFixed() - 1;\n        colHeaderClasses.height = grid.rowModel.numHeaders();\n    });\n\n    grid.eventLoop.bind('grid-cell-mouse-move', (e) => {\n        let row = rows.fixed[e.realRow];\n        if (!row || !viewLayer.eventIsOnCells(e)) {\n            return;\n        }\n        row.classList.add('hover');\n        if (hoveredFixedRow && hoveredFixedRow !== row) {\n            hoveredFixedRow.classList.remove('hover');\n        }\n        hoveredFixedRow = row;\n        row = rows.nonFixed[e.realRow];\n        if (row) {\n            row.classList.add('hover');\n        }\n        if (hoveredRow && hoveredRow !== row) {\n            hoveredRow.classList.remove('hover');\n        }\n        hoveredRow = row;\n    });\n\n    function makeCellContainer(): HTMLElement {\n        const cellContainer = document.createElement('div');\n        cellContainer.setAttribute('dts', 'grid-cells');\n        cellContainer.setAttribute('class', GRID_CELL_CONTAINER_BASE_CLASS);\n        cellContainer.style.zIndex = '';\n        // cellContainer.style.pointerEvents = 'none';\n        return cellContainer;\n    }\n\n    function makeDecoratorContainer(): HTMLElement {\n        const decoratorContainer = document.createElement('div');\n        decoratorContainer.setAttribute('dts', 'grid-decorators');\n        util.position(decoratorContainer, 0, 0, 0, 0);\n        decoratorContainer.style.zIndex = '';\n        decoratorContainer.style.pointerEvents = 'none';\n        return decoratorContainer;\n    }\n\n    function offsetContainerForPixelScroll() {\n        const modTopPixels = grid.pixelScrollModel.offsetTop;\n        const modLeftPixels = grid.pixelScrollModel.offsetLeft;\n\n        const fixedHeight = grid.virtualPixelCellModel.fixedHeight();\n        const fixedWidth = grid.virtualPixelCellModel.fixedWidth();\n        util.position(cellContainerTL, 0, 0, undefined, undefined, fixedHeight, fixedWidth);\n        util.position(cellContainerBR, 0, 0, 0, 0);\n        util.position3D(cellContainerBR, modTopPixels, modLeftPixels);\n        util.position(cellContainerTR, 0, 0, undefined, 0, fixedHeight);\n        util.position3D(cellContainerTR, 0, modLeftPixels);\n        util.position(cellContainerBL, 0, 0, 0, undefined, undefined, fixedWidth);\n        util.position3D(cellContainerBL, modTopPixels, 0);\n\n        util.position(decoratorContainerTL, 0, 0, undefined, undefined, fixedHeight, fixedWidth);\n        util.position(decoratorContainerBR, 0, 0, 0, 0);\n        util.position3D(decoratorContainerBR, modTopPixels, modLeftPixels);\n        util.position(decoratorContainerTR, 0, fixedWidth, undefined, 0, undefined, undefined);\n        util.position3D(decoratorContainerTR, 0, 0);\n        util.position(decoratorContainerBL, fixedHeight, 0, 0, undefined, undefined, undefined);\n        util.position3D(decoratorContainerBL, 0, 0);\n        grid.decorators.getAlive().forEach((decorator: IViewLayerDecorator) => {\n            let decoratorTopOffset = 0;\n            let decoratorLeftOffset = 0;\n            if (decorator.scrollVert && !decorator.scrollHorz) {\n                decoratorTopOffset = fixedHeight - modTopPixels;\n            } else if (decorator.scrollHorz && !decorator.scrollVert) {\n                decoratorLeftOffset = fixedWidth - modLeftPixels;\n            }\n\n            if (decorator.fixed) {\n                if (decorator.scrollVert) {\n                    decoratorTopOffset += modTopPixels;\n                }\n                if (decorator.scrollHorz) {\n                    decoratorLeftOffset += modLeftPixels;\n                }\n            }\n            if (decorator.boundingBox) {\n                decorator.boundingBox.style.marginTop = -1 * decoratorTopOffset + 'px';\n                decorator.boundingBox.style.marginLeft = -1 * decoratorLeftOffset + 'px';\n            }\n\n        });\n    }\n\n    function measureBorderWidth() {\n        // read the border width, for the rare case of larger than 1px borders, otherwise the draw will default to 1\n        if (borderWidth) {\n            return;\n        }\n        const jsGridCell = cells[0] && cells[0][0];\n        if (jsGridCell) {\n            const oldClass = jsGridCell.className;\n            jsGridCell.className = CELL_CLASS;\n            const computedStyle = getComputedStyle(jsGridCell);\n            const borderWidthProp = computedStyle.getPropertyValue('border-left-width');\n            borderWidth = parseInt(borderWidthProp, 10);\n            jsGridCell.className = oldClass;\n        }\n        borderWidth = (!borderWidth || isNaN(borderWidth)) ? undefined : borderWidth;\n        return borderWidth;\n    }\n\n    function draw() {\n        drawRequestedId = undefined;\n        // return if we haven't built yet\n        if (!container || grid.destroyed) {\n            return;\n        }\n\n        if (!grid.opts.snapToCell && grid.fps.slowCount > 10) {\n            grid.opts.snapToCell = true;\n        }\n\n        const rebuilt = grid.viewPort.isDirty();\n        if (rebuilt) {\n            viewLayer._buildCells();\n        }\n\n        const builtColsDirty = grid.colModel.areBuildersDirty();\n        if (rebuilt || builtColsDirty) {\n            viewLayer._buildCols();\n        }\n\n        const builtRowsDirty = grid.rowModel.areBuildersDirty();\n        if (rebuilt || builtRowsDirty) {\n            viewLayer._buildRows();\n        }\n\n        const cellsPositionOrSizeChanged = grid.colModel.isDirty() || grid.rowModel.isDirty() || grid.cellScrollModel.isDirty();\n\n        if (grid.cellClasses.isDirty() || rebuilt || cellsPositionOrSizeChanged) {\n            viewLayer._drawCellClasses();\n        }\n\n        const drawingCells = rebuilt || cellsPositionOrSizeChanged || builtColsDirty || builtRowsDirty || grid.dataModel.isDirty();\n        if (drawingCells) {\n            viewLayer._drawCells();\n        }\n\n        const drawingDecorators = grid.decorators.isDirty() || rebuilt || cellsPositionOrSizeChanged;\n        if (drawingDecorators) {\n            viewLayer._drawDecorators(cellsPositionOrSizeChanged || rebuilt);\n        }\n\n        if (grid.pixelScrollModel.isOffsetDirty() || drawingDecorators) {\n            offsetContainerForPixelScroll();\n        }\n\n        grid.eventLoop.fire('grid-draw');\n    }\n\n    /* CELL LOGIC */\n    function getBorderWidth() {\n        return borderWidth || 1;\n    }\n\n    function drawCells() {\n        measureBorderWidth();\n        const bWidth = getBorderWidth();\n        const headerRows = grid.rowModel.numHeaders();\n        const headerCols = grid.colModel.numHeaders();\n        let totalVisibleCellWidth = 0;\n        let lastVirtualCol: number | undefined;\n        let lastVirtualRow: number | undefined;\n        // these get calculated once per col and are then cached to save a factor of numRows calls per column\n        const widths: number[] = [];\n        const lefts: number[] = [];\n        const virtualCols: number[] = [];\n\n        function positionRow(row: HTMLElement, height: number, top: number, virtualRow: number) {\n            if (!row) {\n                return;\n            }\n            // seeing the same virtual row twice means we've been clamped and it's time to hide the row\n            if (height === 0 || lastVirtualRow === virtualRow) {\n                row.style.display = 'none';\n                return;\n            }\n            row.style.display = '';\n            row.style.height = height + bWidth + 'px';\n            row.style.top = top + 'px';\n        }\n\n        grid.viewPort.iterateCells(function drawCell(r: number, c: number) {\n            const cell = cells[r][c];\n            // only calculate these once per column since they can't change during draw\n            const width = widths[c] || (widths[c] = grid.viewPort.getColWidth(c));\n            const virtualCol = virtualCols[c] || (virtualCols[c] = grid.viewPort.toVirtualCol(c));\n            // if we got the same vCol we've been clamped and its time to hide this cell\n            // also hide the cell if its width is zero cause ya...\n            if (width === 0 || virtualCol === lastVirtualCol) {\n                cell.style.display = 'none';\n                return;\n            }\n            if (r === 0) {\n                // calculate width for rows later but only do it one time (so on the first row)\n                totalVisibleCellWidth += width;\n            }\n\n            lastVirtualCol = virtualCol;\n            cell.style.display = '';\n            cell.style.width = width + bWidth + 'px';\n            // only calculate these once per column since they can't change during draw\n            const left = lefts[c] || (lefts[c] = grid.viewPort.getColLeft(c));\n\n            cell.style.left = left + 'px';\n\n            const virtualRow = grid.viewPort.toVirtualRow(r);\n\n            const data = (r < headerRows || c < headerCols) ?\n                grid.dataModel.getHeader(virtualRow, virtualCol) :\n                grid.dataModel.get(grid.rowModel.toData(virtualRow), grid.colModel.toData(virtualCol));\n\n            // artificially only get builders for row headers for now\n            let builder = grid.rowModel.get(virtualRow).builder;\n            let hasRowBuilder = true;\n            if (!builder || (virtualCol < headerCols && !builder.includeHeaders)) {\n                hasRowBuilder = false;\n                builder = grid.colModel.get(virtualCol).builder;\n                if (builder && virtualRow < headerRows && !builder.includeHeaders) {\n                    builder = undefined;\n                }\n            }\n\n            let cellChild;\n            if (builder) {\n                const builtElem = (hasRowBuilder) ?\n                    builtRows[virtualRow][c] :\n                    builtCols[virtualCol][r];\n\n                cellChild = builder.update(builtElem, {\n                    virtualCol,\n                    virtualRow,\n                    data\n                });\n            }\n\n            // if we didn't get a child from the builder use a regular text node\n            if (!cellChild) {\n                viewLayer.setTextContent(cell, data.formatted);\n            } else {\n                const notSameElem = cell.firstChild !== cellChild;\n                if (cell.firstChild && notSameElem) {\n                    cell.removeChild(cell.firstChild);\n                }\n                if (notSameElem) {\n                    cell.appendChild(cellChild);\n                }\n\n            }\n        }, function drawRow(r: number) {\n            const height = grid.viewPort.getRowHeight(r);\n            const virtualRow = grid.view.row.toVirtual(r);\n            const top = grid.viewPort.getRowTop(r);\n            positionRow(rows.fixed[r], height, top, virtualRow);\n            positionRow(rows.nonFixed[r], height, top, virtualRow);\n            lastVirtualRow = virtualRow;\n            lastVirtualCol = undefined;\n        });\n\n        rows.nonFixed.forEach((row) => {\n            row.style.width = totalVisibleCellWidth + 'px';\n        });\n        rows.fixed.forEach((row) => {\n            row.style.width = grid.virtualPixelCellModel.fixedWidth() + 'px';\n        });\n\n        if (grid.cellScrollModel.row % 2) {\n            cellContainerBR.className = GRID_CELL_CONTAINER_BASE_CLASS + ' odds';\n            cellContainerBL.className = GRID_CELL_CONTAINER_BASE_CLASS + ' odds';\n        } else {\n            doToAllCellContainers((cellContainer) => {\n                cellContainer.className = GRID_CELL_CONTAINER_BASE_CLASS;\n            });\n\n        }\n    }\n\n    function clearCellContainer(cellContainer: HTMLElement) {\n        while (cellContainer.firstChild) {\n            cellContainer.removeChild(cellContainer.firstChild);\n        }\n    }\n\n    function doToAllCellContainers(fn: (container: HTMLElement) => void) {\n        fn(cellContainerTL);\n        fn(cellContainerTR);\n        fn(cellContainerBL);\n        fn(cellContainerBR);\n    }\n\n    function getCellContainer(r: number, c: number) {\n        const fixedRow = r < grid.rowModel.numFixed();\n        const fixedCol = c < grid.colModel.numFixed();\n        if (fixedRow && fixedCol) {\n            return cellContainerTL;\n        } else if (fixedRow) {\n            return cellContainerTR;\n        } else if (fixedCol) {\n            return cellContainerBL;\n        }\n        return cellContainerBR;\n    }\n\n    function buildRow(r: number) {\n        const row = document.createElement('div');\n        row.setAttribute('class', 'grid-row');\n        row.setAttribute('dts', 'grid-row');\n        row.style.position = 'absolute';\n        row.style.left = '0';\n        if (r < grid.rowModel.numHeaders()) {\n            row.classList.add('grid-is-header');\n        }\n        return row;\n    }\n\n    function buildCells() {\n\n        doToAllCellContainers(clearCellContainer);\n\n        cells = [];\n        rows.fixed = [];\n        rows.nonFixed = [];\n        let row: HTMLElement;\n        grid.viewPort.iterateCells((r, c) => {\n            if (c === 0) {\n                cells[r] = [];\n            }\n            if (c === grid.colModel.numFixed()) {\n                row = rows.nonFixed[r] = buildRow(r);\n            } else if (c === 0) {\n                row = rows.fixed[r] = buildRow(r);\n            }\n            const cell = buildDivCell();\n            cells[r][c] = cell;\n            row.appendChild(cell);\n            getCellContainer(r, c).appendChild(row);\n        });\n    }\n\n    function buildDivCell() {\n        const cell = document.createElement('div');\n        cell.setAttribute('dts', 'grid-cell');\n        const style = cell.style;\n        style.position = 'absolute';\n        style.boxSizing = 'border-box';\n        style.top = '0px';\n        style.bottom = '0px';\n        return cell;\n    }\n\n    /* END CELL LOGIC */\n\n    /* COL BUILDER LOGIC */\n\n    function destroyRenderedElems(oldElems?: Array<HTMLElement | undefined>) {\n        if (!oldElems) {\n            return;\n        }\n        oldElems.forEach((oldElem) => {\n            if (!oldElem) {\n                return;\n            }\n            const destroyEvent = customEvent('grid-rendered-elem-destroy', true);\n            oldElem.dispatchEvent(destroyEvent);\n        });\n    }\n\n    function buildCols() {\n        builtCols = buildDimension(grid.cols, grid.rows, builtCols, (viewCol, viewRow, previousElement) => ({\n            viewRow,\n            viewCol,\n            previousElement\n        }));\n    }\n    /* END COL BUILDER LOGIC */\n\n    /* ROW BUILDER LOGIC\n     *  for now we only build headers\n     * */\n\n    function buildRows() {\n        builtRows = buildDimension(grid.rows, grid.cols, builtRows, (viewRow, viewCol, previousElement) => ({\n            viewRow,\n            viewCol,\n            previousElement\n        }));\n    }\n\n    function buildDimension(\n        dimension: IGridDimension,\n        crossDimension: IGridDimension,\n        previouslyBuiltElems: IBuiltElementMap | undefined,\n        getRenderContext: (dimPos: number, crossDimPos: number, elem: HTMLElement | undefined) => IBuilderRenderContext,\n    ) {\n        const builtElems: IBuiltElementMap = {};\n        for (let i = 0; i < dimension.rowColModel.length(true); i++) {\n            const builder = dimension.rowColModel.get(i).builder;\n            const oldElems = previouslyBuiltElems && previouslyBuiltElems[i];\n\n            if (builder) {\n                builtElems[i] = [];\n                destroyRenderedElems(oldElems);\n                for (let realI = 0; realI < crossDimension.viewPort.count; realI++) {\n                    builtElems[i][realI] = builder.render(\n                        getRenderContext(dimension.converters.virtual.toView(i), realI, oldElems && oldElems[realI])\n                    );\n                }\n            }\n        }\n        return builtElems;\n    }\n    /* END ROW BUILDER LOGIC*/\n\n    /* DECORATOR LOGIC */\n    function setPosition(boundingBox: HTMLElement, top: number, left: number, height: number, width: number): false | void {\n        const style = boundingBox.style;\n        if (height <= 0 || width <= 0) {\n            style.display = 'none';\n            return false;\n        }\n        style.display = '';\n        style.top = top + 'px';\n        style.left = left + 'px';\n        style.height = height + 'px';\n        style.width = width + 'px';\n        style.position = 'absolute';\n    }\n\n    function positionDecorator(bounding: HTMLElement, t: number, l: number, h: number, w: number) {\n        return setPosition(bounding, t, l, util.clamp(h, 0, grid.viewPort.height), util.clamp(w, 0, grid.viewPort.width));\n    }\n\n    function positionCellDecoratorFromViewCellRange(realCellRange: RawPositionRange, boundingBox: HTMLElement) {\n        const realPxRange = grid.viewPort.toPx(realCellRange);\n        return positionDecorator(\n            boundingBox,\n            realPxRange.top,\n            realPxRange.left,\n            realPxRange.height && realPxRange.height + getBorderWidth(),\n            realPxRange.width && realPxRange.width + getBorderWidth()\n        );\n    }\n\n    function createRangeForDescriptor(descriptor: IViewLayerDecorator) {\n        const range = {\n            top: descriptor.top,\n            left: descriptor.left,\n            height: descriptor.height,\n            width: descriptor.width\n        };\n        if (descriptor.space === 'data' && descriptor.units === 'cell') {\n            range.top += grid.rowModel.numHeaders();\n            range.left += grid.colModel.numHeaders();\n        }\n        return range;\n    }\n\n    function drawDecorators(cellsPositionOrSizeChanged: boolean) {\n        const aliveDecorators = grid.decorators.getAlive();\n        aliveDecorators.forEach((decorator: IViewLayerDecorator) => {\n\n            const hasBeenRendered = !!decorator.boundingBox;\n            const boundingBox = decorator.boundingBox || document.createElement('div');\n            if (!hasBeenRendered) {\n                boundingBox.style.pointerEvents = 'none';\n                decorator.boundingBox = boundingBox;\n                const decElement = decorator.render();\n                if (decElement) {\n                    boundingBox.appendChild(decElement);\n                }\n            }\n\n            if (decorator.isDirty() || cellsPositionOrSizeChanged || !hasBeenRendered) {\n\n                let vCol = decorator.left;\n                let vRow = decorator.top;\n                if (decorator.space === 'real') {\n                    vCol = grid.view.col.toVirtual(vCol);\n                    vRow = grid.view.row.toVirtual(vRow);\n                    switch (decorator.units) {\n                        case 'px':\n                            positionDecorator(boundingBox, decorator.top, decorator.left, decorator.height, decorator.width);\n                            break;\n                        case 'cell':\n                            positionCellDecoratorFromViewCellRange(decorator, boundingBox);\n                            break;\n                    }\n                } else if (decorator.space === 'virtual' || decorator.space === 'data') {\n                    if (decorator.space === 'data') {\n                        vCol = grid.data.col.toVirtual(vCol);\n                        vRow = grid.data.row.toVirtual(vRow);\n                    }\n                    switch (decorator.units) {\n                        case 'px':\n                            break;\n                        case 'cell':\n                        /* jshint -W086 */\n                        default:\n                            const range = createRangeForDescriptor(decorator);\n                            const realCellRange = grid.viewPort.intersect(range);\n                            if (realCellRange) {\n                                positionCellDecoratorFromViewCellRange(realCellRange, boundingBox);\n                            } else {\n                                positionDecorator(boundingBox, -1, -1, -1, -1);\n                            }\n                            break;\n                        /* jshint +W086 */\n                    }\n                }\n\n                const parent = boundingBox.parentElement;\n                if (parent) {\n                    parent.removeChild(boundingBox);\n                }\n                const fixedRow = vRow < grid.rowModel.numFixed();\n                const fixedCol = vCol < grid.colModel.numFixed();\n                if (fixedRow && fixedCol) {\n                    decorator.scrollHorz = false;\n                    decorator.scrollVert = false;\n                    decoratorContainerTL.appendChild(boundingBox);\n                } else if (fixedRow) {\n                    decorator.scrollHorz = true;\n                    decorator.scrollVert = false;\n                    decoratorContainerTR.appendChild(boundingBox);\n                } else if (fixedCol) {\n                    decorator.scrollHorz = false;\n                    decorator.scrollVert = true;\n                    decoratorContainerBL.appendChild(boundingBox);\n                } else {\n                    decorator.scrollHorz = true;\n                    decorator.scrollVert = true;\n                    decoratorContainerBR.appendChild(boundingBox);\n                }\n            }\n        });\n\n        removeDecorators(grid.decorators.popAllDead());\n    }\n\n    function removeDecorators(decorators: IDecorator[]) {\n        decorators.forEach((decorator) => {\n            if (!decorator) {\n                return;\n            }\n            const boundingBox = decorator.boundingBox;\n            if (boundingBox) {\n                // if they rendered an element previously we attached it to the bounding box as the only child\n                const renderedElement = boundingBox.firstChild;\n                if (renderedElement) {\n                    // create a destroy dom event that bubbles\n                    const destroyEvent = customEvent('decorator-destroy', true);\n                    renderedElement.dispatchEvent(destroyEvent);\n                }\n                const parent = boundingBox.parentElement;\n                if (parent) {\n                    parent.removeChild(boundingBox);\n                }\n                decorator.boundingBox = undefined;\n            }\n        });\n    }\n\n    /* END DECORATOR LOGIC */\n\n    /* CELL CLASSES LOGIC */\n    function drawCellClasses() {\n        grid.viewPort.iterateCells((r, c) => {\n            const classes = grid.cellClasses.getCachedClasses(grid.view.row.toVirtual(r), grid.view.col.toVirtual(c));\n            cells[r][c].className = classes.join(' ');\n        });\n    }\n\n    /* END CELL CLASSES LOGIC*/\n\n    function destroyPreviouslyBuilt(built: IBuiltElementMap) {\n        if (!built) {\n            return;\n        }\n        Object.keys(built).forEach((key) => {\n            destroyRenderedElems(built[key]);\n        });\n    }\n\n    function cleanup() {\n        removeDecorators(grid.decorators.getAlive().concat(grid.decorators.popAllDead()));\n        destroyPreviouslyBuilt(builtCols);\n        destroyPreviouslyBuilt(builtRows);\n        if (!container) {\n            return;\n        }\n        const gridViewRoots = container.querySelectorAll('.' + GRID_VIEW_ROOT_CLASS);\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < gridViewRoots.length; ++i) {\n            container.removeChild(gridViewRoots[i]);\n        }\n    }\n\n    function isTargetInElem(target: EventTarget | undefined, elem: HTMLElement | undefined) {\n        if (!target || !targetIsElement(target)) {\n            return false;\n        }\n        let t: Element | null = target;\n        while (t && !t.classList.contains('grid-container')) {\n            if (t === elem) {\n                return true;\n            }\n            t = t.parentElement;\n        }\n        return false;\n    }\n\n    grid.eventLoop.bind('grid-destroy', () => {\n        cleanup();\n        if (drawRequestedId) {\n            cancelAnimationFrame(drawRequestedId);\n        }\n        viewLayer.draw = () => { /* noop */ };\n    });\n\n    return viewLayer;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/view-layer/index.ts","import { Grid, IGridDimension } from '../core';\nimport debounce, { IDebounceFunction } from '../debounce';\nimport makeDirtyClean from '../dirty-clean';\nimport addDirtyProps from '../dirty-props';\nimport {\n    RawPositionRange,\n} from '../position-range';\nimport * as rangeUtil from '../range-util';\nimport * as util from '../util';\n\nexport interface IViewPort {\n    rowInfo: IViewPortDimensionInfo;\n    colInfo: IViewPortDimensionInfo;\n    _onResize: IDebounceFunction;\n    shortDebouncedResize: IDebounceFunction;\n\n    // BEGIN: methods / properties proxied to a dimension impl\n    rows: IViewPortDimensionInfo['count'];\n    cols: IViewPortDimensionInfo['count'];\n    top: IViewPortDimensionInfo['clientPx']['start'];\n    left: IViewPortDimensionInfo['clientPx']['start'];\n    width: IViewPortDimensionInfo['size'];\n    height: IViewPortDimensionInfo['size'];\n    toGridX: IViewPortDimensionInfo['clientPx']['toGrid'];\n    toGridY: IViewPortDimensionInfo['clientPx']['toGrid'];\n    toVirtualRow: IViewPortDimensionInfo['toVirtual'];\n    toVirtualCol: IViewPortDimensionInfo['toVirtual'];\n    rowIsInView: IViewPortDimensionInfo['isInView'];\n    colIsInView: IViewPortDimensionInfo['isInView'];\n    toRealRow: IViewPortDimensionInfo['toReal'];\n    toRealCol: IViewPortDimensionInfo['toReal'];\n    clampRow: IViewPortDimensionInfo['clampCell'];\n    clampCol: IViewPortDimensionInfo['clampCell'];\n    clampY: IViewPortDimensionInfo['clampPx'];\n    clampX: IViewPortDimensionInfo['clampPx'];\n    getRowTop: IViewPortDimensionInfo['toPx'];\n    getColLeft: IViewPortDimensionInfo['toPx'];\n    getVirtualRowByTop: IViewPortDimensionInfo['toVirtualFromPx'];\n    getVirtualColByLeft: IViewPortDimensionInfo['toVirtualFromPx'];\n    getRowByTop: IViewPortDimensionInfo['toViewFromPx'];\n    getColByLeft: IViewPortDimensionInfo['toViewFromPx'];\n    getRowHeight: IViewPortDimensionInfo['sizeOf'];\n    getColWidth: IViewPortDimensionInfo['sizeOf'];\n    // END: methods / properties proxied to a dimension impl\n\n    isDirty(): boolean;\n    sizeToContainer(elem: HTMLElement): void;\n    _resize(): void;\n    toPx(realCellRange: RawPositionRange): RawPositionRange;\n    intersect(range: RawPositionRange): RawPositionRange | null;\n    iterateCells(\n        cellFn: (r: number, c: number) => void,\n        rowFn?: (r: number) => void,\n        optionalMaxRow?: number,\n        optionalMaxCol?: number\n    ): void;\n}\n\nexport interface IViewPortDimensionInfo {\n    count: number;\n    size: number;\n    clientPx: {\n        start: number;\n        toGrid(clientPx: number): number;\n    };\n    _numFixed: number;\n    _getLengthBetweenCoords(s: number, e: number, inclusive?: boolean): number;\n    isInView(virtualCoord: number): boolean;\n    toVirtual(viewCoord: number): number;\n    toReal(virtualCoord: number): number;\n    clampCell(coord: number): number;\n    clampPx(px: number): number;\n    toPx(coord: number): number;\n    toVirtualFromPx(px: number): number;\n    toViewFromPx(px: number): number;\n    sizeOf(viewCoord: number): number;\n    totalSize(): number;\n    updateSize(newSize: number): boolean;\n    intersect(intersection: RawPositionRange, range: RawPositionRange): RawPositionRange | null;\n}\n\nexport function create(grid: Grid) {\n    const dirtyClean = makeDirtyClean(grid);\n    let container: HTMLElement | undefined;\n\n    // these probably trigger reflow so we may need to think about caching the value and updating it at on draws or something\n    function getFirstClientRect() {\n        return container && container.getClientRects && container.getClientRects()[0];\n    }\n\n    function makeDimension(\n        gridDimension: IGridDimension\n    ) {\n        function getVirtualRowColUnsafe(coord: number) {\n            // could cache this on changes i.e. row-change or col-change events\n            const numFixed = viewDimension._numFixed;\n            if (coord < numFixed) {\n                return coord;\n            }\n            return coord + gridDimension.cellScroll.position;\n        }\n\n        function getLengthBetweenViewCoords(\n            startCoord: number,\n            endCoord: number,\n            inclusive?: boolean\n        ) {\n            const toVirtual = viewDimension.toVirtual;\n            const lengthFn = gridDimension.virtualPixelCell.sizeOf;\n            const clampFn = viewDimension.clampCell;\n            let pos = 0;\n            const numFixed = viewDimension._numFixed;\n            const isInNonfixedArea = endCoord >= numFixed;\n            const isInFixedArea = startCoord < numFixed;\n            const exclusiveOffset = (inclusive ? 0 : 1);\n            if (isInFixedArea) {\n                const fixedEndCoord = (isInNonfixedArea ? numFixed - 1 : endCoord - exclusiveOffset);\n                pos += lengthFn(startCoord, fixedEndCoord);\n            }\n            if (isInNonfixedArea) {\n                const startOfNonFixed = isInFixedArea ? toVirtual(numFixed) : toVirtual(startCoord);\n                pos += lengthFn(startOfNonFixed, toVirtual(clampFn(endCoord)) - exclusiveOffset);\n            }\n            return pos;\n        }\n\n        function getRowOrColFromPosition(pos: number, returnVirtual?: boolean) {\n            // we could do this slighly faster with binary search to get log(n) instead of n,\n            // but will only do it if we actually need to optimize this\n            const viewMax = viewDimension.count;\n            const toVirtual = viewDimension.toVirtual;\n            const lengthFn = gridDimension.virtualPixelCell.sizeOf;\n            const fixedSize = gridDimension.virtualPixelCell.fixedSize();\n            let summedLength = grid.viewLayer.getBorderWidth() + (pos <= fixedSize ? 0 : gridDimension.pixelScroll.offset);\n            for (let i = 0; i < viewMax; i++) {\n                const virtual = toVirtual(i);\n                const length = lengthFn(virtual);\n                const newSum = summedLength + length;\n                if (newSum >= pos) {\n                    return returnVirtual ? virtual : i;\n                }\n                summedLength = newSum;\n            }\n            return NaN;\n        }\n\n        function calculateMaxLengths(totalLength: number) {\n            const lengthMethod = gridDimension.virtualPixelCell.sizeOf;\n            const numFixed = gridDimension.rowColModel.numFixed();\n            let windowLength = 0;\n            let maxSize = 0;\n            let fixedLength = 0;\n            let windowStartIndex = numFixed;\n\n            for (let fixed = 0; fixed < numFixed; fixed++) {\n                fixedLength += lengthMethod(fixed);\n            }\n\n            let maxLength = 0;\n            for (let index = numFixed; index < gridDimension.rowColModel.length(true); index++) {\n                const lengthOfIindex = lengthMethod(index);\n                if (lengthOfIindex > maxLength) {\n                    maxLength = lengthOfIindex;\n                }\n            }\n            totalLength += maxLength;\n\n            // it might be safer to actually sum the lengths in the virtualPixelCellModel but for now here is ok\n            for (let index = numFixed; index < gridDimension.rowColModel.length(true); index++) {\n                const lengthOfIindex = lengthMethod(index);\n                windowLength += lengthOfIindex;\n                while (windowLength + fixedLength > totalLength && windowStartIndex < index) {\n                    windowLength -= lengthMethod(windowStartIndex);\n                    windowStartIndex++;\n                }\n                const windowSize = index - windowStartIndex + 1; // add the one because we want the last index that didn't fit\n                if (windowSize > maxSize) {\n                    maxSize = windowSize;\n                }\n\n            }\n            return Math.min(maxSize + numFixed + 1, gridDimension.rowColModel.length(true));\n        }\n\n        const viewDimension: IViewPortDimensionInfo = addDirtyProps({\n            count: 0,\n            size: 0,\n            clientPx: {\n                get start() {\n                    const clientRect = getFirstClientRect();\n                    return clientRect && gridDimension.positionRange.getPosition(clientRect) || 0;\n                },\n                toGrid(clientPx: number) {\n                    return clientPx - viewDimension.clientPx.start;\n                }\n            },\n            _numFixed: 0,\n            isInView(virtualCoord: number) {\n                const realRow = viewDimension.toReal(virtualCoord);\n                return !isNaN(realRow) &&\n                    getLengthBetweenViewCoords(0, realRow, true) < viewDimension.totalSize();\n            },\n            toVirtual(viewCoord: number) {\n                const virtualRowCol = getVirtualRowColUnsafe(viewCoord);\n                return gridDimension.virtualPixelCell.clampCell(virtualRowCol);\n            },\n            toReal(virtualCoord: number) {\n                const numFixed = viewDimension._numFixed;\n                if (virtualCoord < numFixed) {\n                    return virtualCoord;\n                }\n                const maxViewPortIndex = viewDimension.count - 1;\n                return util.clamp(virtualCoord - gridDimension.cellScroll.position, numFixed, maxViewPortIndex, true);\n            },\n            clampCell(coord: number) {\n                return util.clamp(coord, 0, viewDimension.count - 1);\n            },\n            clampPx(px: number) {\n                return util.clamp(px, 0, viewDimension.totalSize());\n            },\n            toPx(coord: number) {\n                return getLengthBetweenViewCoords(0, coord);\n            },\n            toVirtualFromPx(px: number) {\n                return getRowOrColFromPosition(px, true);\n            },\n            toViewFromPx(px: number) {\n                return getRowOrColFromPosition(px);\n            },\n            sizeOf(viewCoord: number) {\n                return gridDimension.virtualPixelCell.sizeOf(viewDimension.toVirtual(viewDimension.clampCell(viewCoord)));\n            },\n            totalSize() {\n                return viewDimension.size;\n            },\n            // TODO: based on looking at the code i think range can sometimes be Partial, def worth checking for npes\n            intersect(intersection: RawPositionRange, range: RawPositionRange) {\n                const numFixed = viewDimension._numFixed;\n                const fixedRange = [0, numFixed];\n\n                const virtualRange = [gridDimension.positionRange.getPosition(range), gridDimension.positionRange.getSize(range)];\n                const fixedIntersection = rangeUtil.intersect(fixedRange, virtualRange);\n                const scrollRange = [numFixed, viewDimension.count - numFixed];\n                virtualRange[0] -= gridDimension.cellScroll.position;\n                const scrollIntersection = rangeUtil.intersect(scrollRange, virtualRange);\n                const resultRange = rangeUtil.union(fixedIntersection, scrollIntersection);\n                if (!resultRange) {\n                    return null;\n                }\n\n                gridDimension.positionRange.setPosition(intersection, resultRange[0]);\n                gridDimension.positionRange.setSize(intersection, resultRange[1]);\n                return intersection;\n            },\n            updateSize(newSize: number) {\n                const oldSize = viewDimension.size;\n                viewDimension.size = newSize;\n                viewDimension.count = calculateMaxLengths(newSize);\n                return oldSize !== newSize;\n            },\n            _getLengthBetweenCoords: getLengthBetweenViewCoords\n        }, ['count', 'size'], [dirtyClean]);\n        return viewDimension;\n    }\n\n    const dimensions = {\n        rowInfo: makeDimension(grid.rows),\n        colInfo: makeDimension(grid.cols)\n    };\n\n    const viewPort: IViewPort = {\n        _onResize: debounce(() => {\n            viewPort._resize();\n        }, 200),\n        shortDebouncedResize: debounce(() => {\n            viewPort._resize();\n        }, 1),\n        isDirty: dirtyClean.isDirty,\n\n        sizeToContainer(elem: HTMLElement) {\n            container = elem;\n            const isHeightChange = viewPort.rowInfo.updateSize(elem.offsetHeight);\n            const isWidthChange = viewPort.colInfo.updateSize(elem.offsetWidth);\n            const event = {\n                type: 'grid-viewport-change',\n                isWidthChange,\n                isHeightChange,\n                isSizeChange: isWidthChange || isHeightChange,\n            };\n            grid.eventLoop.fire(event);\n        },\n        _resize() {\n            if (container) {\n                viewPort.sizeToContainer(container);\n            }\n        },\n        toPx(realCellRange: RawPositionRange) {\n            return {\n                top: viewPort.getRowTop(realCellRange.top),\n                left: viewPort.getColLeft(realCellRange.left),\n                height: viewPort.rowInfo._getLengthBetweenCoords(realCellRange.top, realCellRange.top + realCellRange.height - 1, true),\n                width: viewPort.colInfo._getLengthBetweenCoords(realCellRange.left, realCellRange.left + realCellRange.width - 1, true)\n            };\n        },\n        intersect(range: RawPositionRange) {\n            // assume virtual cells for now\n            const intersection = viewPort.rowInfo.intersect({} as any, range);\n            if (!intersection) {\n                return null;\n            }\n            return viewPort.colInfo.intersect(intersection, range);\n        },\n        iterateCells(\n            cellFn: (r: number, c: number) => void,\n            rowFn?: (r: number) => void,\n            maxRow: number = Infinity,\n            maxCol: number = Infinity\n        ) {\n            for (let r = 0; r < Math.min(viewPort.rows, maxRow); r++) {\n                if (rowFn) {\n                    rowFn(r);\n                }\n                if (cellFn) {\n                    for (let c = 0; c < Math.min(viewPort.cols, maxCol); c++) {\n                        cellFn(r, c);\n\n                    }\n                }\n            }\n        },\n        // BEGIN: proxy to dimension\n        get rows() {\n            return dimensions.rowInfo.count;\n        },\n        set rows(r: number) {\n            dimensions.rowInfo.count = r;\n        },\n        get cols() {\n            return dimensions.colInfo.count;\n        },\n        set cols(c: number) {\n            dimensions.colInfo.count = c;\n        },\n        get height() {\n            return dimensions.rowInfo.size;\n        },\n        set height(s: number) {\n            dimensions.rowInfo.size = s;\n        },\n        get width() {\n            return dimensions.colInfo.size;\n        },\n        set width(s: number) {\n            dimensions.colInfo.size = s;\n        },\n        get top() {\n            return dimensions.rowInfo.clientPx.start;\n        },\n        get left() {\n            return dimensions.colInfo.clientPx.start;\n        },\n        toGridY: dimensions.rowInfo.clientPx.toGrid,\n        toGridX: dimensions.colInfo.clientPx.toGrid,\n        toVirtualRow: dimensions.rowInfo.toVirtual,\n        toVirtualCol: dimensions.colInfo.toVirtual,\n        rowIsInView: dimensions.rowInfo.isInView,\n        colIsInView: dimensions.colInfo.isInView,\n        toRealRow: dimensions.rowInfo.toReal,\n        toRealCol: dimensions.colInfo.toReal,\n        clampRow: dimensions.rowInfo.clampCell,\n        clampCol: dimensions.colInfo.clampCell,\n        clampY: dimensions.rowInfo.clampPx,\n        clampX: dimensions.colInfo.clampPx,\n        getRowTop: dimensions.rowInfo.toPx,\n        getColLeft: dimensions.colInfo.toPx,\n        getVirtualRowByTop: dimensions.rowInfo.toVirtualFromPx,\n        getVirtualColByLeft: dimensions.colInfo.toVirtualFromPx,\n        getRowByTop: dimensions.rowInfo.toViewFromPx,\n        getColByLeft: dimensions.colInfo.toViewFromPx,\n        getRowHeight: dimensions.rowInfo.sizeOf,\n        getColWidth: dimensions.colInfo.sizeOf,\n        // END: proxy to dimension\n        rowInfo: dimensions.rowInfo,\n        colInfo: dimensions.colInfo,\n    };\n\n    grid.eventLoop.bind('grid-destroy', () => {\n        viewPort._onResize.cancel();\n        viewPort.shortDebouncedResize.cancel();\n    });\n\n    grid.eventLoop.bind(window, 'resize', () => {\n        // we don't bind the handler directly so that tests can mock it out\n        viewPort._onResize();\n    });\n\n    grid.eventLoop.bind('grid-row-change', () => {\n        viewPort.rowInfo._numFixed = grid.rowModel.numFixed();\n        viewPort.shortDebouncedResize();\n    });\n\n    grid.eventLoop.bind('grid-col-change', () => {\n        viewPort.colInfo._numFixed = grid.colModel.numFixed();\n        viewPort.shortDebouncedResize();\n    });\n\n    return viewPort;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/view-port/index.ts","import { Grid, IGridDimension } from '../core';\nimport * as  util from '../util';\n\n// all pixels are assumed to be in the virtual world, no real world pixels are dealt with here :)\nexport interface IVirtualPixelCellDimensionInfo {\n    toCellFromPx(px: number): number;\n    clampCell(cell: number): number;\n    sizeOf(startCell: number, endCell?: number): number;\n    totalSize(): number;\n    fixedSize(): number;\n}\n\nexport interface IVirtualPixelCellModel {\n    rows: IVirtualPixelCellDimensionInfo;\n    cols: IVirtualPixelCellDimensionInfo;\n    getRow: IVirtualPixelCellDimensionInfo['toCellFromPx'];\n    getCol: IVirtualPixelCellDimensionInfo['toCellFromPx'];\n    clampRow: IVirtualPixelCellDimensionInfo['clampCell'];\n    clampCol: IVirtualPixelCellDimensionInfo['clampCell'];\n    height: IVirtualPixelCellDimensionInfo['sizeOf'];\n    width: IVirtualPixelCellDimensionInfo['sizeOf'];\n    totalWidth: IVirtualPixelCellDimensionInfo['totalSize'];\n    totalHeight: IVirtualPixelCellDimensionInfo['totalSize'];\n    fixedWidth: IVirtualPixelCellDimensionInfo['fixedSize'];\n    fixedHeight: IVirtualPixelCellDimensionInfo['fixedSize'];\n}\n\nfunction makeDimension(gridDimension: IGridDimension) {\n    const dimension: IVirtualPixelCellDimensionInfo = {\n        toCellFromPx(px: number) {\n            if (px < 0) {\n                return NaN;\n            }\n            let sumLength = 0;\n            for (let r = 0; r < gridDimension.rowColModel.length(true); r++) {\n                sumLength += gridDimension.rowColModel.sizeOf(r);\n                if (px < sumLength) {\n                    return r;\n                }\n            }\n            return NaN;\n        },\n        clampCell(cell: number) {\n            const maxRowCol = gridDimension.rowColModel.length(true) - 1;\n            return util.clamp(cell, 0, maxRowCol);\n        },\n        sizeOf(start: number, end?: number) {\n            let length = 0;\n            if (end != undefined && end < start) {\n                return 0;\n            }\n            end = util.isNumber(end) ? end : start;\n            end = dimension.clampCell(end);\n            start = dimension.clampCell(start);\n            for (let i = start; i <= end; i++) {\n                length += gridDimension.rowColModel.sizeOf(i);\n            }\n            return length;\n        },\n        totalSize() {\n            return dimension.sizeOf(0, gridDimension.rowColModel.length(true) - 1);\n        },\n        fixedSize() {\n            return dimension.sizeOf(0, gridDimension.rowColModel.numFixed() - 1);\n        },\n    };\n    return dimension;\n}\n\nexport function create(grid: Grid) {\n\n    const dimensions = {\n        rows: makeDimension(grid.rows),\n        cols: makeDimension(grid.cols),\n    };\n    const virtualPixelCellModel: IVirtualPixelCellModel = {\n        getRow: dimensions.rows.toCellFromPx,\n        getCol: dimensions.cols.toCellFromPx,\n        clampRow: dimensions.rows.clampCell,\n        clampCol: dimensions.cols.clampCell,\n        height: dimensions.rows.sizeOf,\n        width: dimensions.cols.sizeOf,\n        totalHeight: dimensions.rows.totalSize,\n        totalWidth: dimensions.cols.totalSize,\n        fixedHeight: dimensions.rows.fixedSize,\n        fixedWidth: dimensions.cols.fixedSize,\n        rows: dimensions.rows,\n        cols: dimensions.cols,\n    };\n\n    function sizeChangeListener() {\n        // for now we don't cache anything about this so we just notify\n        grid.eventLoop.fire('grid-virtual-pixel-cell-change');\n    }\n\n    grid.eventLoop.bind('grid-col-change', sizeChangeListener);\n    grid.eventLoop.bind('grid-row-change', sizeChangeListener);\n\n    return virtualPixelCellModel;\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/virtual-pixel-cell-model/index.ts","require('es6-object-assign').polyfill();\n\nimport { IAbstractRowColModel, IColDescriptor, IRowDescriptor } from '../abstract-row-col-model';\nimport creatCellClasses, { ICellClasses } from '../cell-classes';\nimport createCellKeyboardModel, { ICellKeyboardModel } from '../cell-keyboard-model';\nimport cellMouseModel, { ICellMouseModel, IEventDimensionInfoGetter } from '../cell-mouse-model';\nimport createCellScrollModel, { ICellScrollModel } from '../cell-scroll-model';\nimport createColModel, { ColModel } from '../col-model';\nimport createColReorder, { IColReorder } from '../col-reorder';\nimport createColResize, { IColResize } from '../col-resize';\nimport createCopyPaste, { ICopyPaste } from '../copy-paste';\nimport { IDataModel } from '../data-model';\nimport createDataModel, { RowLoader } from '../data-model';\nimport createDecorators, { IDecoratorModel } from '../decorators';\nimport makeDirtyClean from '../dirty-clean';\nimport createEditModel, { IEditModel } from '../edit-model';\nimport createEventLoop, { EventLoop, EventUnion } from '../event-loop';\nimport createFps, { IFps } from '../fps';\nimport createNavigationModel, { INavigationModel } from '../navigation-model';\nimport createPixelScrollModel, { IPixelScrollDimensionInfo, IPixelScrollModel } from '../pixel-scroll-model';\nimport { colPositionRangeDimension, IPositionRangeDimension, rowPositionRangeDimension } from '../position-range';\nimport createRowModel, { RowModel } from '../row-model';\nimport createShowHiddenCols, { IShowHiddenCols } from '../show-hidden-cols';\nimport { AbstractSpaceConverter } from '../space/converter';\nimport { DataSpaceConverter } from '../space/data-space-converter';\nimport { AbstractDimensionalSpaceConverter } from '../space/dimensional-converter';\nimport { ViewSpaceConverter } from '../space/view-space-converter';\nimport { VirtualSpaceConverter } from '../space/virtual-space-converter';\nimport * as util from '../util';\nimport createViewLayer, { IViewLayer } from '../view-layer';\nimport createViewPort, { IViewPort, IViewPortDimensionInfo } from '../view-port';\nimport createVirtualPixelCellModel, { IVirtualPixelCellDimensionInfo, IVirtualPixelCellModel } from '../virtual-pixel-cell-model';\n\nconst escapeStack = require('escape-stack');\nconst elementClass = require('element-class');\n\nexport interface IGridOpts {\n  snapToCell?: boolean;\n  allowEdit?: boolean;\n  loadRows?: RowLoader;\n  col?: {\n    disableReorder?: boolean;\n    disableResize?: boolean;\n  };\n}\n\nexport type EscapeStackHandler = () => boolean | void;\nexport type EscapeStackRemover = () => void;\n\nexport interface IEscapeStack {\n  add: (handler: EscapeStackHandler) => EscapeStackRemover;\n}\n\nexport interface IGridDimension {\n  rowColModel: IAbstractRowColModel;\n  viewPort: IViewPortDimensionInfo;\n  pixelScroll: IPixelScrollDimensionInfo;\n  cellScroll: ICellScrollDimensionInfo;\n  positionRange: IPositionRangeDimension;\n  cellMouse: IEventDimensionInfoGetter;\n  virtualPixelCell: IVirtualPixelCellDimensionInfo;\n  converters: {\n    virtual: AbstractDimensionalSpaceConverter<IRowDescriptor | IColDescriptor>;\n    view: AbstractDimensionalSpaceConverter<IRowDescriptor | IColDescriptor>;\n    data: AbstractDimensionalSpaceConverter<IRowDescriptor | IColDescriptor>;\n  };\n}\n\nexport interface ICellScrollDimensionInfo {\n  position: number;\n}\n\nexport interface IGridCore {\n  opts: IGridOpts;\n  escapeStack: IEscapeStack;\n  focused: boolean;\n  destroyed: boolean;\n  container?: HTMLElement;\n  textarea: HTMLTextAreaElement;\n  data: AbstractSpaceConverter;\n  virtual: AbstractSpaceConverter;\n  view: AbstractSpaceConverter;\n  timeout: typeof window.setTimeout;\n  interval: typeof window.setInterval;\n  requestDraw: () => void;\n  build: (container: HTMLElement) => void;\n  makeDirtyClean: () => any;\n  destroy: () => void;\n  eventIsOnCells: (e: EventUnion) => boolean;\n  rows: IGridDimension;\n  cols: IGridDimension;\n}\n\nexport interface IGridModels {\n  eventLoop: EventLoop;\n  decorators: IDecoratorModel;\n  cellClasses: ICellClasses;\n  rowModel: RowModel;\n  colModel: ColModel;\n  dataModel: IDataModel;\n  virtualPixelCellModel: IVirtualPixelCellModel;\n  cellScrollModel: ICellScrollModel;\n  cellMouseModel: ICellMouseModel;\n  cellKeyboardModel: ICellKeyboardModel;\n  fps: IFps;\n  viewPort: IViewPort;\n  viewLayer: IViewLayer;\n  colReorder: IColReorder;\n  editModel: IEditModel;\n  navigationModel: INavigationModel;\n  pixelScrollModel: IPixelScrollModel;\n  showHiddenCols: IShowHiddenCols;\n  colResize: IColResize;\n  copyPaste: ICopyPaste;\n}\n\nexport type Grid = IGridCore & IGridModels;\nexport function create(opts: IGridOpts = {}): Grid {\n  const lazyGetterMap: { [key: string]: any } = {};\n\n  const lazyGetter = <T>(idx: string, getFn: () => T) => {\n    if (lazyGetterMap[idx] === undefined) {\n      lazyGetterMap[idx] = getFn();\n    }\n    return lazyGetterMap[idx] as T;\n  };\n  let userSuppliedEscapeStack: IEscapeStack;\n  let drawRequested = false;\n  const timeouts: number[] = [];\n  const intervals: number[] = [];\n  const gridCore: IGridCore = {\n    opts,\n    focused: false,\n    destroyed: false,\n    textarea: createFocusTextArea(),\n    get escapeStack(): IEscapeStack {\n      return userSuppliedEscapeStack || escapeStack(true);\n    },\n    set escapeStack(v: IEscapeStack) {\n      userSuppliedEscapeStack = v;\n    },\n    requestDraw: () => {\n      if (!grid.viewLayer || !grid.viewLayer.draw) {\n        return;\n      }\n      if (!grid.eventLoop.isRunning) {\n        grid.viewLayer.draw();\n      } else {\n        drawRequested = true;\n      }\n    },\n    get data() {\n      return lazyGetter('data', () => new DataSpaceConverter(grid));\n    },\n    get view() {\n      return lazyGetter('view', () => new ViewSpaceConverter(grid));\n    },\n    get virtual() {\n      return lazyGetter('virtual', () => new VirtualSpaceConverter(grid));\n    },\n    timeout() {\n      if (grid.destroyed) {\n        return;\n      }\n      const id = window.setTimeout.apply(window, arguments);\n      timeouts.push(id);\n      return id;\n    },\n    interval() {\n      if (grid.destroyed) {\n        return;\n      }\n      const id = window.setInterval.apply(window, arguments);\n      intervals.push(id);\n      return id;\n    },\n    build(container: HTMLElement) {\n      grid.container = container;\n      setupTextareaForContainer(grid.textarea, container);\n      grid.viewPort.sizeToContainer(container);\n      grid.viewLayer.build(container);\n      grid.eventLoop.setContainer(container);\n      container.style.overflow = 'hidden';\n      // the container should never actually scroll, but the browser does automatically sometimes so let's reset it when that happens\n      container.addEventListener('scroll', () => {\n        container.scrollTop = 0;\n        container.scrollLeft = 0;\n      });\n    },\n    makeDirtyClean() {\n      return makeDirtyClean(grid);\n    },\n    eventIsOnCells(e: EventUnion) {\n      return grid.viewLayer.eventIsOnCells(e);\n    },\n    destroy() {\n      grid.eventLoop.fire('grid-destroy');\n    },\n    rows: {\n      get rowColModel() {\n        return grid.rowModel;\n      },\n      get viewPort() {\n        return grid.viewPort.rowInfo;\n      },\n      get cellScroll() {\n        return grid.cellScrollModel.rowInfo;\n      },\n      get pixelScroll() {\n        return grid.pixelScrollModel.y;\n      },\n      get positionRange() {\n        return rowPositionRangeDimension;\n      },\n      get cellMouse() {\n        return grid.cellMouseModel.rowInfo;\n      },\n      get virtualPixelCell() {\n        return grid.virtualPixelCellModel.rows;\n      },\n      converters: {\n        get virtual() {\n          return gridCore.virtual.row;\n        },\n        get view() {\n          return gridCore.view.row;\n        },\n        get data() {\n          return gridCore.data.row;\n        },\n      }\n    },\n    cols: {\n      get rowColModel() {\n        return grid.colModel;\n      },\n      get viewPort() {\n        return grid.viewPort.colInfo;\n      },\n      get cellScroll() {\n        return grid.cellScrollModel.colInfo;\n      },\n      get pixelScroll() {\n        return grid.pixelScrollModel.x;\n      },\n      get positionRange() {\n        return colPositionRangeDimension;\n      },\n      get cellMouse() {\n        return grid.cellMouseModel.colInfo;\n      },\n      get virtualPixelCell() {\n        return grid.virtualPixelCellModel.cols;\n      },\n      converters: {\n        get virtual() {\n          return gridCore.virtual.col;\n        },\n        get view() {\n          return gridCore.view.col;\n        },\n        get data() {\n          return gridCore.data.col;\n        },\n      }\n    }\n  };\n\n  const grid: Grid = gridCore as any;\n\n  grid.eventLoop = createEventLoop();\n  grid.decorators = createDecorators(grid);\n  grid.cellClasses = creatCellClasses(grid);\n  grid.rowModel = createRowModel(grid);\n  grid.colModel = createColModel(grid);\n  grid.dataModel = createDataModel(grid, opts.loadRows);\n  grid.virtualPixelCellModel = createVirtualPixelCellModel(grid);\n  grid.cellScrollModel = createCellScrollModel(grid);\n  grid.cellMouseModel = cellMouseModel(grid);\n  grid.cellKeyboardModel = createCellKeyboardModel(grid);\n  grid.fps = createFps(grid);\n  grid.viewPort = createViewPort(grid);\n  grid.viewLayer = createViewLayer(grid);\n\n  if (!(opts.col && opts.col.disableReorder)) {\n    grid.colReorder = createColReorder(grid);\n  }\n\n  if (opts.allowEdit) {\n    grid.editModel = createEditModel(grid);\n  }\n\n  grid.navigationModel = createNavigationModel(grid);\n\n  grid.pixelScrollModel = createPixelScrollModel(grid);\n  grid.showHiddenCols = createShowHiddenCols(grid);\n\n  if (!(opts.col && opts.col.disableResize)) {\n    grid.colResize = createColResize(grid);\n  }\n  grid.copyPaste = createCopyPaste(grid);\n\n  // the order here matters because some of these depend on each other\n\n  // things with logic that also register decorators (slightly less core than the other models)\n\n  grid.eventLoop.addExitListener(() => {\n    if (drawRequested) {\n      grid.viewLayer.draw();\n    }\n  });\n\n  function setupTextareaForContainer(textarea: HTMLTextAreaElement, container: HTMLElement) {\n    textarea.addEventListener('focus', () => {\n      if (container) {\n        elementClass(container).add('focus');\n      }\n      textarea.select();\n      grid.focused = true;\n      grid.eventLoop.fire('grid-focus');\n    });\n\n    textarea.addEventListener('blur', () => {\n      if (container) {\n        elementClass(container).remove('focus');\n      }\n      grid.focused = false;\n      grid.eventLoop.fire('grid-blur');\n    });\n\n    let widthResetTimeout: number | undefined;\n    // TODO: type the interceptor properly\n    grid.eventLoop.addInterceptor((e: MouseEvent) => {\n      if (e.type !== 'mousedown' || e.button !== 2) {\n        return;\n      }\n      textarea.style.width = '100%';\n      textarea.style.height = '100%';\n      textarea.style.zIndex = '1';\n      if (widthResetTimeout) {\n        clearTimeout(widthResetTimeout);\n      }\n      widthResetTimeout = window.setTimeout(() => {\n        textarea.style.zIndex = '0';\n        textarea.style.width = '0px';\n        textarea.style.height = '1px';\n      }, 1);\n    });\n\n    container.appendChild(textarea);\n    if (!container.getAttribute('tabIndex')) {\n      container.tabIndex = -1;\n    }\n    container.addEventListener('focus', () => {\n      if (textarea) {\n        textarea.focus();\n      }\n    });\n  }\n\n  function createFocusTextArea() {\n    const textarea = document.createElement('textarea');\n    textarea.setAttribute('dts', 'grid-textarea');\n    util.position(textarea, 0, 0);\n    textarea.style.width = '0px';\n    textarea.style.height = '1px';\n    textarea.style.maxWidth = '100%';\n    textarea.style.maxHeight = '100%';\n    textarea.style.zIndex = '0';\n    textarea.style.overflow = 'hidden';\n\n    textarea.style.background = 'transparent';\n    textarea.style.color = 'transparent';\n    textarea.style.border = 'none';\n    textarea.style.boxShadow = 'none';\n    textarea.style.resize = 'none';\n    textarea.style.cursor = 'default';\n    textarea.classList.add('grid-textarea');\n    textarea.setAttribute('ondragstart', 'return false;');\n\n    return textarea;\n  }\n\n  grid.eventLoop.bind('grid-destroy', () => {\n    intervals.forEach((id) => {\n      clearInterval(id);\n    });\n\n    timeouts.forEach((id) => {\n      clearTimeout(id);\n    });\n  });\n\n  return grid;\n}\n\nexport default create;\n\nexport * from '../abstract-row-col-model';\nexport * from '../cell-classes';\nexport * from '../cell-keyboard-model';\nexport * from '../cell-mouse-model';\nexport * from '../cell-scroll-model';\nexport * from '../col-model';\nexport * from '../col-reorder';\nexport * from '../col-resize';\nexport * from '../copy-paste';\nexport * from '../data-model';\nexport * from '../data-model';\nexport * from '../decorators';\nexport * from '../dirty-clean';\nexport * from '../edit-model';\nexport * from '../event-loop';\nexport * from '../fps';\nexport * from '../navigation-model';\nexport * from '../pixel-scroll-model';\nexport * from '../position-range';\nexport * from '../row-model';\nexport * from '../show-hidden-cols';\nexport * from '../space/converter';\nexport * from '../space/data-space-converter';\nexport * from '../space/dimensional-converter';\nexport * from '../space/view-space-converter';\nexport * from '../space/virtual-space-converter';\nexport * from '../util';\nexport * from '../view-layer';\nexport * from '../view-port';\nexport * from '../virtual-pixel-cell-model';\n\n\n// WEBPACK FOOTER //\n// ./src/modules/core/index.ts","/**\n * Code refactored from Mozilla Developer Network:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\n\n'use strict';\n\nfunction assign(target, firstSource) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nfunction polyfill() {\n  if (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign\n    });\n  }\n}\n\nmodule.exports = {\n  assign: assign,\n  polyfill: polyfill\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/es6-object-assign/index.js\n// module id = 39\n// module chunks = 0","/*\n A simple package for creating a list of listeners that can be added to and notified\n */\n\ntype Listener = (e: any) => void;\n\nexport function create() {\n    const listeners: Listener[] = [];\n    return {\n        // returns a removal function to unbind the listener\n        addListener(fn: Listener) {\n            listeners.push(fn);\n            return () => {\n                listeners.splice(listeners.indexOf(fn), 1);\n            };\n        },\n        notify(e: any) {\n            listeners.forEach((listener) => {\n                listener(e);\n            });\n        }\n    };\n}\n\nexport default create;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/listeners/index.ts","const EVENT_NAMES = ['mousewheel', 'wheel', 'DOMMouseScroll'];\n\ninterface IOldFFWheelEvent extends MouseWheelEvent {\n    axis: number;\n    detail: number;\n}\n\nconst api = {\n    getDelta(event: any, xaxis?: boolean) {\n        if (event.wheelDelta) { // for everything but firefox\n            let delta = event.wheelDeltaY;\n            if (xaxis) {\n                delta = event.wheelDeltaX;\n            }\n            return delta;\n\n        } else if (event.detail) { // for firefox pre version 17\n            const oldFFWheelEvent = event as IOldFFWheelEvent;\n            if (oldFFWheelEvent.axis && ((oldFFWheelEvent.axis === 1 && xaxis) || (oldFFWheelEvent.axis === 2 && !xaxis))) {\n                return -1 * oldFFWheelEvent.detail * 12;\n            }\n        } else if (event.deltaX || event.deltaY) {\n            if (xaxis) {\n                return -1 * event.deltaX;\n            } else {\n                return -1 * event.deltaY;\n            }\n        }\n        return 0;\n    },\n\n    // binds a cross browser normalized mousewheel event, and returns a function that will unbind the listener;\n    bind(elem: HTMLElement, listener: (e: any) => any) {\n        const normalizedListener = (e: any) => {\n            listener(normalizeWheelEvent(e));\n        };\n\n        EVENT_NAMES.forEach((name) => {\n            elem.addEventListener(name, normalizedListener);\n        });\n\n        return () => {\n            EVENT_NAMES.forEach((name) => {\n                elem.removeEventListener(name, normalizedListener);\n            });\n        };\n\n    },\n    normalize: normalizeWheelEvent\n};\n\nfunction normalizeWheelEvent(e: any): MouseWheelEvent {\n    const deltaX = api.getDelta(e, true);\n    const deltaY = api.getDelta(e);\n    const newEvent = Object.create(e, {\n        deltaY: {\n            value: deltaY\n        },\n        deltaX: {\n            value: deltaX\n        },\n        type: {\n            value: 'mousewheel'\n        },\n        target: {\n            value: e.target\n        },\n        currentTarget: {\n            value: e.currentTarget\n        },\n        defaultPrevented: {\n            value: false,\n            writable: true\n        }\n    });\n\n    newEvent.preventDefault = () => {\n        newEvent.defaultPrevented = true;\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n    };\n    return newEvent;\n}\n\nexport default api;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/mousewheel/index.ts","export default function <D>(d: D) {\n    return d;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/pass-through/index.ts","import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\n\nexport interface IHeaderDecorator extends IDecorator {\n    getDecoratorLeft(): number;\n}\n\nexport interface IHeaderDecoratorCreator {\n    makeDecorator?(c: number): IHeaderDecorator;\n    annotateDecorator?(h: IHeaderDecorator): void;\n    isNeeded?(c: number): boolean;\n}\n\nexport interface IHeaderDecoratorModel extends IHeaderDecoratorCreator {\n    _decorators: { [key: number]: IHeaderDecorator | undefined };\n    makeDecorator(c: number): IHeaderDecorator;\n}\n\nexport function add(grid: Grid, model: IHeaderDecoratorCreator = {}) {\n    // tslint:disable-next-line:prefer-object-spread\n    const api: IHeaderDecoratorModel = Object.assign(model, { _decorators: {}, makeDecorator: model.makeDecorator || makeDecorator });\n\n    function makeDecorator(col: number) {\n        const decorator = grid.decorators.create(0, col, 1, 1, 'cell', 'real') as IHeaderDecorator;\n\n        decorator.getDecoratorLeft = () => {\n            const firstRect = decorator.boundingBox &&\n                decorator.boundingBox.getClientRects &&\n                decorator.boundingBox.getClientRects()[0];\n            return firstRect && grid.viewPort.toGridX(firstRect.left) || 0;\n        };\n\n        if (api.annotateDecorator) {\n            api.annotateDecorator(decorator);\n        }\n\n        return decorator;\n    }\n\n    api.makeDecorator = api.makeDecorator || makeDecorator;\n\n    function ensureDecoratorPerCol() {\n        for (let c = 0; c < grid.viewPort.cols; c++) {\n            if (!api._decorators[c]) {\n                if (api.isNeeded && !api.isNeeded(c)) {\n                    continue;\n                }\n                const decorator = api.makeDecorator(c);\n                api._decorators[c] = decorator;\n                grid.decorators.add(decorator);\n            }\n        }\n    }\n\n    grid.eventLoop.bind('grid-viewport-change', () => {\n        ensureDecoratorPerCol();\n    });\n    ensureDecoratorPerCol();\n\n    return api;\n}\n\nexport default add;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/header-decorators/index.ts","export const stringify = (data: string[][]) => {\n    let stringResult = '';\n    data.forEach((row, r) => {\n        row.forEach((value, c) => {\n            if (value.indexOf('\\n') !== -1 || value.indexOf('\\t') !== -1 || value.indexOf('\"') !== -1) {\n                // replace \" with \"\" to escape and wrap the whole value in quotes\n                value = '\"' + value.replace(/\"/g, '\"\"') + '\"';\n            }\n            stringResult += value;\n            if (c !== row.length - 1) {\n                stringResult += '\\t';\n            }\n        });\n        if (r !== data.length - 1) {\n            stringResult += '\\n';\n        }\n\n    });\n    return stringResult;\n};\n\n// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nfunction DSVToArray(strData: string, strDelimiter?: string) {\n    // Check to see if the delimiter is defined. If not,\n    // then default to comma.\n    strDelimiter = (strDelimiter || ',');\n\n    // Create a regular expression to parse the CSV values.\n    const objPattern = new RegExp(\n        (\n            // Delimiters.\n            '(\\\\' + strDelimiter + '|\\\\r?\\\\n|\\\\r|^)' +\n\n            // Quoted fields.\n            '(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|' +\n\n            // Standard fields.\n            '([^\"\\\\' + strDelimiter + '\\\\r\\\\n]+))'\n        ),\n        'gi'\n    );\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    const arrData: string[][] = [\n        []\n    ];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    let arrMatches = null;\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    // tslint:disable-next-line:no-conditional-assignment\n    while (arrMatches = objPattern.exec(strData)) {\n\n        // Get the delimiter that was found.\n        const strMatchedDelimiter = arrMatches[1];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n        ) {\n\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push([]);\n\n        }\n\n        let strMatchedValue: string;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[2]) {\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[2].replace(\n                new RegExp('\"\"', 'g'),\n                '\"'\n            );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[3];\n\n        }\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[arrData.length - 1].push(strMatchedValue);\n    }\n\n    // Return the parsed data.\n    return (arrData[0].length || !strData) && (arrData) || [\n        [strData]\n    ];\n}\n\nexport const parse = (stringData: string) => {\n    return DSVToArray(stringData, '\\t');\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/tsv/index.ts","module.exports = function innerText(el) {\n  if (el.innerText) return el.innerText;\n  if (!window.getSelection) return 'ERROR: UUPS `window.getSelection` is not available.';\n\n  var selection = window.getSelection();\n  var ranges = [];\n  var text;\n\n  // Save existing selections.\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges[i] = selection.getRangeAt(i);\n  }\n\n  // Deselect everything.\n  selection.removeAllRanges();\n\n  // Select `el` and all child nodes.\n  selection.selectAllChildren(el);\n\n  // Get the string representation of the selected nodes.\n  text = selection.toString();\n\n  // Deselect everything. Again.\n  selection.removeAllRanges();\n\n  // Restore all formerly existing selections.\n  for (var i = 0; i < ranges.length; i++) {\n    selection.addRange(ranges[i]);\n  }\n\n  // Oh look, this is what we wanted.\n  // String representation of the element, close to as rendered.\n  return text;\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/inner-text-shim/index.js\n// module id = 45\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var ref, special;\n\n  ref = require('../ref').ref;\n\n  special = {\n    backspace: ref('Backspace', 8),\n    tab: ref('Tab', 9),\n    enter: ref('Enter', 13),\n    shift: ref('Shift', 16),\n    ctrl: ref('Ctrl', 17),\n    alt: ref('Alt', 18),\n    caps: ref('Caps Lock', 20),\n    esc: ref('Escape', 27),\n    space: ref('Space', 32),\n    num: ref('Num Lock', 144)\n  };\n\n  module.exports = special;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/code/special.js\n// module id = 46\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var arrow, ref;\n\n  ref = require('../ref').ref;\n\n  arrow = {\n    left: ref('Left', 37),\n    up: ref('Up', 38),\n    right: ref('Right', 39),\n    down: ref('Down', 40)\n  };\n\n  module.exports = arrow;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/code/arrow.js\n// module id = 47\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var punctuation, ref;\n\n  ref = require('../ref').ref;\n\n  punctuation = {\n    colon: ref('Colon/Semicolon', [59, 186]),\n    equal: ref('Equal/Plus', [61, 187]),\n    comma: ref('Comma/Less Than', [44, 188]),\n    hyphen: ref('Hyphen/Underscore', [45, 109, 189]),\n    period: ref('Period/Greater Than', [46, 190]),\n    tilde: ref('Tilde/Back Tick', [96, 192]),\n    apostrophe: ref('Apostrophe/Quote', [39, 222]),\n    slash: {\n      forward: ref('Forward Slash/Question Mark', [47, 191]),\n      backward: ref('Backward Slash/Pipe', 220)\n    },\n    brace: {\n      square: {\n        open: ref('Open Square/Curly Brace', 219),\n        close: ref('Close Square/Curly Brace', 221)\n      }\n    }\n  };\n\n  punctuation.semicolon = punctuation.colon;\n\n  punctuation.plus = punctuation.equal;\n\n  punctuation.lessthan = punctuation.comma;\n\n  punctuation.underscore = punctuation.hyphen;\n\n  punctuation.greaterthan = punctuation.period;\n\n  punctuation.question = punctuation.slash.forward;\n\n  punctuation.backtick = punctuation.tilde;\n\n  punctuation.pipe = punctuation.slash.backward;\n\n  punctuation.quote = punctuation.apostrophe;\n\n  punctuation.brace.curly = punctuation.brace.square;\n\n  module.exports = punctuation;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/code/punctuation.js\n// module id = 48\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var alnum, ref;\n\n  ref = require('../ref').ref;\n\n  alnum = {\n    '0': ref('0', 48),\n    '1': ref('1', 49),\n    '2': ref('2', 50),\n    '3': ref('3', 51),\n    '4': ref('4', 52),\n    '5': ref('5', 53),\n    '6': ref('6', 54),\n    '7': ref('7', 55),\n    '8': ref('8', 56),\n    '9': ref('9', 57),\n    a: ref('A', 65),\n    b: ref('B', 66),\n    c: ref('C', 67),\n    d: ref('D', 68),\n    e: ref('E', 69),\n    f: ref('F', 70),\n    g: ref('G', 71),\n    h: ref('H', 72),\n    i: ref('I', 73),\n    j: ref('J', 74),\n    k: ref('K', 75),\n    l: ref('L', 76),\n    m: ref('M', 77),\n    n: ref('N', 78),\n    o: ref('O', 79),\n    p: ref('P', 80),\n    q: ref('Q', 81),\n    r: ref('R', 82),\n    s: ref('S', 83),\n    t: ref('T', 84),\n    u: ref('U', 85),\n    v: ref('V', 86),\n    w: ref('W', 87),\n    x: ref('X', 88),\n    y: ref('Y', 89),\n    z: ref('Z', 90)\n  };\n\n  module.exports = alnum;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/code/alnum.js\n// module id = 49\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var brand, ref;\n\n  ref = require('../ref').ref;\n\n  brand = {\n    apple: ref('Apple &#8984;', 224),\n    windows: {\n      start: ref('Windows start', [91, 92]),\n      menu: ref('Windows menu', 93)\n    }\n  };\n\n  module.exports = brand;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/key/lib/code/brand.js\n// module id = 50\n// module chunks = 0","module.exports.listen = function listenForClickOff(elem, onClickOff, opts) {\n\tvar parsedOpts = opts || {}\n\t\t// we use mousedown to check the target because the click could cause the element to be removed and it'll look like it's not in us\n\tvar lastMouseDownWasOutside = false;\n\t// check again after timeout\n\tvar eventListenerElement = parsedOpts.eventListenerElement || document;\n\tvar isInMe = parsedOpts.isInMe;\n\n\tfunction mousedownHandler(e) {\n\t\tif (typeof elem === 'function') {\n\t\t\telem = elem();\n\t\t}\n\t\tlastMouseDownWasOutside = !elem || !(elem === e.target || elem.contains(e.target)) && !(isInMe && isInMe(e.target));\n\t}\n\n\tfunction mouseupHandler(e) {\n\t\tif (lastMouseDownWasOutside) {\n\t\t\tonClickOff(e);\n\t\t}\n\t}\n\teventListenerElement.addEventListener('mousedown', mousedownHandler);\n\teventListenerElement.addEventListener('mouseup', mouseupHandler);\n\n\treturn function unbindClickOffListeners() {\n\t\teventListenerElement.removeEventListener('mousedown', mousedownHandler);\n\t\teventListenerElement.removeEventListener('mouseup', mouseupHandler);\n\t};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/click-off/src/index.js\n// module id = 51\n// module chunks = 0","'use strict';\n\nmodule.exports = (function() {\n  var perf = window && window.performance;\n  if (perf && perf.now) {\n    return perf.now.bind(perf);\n  } else {\n    return function() {\n      return new Date().getTime();\n    };\n  }\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/time-now/index.js\n// module id = 52\n// module chunks = 0","var globalStack;\n\nfunction makeStack() {\n    var stack = [];\n\n    // in order to capture escape event first\n    document.body.addEventListener('keydown', function(e) {\n\n        var key = e.keyCode ? e.keyCode : e.which;\n        // yup i hard coded 27 sorry suckas\n        if (key === 27) {\n            while (!!stack.length && !(stack.pop())(e)) {}\n        }\n    }, true);\n\n    function addEscapeHandler(handler) {\n        stack.push(handler);\n        return function() {\n            removeEscapeHandler(handler);\n        };\n    }\n\n    function removeEscapeHandler(handler) {\n        var index = stack.indexOf(handler);\n        if (index !== -1) {\n            stack.splice(index, 1);\n        }\n    }\n    return {\n        add: addEscapeHandler\n    };\n}\n\nmodule.exports = function(global) {\n    if (!global) {\n        return makeStack();\n    }\n\n    if (!globalStack) {\n        globalStack = makeStack();\n    }\n    return globalStack;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/escape-stack/src/index.js\n// module id = 53\n// module chunks = 0"],"sourceRoot":""}